// Copyright (c) Microsoft Corporation.
// Licensed under the MIT License.

export {
  ApiCenterApiDefinitionAddedEventData,
  ApiCenterApiSpecification,
  ApiCenterApiDefinitionUpdatedEventData,
  ApiManagementUserCreatedEventData,
  ApiManagementUserUpdatedEventData,
  ApiManagementUserDeletedEventData,
  ApiManagementSubscriptionCreatedEventData,
  ApiManagementSubscriptionUpdatedEventData,
  ApiManagementSubscriptionDeletedEventData,
  ApiManagementProductCreatedEventData,
  ApiManagementProductUpdatedEventData,
  ApiManagementProductDeletedEventData,
  ApiManagementApiCreatedEventData,
  ApiManagementApiUpdatedEventData,
  ApiManagementApiDeletedEventData,
  ApiManagementApiReleaseCreatedEventData,
  ApiManagementApiReleaseUpdatedEventData,
  ApiManagementApiReleaseDeletedEventData,
  ApiManagementGatewayCreatedEventData,
  ApiManagementGatewayUpdatedEventData,
  ApiManagementGatewayDeletedEventData,
  ApiManagementGatewayHostnameConfigurationCreatedEventData,
  ApiManagementGatewayHostnameConfigurationUpdatedEventData,
  ApiManagementGatewayHostnameConfigurationDeletedEventData,
  ApiManagementGatewayCertificateAuthorityCreatedEventData,
  ApiManagementGatewayCertificateAuthorityUpdatedEventData,
  ApiManagementGatewayCertificateAuthorityDeletedEventData,
  ApiManagementGatewayApiAddedEventData,
  ApiManagementGatewayApiRemovedEventData,
  ApiManagementCircuitBreakerOpenedEventData,
  ApiManagementCircuitBreaker,
  ApiManagementCircuitBreakerClosedEventData,
  ApiManagementGatewayTokenNearExpiryEventData,
  ApiManagementGateway,
  ApiManagementNearExpiryGatewayToken,
  ApiManagementGatewayTokenExpiredEventData,
  ApiManagementExpiredGatewayToken,
  AppConfigurationKeyValueModifiedEventData,
  AppConfigurationKeyValueDeletedEventData,
  AppConfigurationSnapshotEventData,
  AppConfigurationSnapshotCreatedEventData,
  AppConfigurationSnapshotModifiedEventData,
  AvsPrivateCloudEventData,
  AvsPrivateCloudUpdatingEventData,
  AvsPrivateCloudUpdatedEventData,
  AvsPrivateCloudFailedEventData,
  AvsClusterEventData,
  AvsClusterCreatedEventData,
  AvsClusterDeletedEventData,
  AvsClusterUpdatingEventData,
  AvsClusterUpdatedEventData,
  AvsClusterFailedEventData,
  AvsScriptExecutionEventData,
  AvsScriptExecutionStartedEventData,
  AvsScriptExecutionFinishedEventData,
  AvsScriptExecutionCancelledEventData,
  AvsScriptExecutionFailedEventData,
  AcsIncomingCallEventData,
  CommunicationIdentifierModel,
  KnownCommunicationIdentifierModelKind,
  CommunicationIdentifierModelKind,
  CommunicationUserIdentifierModel,
  PhoneNumberIdentifierModel,
  MicrosoftTeamsUserIdentifierModel,
  KnownCommunicationCloudEnvironmentModel,
  CommunicationCloudEnvironmentModel,
  MicrosoftTeamsAppIdentifierModel,
  AcsIncomingCallCustomContext,
  AcsUserDisconnectedEventData,
  AcsCallingEvent,
  AcsCallParticipant,
  KnownAcsCallParticipantKind,
  AcsCallParticipantKind,
  AcsCallGroup,
  AcsCallRoom,
  AcsCallStartedEventData,
  AcsCallEndedEventData,
  AcsCallEndedBy,
  KnownAcsCallEndedByKind,
  AcsCallEndedByKind,
  AcsCallEndReason,
  AcsCallParticipantEvent,
  AcsCallParticipantAddedEventData,
  AcsCallParticipantRemovedEventData,
  AcsChatEventInThreadBase,
  AcsChatEventBase,
  AcsChatMessageEventBase,
  AcsChatMessageReceivedEventData,
  AcsChatMessageEventInThreadBase,
  AcsChatAzureBotCommandReceivedInThreadEventData,
  AcsChatTypingIndicatorReceivedInThreadEventData,
  AcsChatMessageReceivedInThreadEventData,
  AcsChatMessageEditedEventData,
  AcsChatMessageEditedInThreadEventData,
  AcsChatMessageDeletedEventData,
  AcsChatMessageDeletedInThreadEventData,
  AcsChatThreadParticipant,
  AcsChatThreadEventBase,
  AcsChatThreadCreatedWithUserEventData,
  AcsChatThreadEventInThreadBase,
  AcsChatThreadCreatedEventData,
  AcsChatThreadWithUserDeletedEventData,
  AcsChatThreadDeletedEventData,
  AcsChatThreadPropertiesUpdatedPerUserEventData,
  AcsChatThreadPropertiesUpdatedEventData,
  AcsChatParticipantAddedToThreadWithUserEventData,
  AcsChatParticipantRemovedFromThreadWithUserEventData,
  AcsChatParticipantAddedToThreadEventData,
  AcsChatParticipantRemovedFromThreadEventData,
  AcsSmsEventBase,
  AcsSmsDeliveryReportReceivedEventData,
  AcsSmsDeliveryAttempt,
  AcsSmsReceivedEventData,
  AcsRecordingFileStatusUpdatedEventData,
  AcsRecordingStorageInfo,
  AcsRecordingChunkInfo,
  KnownAcsRecordingContentType,
  AcsRecordingContentType,
  KnownAcsRecordingChannelType,
  AcsRecordingChannelType,
  KnownAcsRecordingFormatType,
  AcsRecordingFormatType,
  AcsEmailDeliveryReportReceivedEventData,
  KnownAcsEmailDeliveryReportStatus,
  AcsEmailDeliveryReportStatus,
  AcsEmailDeliveryReportStatusDetails,
  AcsEmailEngagementTrackingReportReceivedEventData,
  KnownAcsUserEngagement,
  AcsUserEngagement,
  AcsRouterEventData,
  AcsRouterJobEventData,
  AcsRouterJobCancelledEventData,
  AcsRouterJobClassificationFailedEventData,
  AcsRouterCommunicationError,
  AcsRouterJobClassifiedEventData,
  AcsRouterQueueDetails,
  AcsRouterWorkerSelector,
  KnownAcsRouterLabelOperator,
  AcsRouterLabelOperator,
  KnownAcsRouterWorkerSelectorState,
  AcsRouterWorkerSelectorState,
  AcsRouterJobClosedEventData,
  AcsRouterJobCompletedEventData,
  AcsRouterJobDeletedEventData,
  AcsRouterJobExceptionTriggeredEventData,
  AcsRouterJobQueuedEventData,
  AcsRouterJobReceivedEventData,
  KnownAcsRouterJobStatus,
  AcsRouterJobStatus,
  AcsRouterJobSchedulingFailedEventData,
  AcsRouterJobUnassignedEventData,
  AcsRouterJobWaitingForActivationEventData,
  AcsRouterJobWorkerSelectorsExpiredEventData,
  AcsRouterWorkerEventData,
  AcsRouterWorkerDeletedEventData,
  AcsRouterWorkerDeregisteredEventData,
  AcsRouterWorkerOfferAcceptedEventData,
  AcsRouterWorkerOfferDeclinedEventData,
  AcsRouterWorkerOfferExpiredEventData,
  AcsRouterWorkerOfferIssuedEventData,
  AcsRouterWorkerOfferRevokedEventData,
  AcsRouterWorkerRegisteredEventData,
  AcsRouterChannelConfiguration,
  AcsRouterWorkerUpdatedEventData,
  KnownAcsRouterUpdatedWorkerProperty,
  AcsRouterUpdatedWorkerProperty,
  AcsMessageEventData,
  AcsMessageChannelEventError,
  AcsMessageDeliveryStatusUpdatedEventData,
  KnownAcsMessageDeliveryStatus,
  AcsMessageDeliveryStatus,
  KnownAcsMessageChannelKind,
  AcsMessageChannelKind,
  AcsMessageReceivedEventData,
  AcsMessageMediaContent,
  AcsMessageReactionContent,
  AcsMessageContext,
  AcsMessageButtonContent,
  AcsMessageInteractiveContent,
  KnownAcsInteractiveReplyKind,
  AcsInteractiveReplyKind,
  AcsMessageInteractiveButtonReplyContent,
  AcsMessageInteractiveListReplyContent,
  ContainerRegistryEventData,
  ContainerRegistryEventTarget,
  ContainerRegistryEventRequest,
  ContainerRegistryEventActor,
  ContainerRegistryEventSource,
  ContainerRegistryEventConnectedRegistry,
  ContainerRegistryImagePushedEventData,
  ContainerRegistryImageDeletedEventData,
  ContainerRegistryArtifactEventData,
  ContainerRegistryArtifactEventTarget,
  ContainerRegistryChartPushedEventData,
  ContainerRegistryChartDeletedEventData,
  ContainerServiceNewKubernetesVersionAvailableEventData,
  ContainerServiceClusterSupportEventData,
  ContainerServiceClusterSupportEndedEventData,
  ContainerServiceClusterSupportEndingEventData,
  ContainerServiceNodePoolRollingEventData,
  ContainerServiceNodePoolRollingStartedEventData,
  ContainerServiceNodePoolRollingSucceededEventData,
  ContainerServiceNodePoolRollingFailedEventData,
  DataBoxCopyStartedEventData,
  KnownDataBoxStageName,
  DataBoxStageName,
  DataBoxCopyCompletedEventData,
  DataBoxOrderCompletedEventData,
  EdgeSolutionVersionPublishedEventData,
  EventHubCaptureFileCreatedEventData,
  MapsGeofenceEvent,
  MapsGeofenceGeometry,
  MapsGeofenceEnteredEventData,
  MapsGeofenceExitedEventData,
  MapsGeofenceResultEventData,
  DeviceLifeCycleEvent,
  DeviceTwinInfo,
  DeviceTwinInfoProperties,
  DeviceTwin,
  DeviceTwinMetadata,
  DeviceTwinInfoX509Thumbprint,
  DeviceConnectionStateEvent,
  DeviceConnectionStateEventInfo,
  DeviceTelemetryEvent,
  IotHubDeviceCreatedEventData,
  IotHubDeviceDeletedEventData,
  IotHubDeviceConnectedEventData,
  IotHubDeviceDisconnectedEventData,
  IotHubDeviceTelemetryEventData,
  HealthcareFhirResourceCreatedEventData,
  KnownHealthcareFhirResourceType,
  HealthcareFhirResourceType,
  HealthcareFhirResourceUpdatedEventData,
  HealthcareFhirResourceDeletedEventData,
  HealthcareDicomImageCreatedEventData,
  HealthcareDicomImageDeletedEventData,
  HealthcareDicomImageUpdatedEventData,
  KeyVaultCertificateNewVersionCreatedEventData,
  KeyVaultCertificateNearExpiryEventData,
  KeyVaultCertificateExpiredEventData,
  KeyVaultKeyNewVersionCreatedEventData,
  KeyVaultKeyNearExpiryEventData,
  KeyVaultKeyExpiredEventData,
  KeyVaultSecretNewVersionCreatedEventData,
  KeyVaultSecretNearExpiryEventData,
  KeyVaultSecretExpiredEventData,
  KeyVaultAccessPolicyChangedEventData,
  MachineLearningServicesModelRegisteredEventData,
  MachineLearningServicesModelDeployedEventData,
  MachineLearningServicesRunCompletedEventData,
  MachineLearningServicesDatasetDriftDetectedEventData,
  MachineLearningServicesRunStatusChangedEventData,
  PolicyInsightsPolicyStateCreatedEventData,
  PolicyInsightsPolicyStateChangedEventData,
  PolicyInsightsPolicyStateDeletedEventData,
  RedisPatchingCompletedEventData,
  RedisScalingCompletedEventData,
  RedisExportRDBCompletedEventData,
  RedisImportRDBCompletedEventData,
  ResourceAuthorization,
  ResourceHttpRequest,
  ResourceWriteSuccessEventData,
  ResourceWriteFailureEventData,
  ResourceWriteCancelEventData,
  ResourceDeleteSuccessEventData,
  ResourceDeleteFailureEventData,
  ResourceDeleteCancelEventData,
  ResourceActionSuccessEventData,
  ResourceActionFailureEventData,
  ResourceActionCancelEventData,
  ServiceBusActiveMessagesAvailableWithNoListenersEventData,
  ServiceBusDeadletterMessagesAvailableWithNoListenersEventData,
  ServiceBusActiveMessagesAvailablePeriodicNotificationsEventData,
  ServiceBusDeadletterMessagesAvailablePeriodicNotificationsEventData,
  SignalRServiceClientConnectionConnectedEventData,
  SignalRServiceClientConnectionDisconnectedEventData,
  StorageBlobCreatedEventData,
  KnownStorageBlobAccessTier,
  StorageBlobAccessTier,
  StorageBlobDeletedEventData,
  StorageDirectoryCreatedEventData,
  StorageDirectoryDeletedEventData,
  StorageBlobRenamedEventData,
  StorageDirectoryRenamedEventData,
  StorageLifecyclePolicyCompletedEventData,
  StorageLifecyclePolicyRunSummary,
  KnownStorageLifecycleCompletionStatus,
  StorageLifecycleCompletionStatus,
  StorageLifecyclePolicyActionSummaryDetail,
  StorageBlobTierChangedEventData,
  StorageAsyncOperationInitiatedEventData,
  StorageBlobInventoryPolicyCompletedEventData,
  StorageTaskCompletedEventData,
  KnownStorageTaskCompletedStatus,
  StorageTaskCompletedStatus,
  StorageTaskQueuedEventData,
  StorageTaskAssignmentQueuedEventData,
  StorageTaskAssignmentCompletedEventData,
  KnownStorageTaskAssignmentCompletedStatus,
  StorageTaskAssignmentCompletedStatus,
  AppEventTypeDetail,
  KnownAppAction,
  AppAction,
  WebAppUpdatedEventData,
  WebBackupOperationStartedEventData,
  WebBackupOperationCompletedEventData,
  WebBackupOperationFailedEventData,
  WebRestoreOperationStartedEventData,
  WebRestoreOperationCompletedEventData,
  WebRestoreOperationFailedEventData,
  WebSlotSwapStartedEventData,
  WebSlotSwapCompletedEventData,
  WebSlotSwapFailedEventData,
  WebSlotSwapWithPreviewStartedEventData,
  WebSlotSwapWithPreviewCancelledEventData,
  WebAppServicePlanUpdatedEventData,
  AppServicePlanEventTypeDetail,
  KnownStampKind,
  StampKind,
  KnownAppServicePlanAction,
  AppServicePlanAction,
  KnownAsyncStatus,
  AsyncStatus,
  WebAppServicePlanUpdatedEventDataSku,
  SubscriptionValidationEventData,
  SubscriptionValidationResponse,
  SubscriptionDeletedEventData,
  EventGridMqttClientEventData,
  EventGridMqttClientCreatedOrUpdatedEventData,
  KnownEventGridMqttClientState,
  EventGridMqttClientState,
  EventGridMqttClientDeletedEventData,
  EventGridMqttClientSessionConnectedEventData,
  EventGridMqttClientSessionDisconnectedEventData,
  KnownEventGridMqttClientDisconnectionReason,
  EventGridMqttClientDisconnectionReason,
  ResourceNotificationsResourceUpdatedEventData,
  ResourceNotificationsResourceUpdatedDetails,
  ResourceNotificationsOperationalDetails,
  ResourceNotificationsHealthResourcesAvailabilityStatusChangedEventData,
  ResourceNotificationsHealthResourcesAnnotatedEventData,
  ResourceNotificationsResourceDeletedDetails,
  ResourceNotificationsResourceDeletedEventData,
  ResourceNotificationsResourceManagementCreatedOrUpdatedEventData,
  ResourceNotificationsResourceManagementDeletedEventData,
  ResourceNotificationsContainerServiceEventResourcesScheduledEventData,
  ResourceNotificationsAksResourcesFleetGateCreatedEventData,
  ResourceNotificationsAksResourcesFleetGateUpdatedEventData,
  ResourceNotificationsAksResourcesFleetGateDeletedEventData,
} from "./models/index.js";

export {
  CloudEvent,
  EventGridEvent,
} from "./events.js";

import type { SystemEventNameToEventData } from "./nameMapping.js";
export type { SystemEventNameToEventData };
/**
 * The Event Types for all System Events. These may be used with `isSystemEvent` to determine if an
 * event is a system event of a given type.
 */
export type KnownSystemEventTypes = keyof SystemEventNameToEventData;

import type { CloudEvent, EventGridEvent } from "./events.js";

/**
 * isCloudEventLike returns "true" when the event is a CloudEvent
 *
 * @param o - Either an EventGrid our CloudEvent event.
 */
function isCloudEventLike(
  o: EventGridEvent<unknown> | CloudEvent<unknown>,
): o is CloudEvent<unknown> {
  return (o as any).source !== undefined;
}

/**
 * iSystemEvent returns "true" when a given event is a system event of a given type. When using
 * TypeScript, this function acts as a custom type guard and allows the TypeScript compiler to
 * identify the underlying data
 *
 * @param eventType - The type of system event to check for, e.g., "Microsoft.AppConfiguration.KeyValueDeleted"
 * @param event - The event to test.
 */
export function isSystemEvent<T extends KnownSystemEventTypes>(
  eventType: T,
  event: EventGridEvent<unknown>,
): event is EventGridEvent<SystemEventNameToEventData[T]>;

/**
 * iSystemEvent returns "true" when a given event is a system event of a given type. When using
 * TypeScript, this function acts as a custom type guard and allows the TypeScript compiler to
 * identify the underlying data
 *
 * @param eventType - The type of system event to check for, e.g., "Microsoft.AppConfiguration.KeyValueDeleted"
 * @param event - The event to test.
 */
export function isSystemEvent<T extends KnownSystemEventTypes>(
  eventType: T,
  event: CloudEvent<unknown>,
): event is CloudEvent<SystemEventNameToEventData[T]>;

export function isSystemEvent<T extends KnownSystemEventTypes>(
  eventType: T,
  event: EventGridEvent<unknown> | CloudEvent<unknown>,
): event is
  | EventGridEvent<SystemEventNameToEventData[T]>
  | CloudEvent<SystemEventNameToEventData[T]> {
  if (isCloudEventLike(event)) {
    return event.type === eventType;
  } else {
    return event.eventType === eventType;
  }
}
