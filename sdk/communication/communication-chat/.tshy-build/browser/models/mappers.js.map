{"version":3,"file":"mappers.js","sourceRoot":"","sources":["../../../src/models/mappers.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport type { SerializedCommunicationIdentifier } from \"@azure/communication-common\";\nimport {\n  deserializeCommunicationIdentifier,\n  serializeCommunicationIdentifier,\n} from \"@azure/communication-common\";\nimport type * as RestModel from \"../generated/src/models/index.js\";\nimport type { AddParticipantsRequest } from \"./requests.js\";\nimport type { CreateChatThreadOptions } from \"./options.js\";\nimport type {\n  ChatMessage,\n  ChatMessageContent,\n  ChatMessageReadReceipt,\n  ChatParticipant,\n  ChatThreadProperties,\n  CreateChatThreadResult,\n} from \"./models.js\";\n\nexport const mapToCreateChatThreadOptionsRestModel = (\n  options: CreateChatThreadOptions,\n): RestModel.ChatCreateChatThreadOptionalParams => {\n  const { participants, idempotencyToken, ...rest } = options;\n  return {\n    repeatabilityRequestId: idempotencyToken,\n    ...rest,\n  };\n};\n\n/**\n * @internal\n * Mapping chat participant customer model to chat participant REST model\n */\nexport const mapToChatParticipantRestModel = (\n  chatParticipant: ChatParticipant,\n): RestModel.ChatParticipant => {\n  const { id, ...rest } = chatParticipant;\n  return {\n    ...rest,\n    communicationIdentifier: serializeCommunicationIdentifier(id),\n  };\n};\n\n/**\n * @internal\n * Mapping add participants request to add chat participants request REST model\n */\nexport const mapToAddChatParticipantsRequestRestModel = (\n  addParticipantsRequest: AddParticipantsRequest,\n): RestModel.AddChatParticipantsRequest => {\n  return {\n    participants: addParticipantsRequest.participants?.map((participant) =>\n      mapToChatParticipantRestModel(participant),\n    ),\n  };\n};\n\n/**\n * @internal\n * Mapping chat participant REST model to chat participant SDK model\n */\nexport const mapToChatParticipantSdkModel = (\n  chatParticipant: RestModel.ChatParticipant,\n): ChatParticipant => {\n  const { communicationIdentifier, ...rest } = chatParticipant;\n  return {\n    ...rest,\n    id: deserializeCommunicationIdentifier(\n      communicationIdentifier as SerializedCommunicationIdentifier,\n    ),\n  };\n};\n\n/**\n * @internal\n */\nexport const mapToChatContentSdkModel = (\n  content: RestModel.ChatMessageContent,\n): ChatMessageContent => {\n  const { participants, initiatorCommunicationIdentifier, ...otherChatContents } = content;\n  let result: ChatMessageContent = { ...otherChatContents };\n  if (initiatorCommunicationIdentifier) {\n    const initiator = deserializeCommunicationIdentifier(\n      initiatorCommunicationIdentifier as SerializedCommunicationIdentifier,\n    );\n    result = { ...result, initiator };\n  }\n  if (participants) {\n    result = {\n      ...result,\n      participants: participants?.map((participant) => mapToChatParticipantSdkModel(participant)),\n    };\n  }\n  return result;\n};\n\n/**\n * @internal\n * Mapping chat message REST model to chat message SDK model\n */\nexport const mapToChatMessageSdkModel = (chatMessage: RestModel.ChatMessage): ChatMessage => {\n  const { content, senderCommunicationIdentifier, ...otherChatMessage } = chatMessage;\n  let result: ChatMessage = { ...otherChatMessage };\n  if (content) {\n    result = {\n      ...result,\n      content: mapToChatContentSdkModel(content),\n    };\n  }\n  if (senderCommunicationIdentifier) {\n    const sender = deserializeCommunicationIdentifier(\n      senderCommunicationIdentifier as SerializedCommunicationIdentifier,\n    );\n    result = { ...result, sender };\n  }\n  return result;\n};\n\n/**\n * @internal\n * Mapping chat messages collection REST model to chat message SDK model array\n */\nexport const mapToChatMessagesSdkModelArray = (\n  chatMessagesCollection: RestModel.ChatMessagesCollection,\n): ChatMessage[] => {\n  return chatMessagesCollection.value?.map((chatMessage) => mapToChatMessageSdkModel(chatMessage));\n};\n\n/**\n * @internal\n * Mapping chat thread REST model to chat thread SDK model\n */\nexport const mapToChatThreadPropertiesSdkModel = (\n  chatThread: RestModel.ChatThreadProperties,\n): ChatThreadProperties => {\n  const { createdByCommunicationIdentifier, ...rest } = chatThread;\n  if (createdByCommunicationIdentifier) {\n    return {\n      ...rest,\n      createdBy: deserializeCommunicationIdentifier(\n        createdByCommunicationIdentifier as SerializedCommunicationIdentifier,\n      ),\n    };\n  } else {\n    return { ...rest };\n  }\n};\n\n/**\n * @internal\n * Mapping chat thread REST model to chat thread SDK model\n */\nexport const mapToCreateChatThreadResultSdkModel = (\n  result: RestModel.CreateChatThreadResult,\n): CreateChatThreadResult => {\n  const { chatThread, ...rest } = result;\n  if (chatThread) {\n    return {\n      ...rest,\n      chatThread: mapToChatThreadPropertiesSdkModel(chatThread),\n    };\n  } else {\n    return { ...rest };\n  }\n};\n\n/**\n * @internal\n * Mapping read receipt REST model to read receipt SDK model\n */\nexport const mapToReadReceiptSdkModel = (\n  readReceipt: RestModel.ChatMessageReadReceipt,\n): ChatMessageReadReceipt => {\n  const { senderCommunicationIdentifier, ...rest } = readReceipt;\n  return {\n    ...rest,\n    sender: deserializeCommunicationIdentifier(\n      senderCommunicationIdentifier as SerializedCommunicationIdentifier,\n    ),\n  };\n};\n"]}