{"version":3,"file":"smsUtils.js","sourceRoot":"","sources":["../../../src/utils/smsUtils.ts"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,kCAAkC;AAIlC,OAAO,EAAE,IAAI,EAAE,MAAM,WAAW,CAAC;AAGjC,MAAM,UAAU,0BAA0B,CACxC,UAA0B,EAC1B,UAA0B,EAAE;;IAE5B,MAAM,eAAe,GAAoB;QACvC,oBAAoB,EAAE,MAAA,OAAO,CAAC,oBAAoB,mCAAI,KAAK;KAC5D,CAAC;IACF,IAAI,OAAO,CAAC,GAAG,EAAE,CAAC;QAChB,eAAe,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC;IACvC,CAAC;IAED,OAAO;QACL,IAAI,EAAE,UAAU,CAAC,IAAI;QACrB,aAAa,EAAE,UAAU,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,EAAE;YAClD,OAAO;gBACL,EAAE,EAAE,cAAc;gBAClB,sBAAsB,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,WAAW,EAAE;gBAC1D,sBAAsB,EAAE,IAAI,CAAC,YAAY,EAAE;aAC5C,CAAC;QACJ,CAAC,CAAC;QACF,OAAO,EAAE,UAAU,CAAC,OAAO;QAC3B,cAAc,kBACZ,oBAAoB,EAAE,MAAA,OAAO,CAAC,oBAAoB,mCAAI,KAAK,IACxD,CAAC,OAAO,CAAC,GAAG,IAAI,EAAE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CACzC;KACF,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,qBAAqB,CAAC,IAAY,EAAE,EAAY;IAC9D,OAAO;QACL,IAAI,EAAE,IAAI;QACV,UAAU,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,EAAE;YACpC,OAAO;gBACL,EAAE,EAAE,cAAc;aACnB,CAAC;QACJ,CAAC,CAAC;KACH,CAAC;AACJ,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport type { SendMessageRequest, OptOutRequest } from \"../generated/src/models/index.js\";\nimport type { SmsSendOptions, SmsSendRequest } from \"../smsClient.js\";\nimport { Uuid } from \"./uuid.js\";\nimport type { SmsSendOptions as InternalOptions } from \"../generated/src/models/index.js\";\n\nexport function generateSendMessageRequest(\n  smsRequest: SmsSendRequest,\n  options: SmsSendOptions = {},\n): SendMessageRequest {\n  const _smsSendOptions: InternalOptions = {\n    enableDeliveryReport: options.enableDeliveryReport ?? false,\n  };\n  if (options.tag) {\n    _smsSendOptions[\"tag\"] = options.tag;\n  }\n\n  return {\n    from: smsRequest.from,\n    smsRecipients: smsRequest.to.map((phoneNumberStr) => {\n      return {\n        to: phoneNumberStr,\n        repeatabilityFirstSent: new Date(Date.now()).toUTCString(),\n        repeatabilityRequestId: Uuid.generateUuid(),\n      };\n    }),\n    message: smsRequest.message,\n    smsSendOptions: {\n      enableDeliveryReport: options.enableDeliveryReport ?? false,\n      ...(options.tag && { tag: options.tag }),\n    },\n  };\n}\n\nexport function generateOptOutRequest(from: string, to: string[]): OptOutRequest {\n  return {\n    from: from,\n    recipients: to.map((phoneNumberStr) => {\n      return {\n        to: phoneNumberStr,\n      };\n    }),\n  };\n}\n"]}