{
  "swagger": "2.0",
  "info": {
    "title": "TieringClient",
    "description": "The tiering client library retrieves limits for each capability (SMS/PSTN Calling/Phone Number purchase) for a specific resource/tier.",
    "version": "2022-11-15"
  },
  "paths": {
    "/administration/resources/{resourceId}/telephone-number-summary": {
      "get": {
        "tags": [
          "ACS Tiering"
        ],
        "summary": "Get acquired numbers and limits for a resource.",
        "operationId": "NumberAllotment_GetAcquiredNumberLimits",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "resourceId",
            "description": "Resource Id. Must be a valid GUID",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AssetDetails"
              }
            }
          },
          "default": {
            "description": "Failure",
            "schema": {
              "$ref": "#/definitions/CommunicationErrorResponse"
            }
          }
        },
        "x-ms-examples": {
          "Get acquired numbers and limits for a resource": {
            "$ref": "./examples/GetAcquiredNumberLimits.json"
          }
        }
      }
    },
    "/administration/tiers/resources/{resourceId}": {
      "get": {
        "tags": [
          "ACS Tiering"
        ],
        "summary": " Get the tiering data for a given resource",
        "operationId": "Tiering_GetByResourceId",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "resourceId",
            "description": "Resource Id. Must be a valid GUID",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AcsTier"
              }
            }
          },
          "default": {
            "description": "Failure",
            "schema": {
              "$ref": "#/definitions/CommunicationErrorResponse"
            }
          }
        },
        "x-ms-examples": {
          "Get tier info for a resource": {
            "$ref": "./examples/GetTierInfo.json"
          }
        }
      }
    }
    },
  "definitions": {
    "AssetDetails": {
      "description": "Model response for acquired number and limits.",
      "type": "object",
      "properties": {
        "NumberType": {
          "description": "Array defining the number type of the phone number.",
            "type": "array",
            "items": {
              "type": "string"
            }
        },
        "ResourceAcquiredCount": {
          "description": "Number of phone numbers that the resource has.",
          "type": "integer"
        },
        "SubscriptionAcquiredCount": {
          "description": "Number of phone numbers that the subscription that the resource belongs to has.",
          "type": "integer"
        },
        "AadTenantAcquiredCount": {
          "description": "Number of phone numbers that the AAD tenant that the resource belongs to has.",
          "type": "integer"
        },
        "TierInfo": {
          "description": "Tier specific info.",
          "type": "object",
          "properties": {
          "Scope": {
            "description": "The level at which the tiering properties in the TierInfo are for",
            "type": "string"
          },
          "Allowed": {
            "description": "Number of phone numbers allowed that can change based on scope where scope can be (resource, subscription or tenant).",
            "type": "integer"
          },
          "Acquired": {
            "description": "Number of phone numbers acquired that can change based on scope where scope can be (resource, subscription or tenant).",
            "type": "integer"
          },
          "Balance": {
            "description": "Difference between allowed and acquired amount.",
            "type": "integer"
          },
          "Limit": {
            "description": "The standing of a customer to determine if they able to purchase more phone numbers.",
            "type": "string"
          }
          }
        }
      }
    },
    "AcsTier": {
      "description": "Represents an ACS Tier resource.",
      "type": "object",
      "properties": {
        "TierId": {
          "description": "Tier Id.",
          "type": "string"
        },
        "CorrelationId": {
          "description": "Correlation Id",
          "type": "string"
        },
        "TierType": {
          "description": "Tier Type",
          "type": "string"
        },
        "Capabilities": {
          "description": "Capabilities for the resource",
          "type": "object",
          "properties": {
            "PhoneNumberPurchase": {
              "description": "Phone number purchase capabilities of the tier.",
              "type": "array",
              "items": {
                 "$ref": "#/definitions/PhoneNumberPurchase"
              }
            },
            "SMS": {
              "description": "SMS capabilities of the tier.",
              "type": "object",
              "properties": {
                "Outbound": {
                  "description": "SMS Outbound capabilities of the tier.",
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/SMSOutbound"
                  }
                },
                "Inbound": {
                  "description": "SMS Inbound capabilities of the tier.",
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/SMSInbound"
                  }
                }
              }
            },
            "Calling": {
              "description": "Calling capabilities of the tier.",
              "type": "object",
              "properties": {
                "Outbound": {
                  "description": "Calling Outbound capabilities of the tier.",
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/CallingOutbound"
                  }
                },
                "Inbound": {
                  "description": "Calling Inbound capabilities of the tier.",
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/CallingInbound"
                  }
                }
              }
            },
            "TrialPhoneNumberPurchase": {
              "description": "Trial phone number purchase capability details.",
              "type": "array",
              "items": {
                "$ref": "#/definitions/TrialPhoneNumberPurchase"
              }
            },
            "TrialPhoneNumberUsage": {
              "description": "Trial phone number usage of the tier.",
              "type": "array",
              "items": {
                "$ref": "#/definitions/TrialPhoneNumberUsage"
              }
            }
          }
        }
      }
    },
    "PhoneNumberPurchase":{
      "description": "Phone number purchase capability details.",
      "type":"object",
      "properties": {
        "NumberType": {
          "description": "Types to apply the limit to.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
        "Scope": {
          "description": "The scope to apply the limits.",
          "type": "string"
        },
        "TotalNumbers": {
          "description": "The limit of numbers allowed for purchase for the number type.",
          "type": "integer"
        }
      }
    },
    "SMSOutbound":{
      "description": "Sms Outbound Capabilities for the tier.",
      "type":"object",
      "properties": {
        "Type": {
          "description": "Type of number.",
          "type": "string"
        },
        "Scope": {
          "description": "The scope to apply the limits.",
          "type": "string"
        },
        "SmsPerMin": {
          "description": "The limit of SMSs a customer can send per minute.",
          "type": "integer"
        },
        "GeographicLimitations": {
          "description": "The areas where an SMS is allowed to be sent.",
          "type": "string"
        }
      }
    },
    "SMSInbound":{
      "description": "Sms Inbound Capabilities for the tier.",
      "type":"object",
      "properties": {
        "Type": {
          "description": "Type of number.",
          "type": "string"
        },
        "Scope": {
          "description": "The scope to apply the limits.",
          "type": "string"
        },
        "SmsPerMin": {
          "description": "The limit of SMSs a customer can send per minute.",
          "type": "integer"
        },
        "GeographicLimitations": {
          "description": "The areas where an SMS is allowed to be sent.",
          "type": "string"
        }
      }
    },
    "CallingOutbound":{
      "description": "Calling Outbound Capabilities for the tier.",
      "type":"object",
      "properties": {
        "Type": {
          "description": "Type of calling.",
          "type": "string"
        },
        "Scope": {
          "description": "The scope to apply the limits.",
          "type": "string"
        },
        "ConcurrentCalls": {
          "description": "The number of concurrent calls allowed.",
          "type": "integer"
        },
        "GeographicLimitations": {
          "description": "The areas where calls are allowed to take place.",
          "type": "string"
        }
      }
    },
    "CallingInbound":{
      "description": "Calling Outbound Capabilities for the tier.",
      "type":"object",
      "properties": {
        "Type": {
          "description": "Type of calling.",
          "type": "string"
        },
        "Scope": {
          "description": "The scope to apply the limits.",
          "type": "string"
        },
        "ConcurrentCalls": {
          "description": "The number of concurrent calls allowed.",
          "type": "integer"
        },
        "GeographicLimitations": {
          "description": "The areas where calls are allowed to take place.",
          "type": "string"
        }
      }
    },
    "TrialPhoneNumberUsageCallingBounds":{
      "description": "Trial phone number capability details.",
      "type":"object",
      "properties": {
        "Type": {
          "description": " Type of calling.",
          "type": "string"
        },
        "Scope": {
          "description": "The scope to apply the limits to.",
          "type": "string"
        },
        "TotalMinutes": {
          "description": "The total calling minutes allowed for a tial number.",
          "type": "integer"
        },
        "MaximumCallDurationMinutes": {
          "description": "The total call duration in minutes allowed for a trial number.",
          "type": "integer"
        }
      }
    },
    "TrialPhoneNumberUsageSmsBounds":{
      "description": "Trial phone number SMS capability details.",
      "type":"object",
      "properties": {
        "Type": {
          "description": "The type of SMS.",
          "type": "string"
        },
        "Scope": {
          "description": "The scope to apply the limits to.",
          "type": "string"
        },
        "Total": {
          "description": "Total",
          "type": "integer"
        },
        "SmsPerMin": {
          "description": "The total SMSs allowed to be sent in a minute.",
          "type": "integer"
        }
      }
    },
    "TrialPhoneNumberPurchase":{
      "description": "Trial phone number purchase capability details.",
      "type":"object",
      "properties": {
        "NumberType": {
          "description": "Types to apply the limit to.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
        "Scope": {
          "description": "The scope to apply the limits.",
          "type": "string"
        },
        "TotalNumbers": {
          "description": "The limit of numbers allowed for purchase for the number type.",
          "type": "integer"
        },
        "TrialPeriodDays": {
          "description": "The number of days in the trial period for the number type.",
          "type": "integer"
        }
      }
    },
    "TrialPhoneNumberUsage":{
      "description": "Trial phone number usage capability details.",
      "type":"object",
      "properties": {
        "NumberType": {
          "description": "The number type.",
          "type": "string"
        },
        "Calling": {
          "description": "The capabilities for calling.",
          "type": "object",
          "properties": {
            "Outbound": {
              "description": "The Outbound capabilities for calling.",
              "type": "array",
              "items": {
                "$ref": "#/definitions/TrialPhoneNumberUsageCallingBounds"
              }
            },
            "Inbound": {
              "description": "The Inbound capabilities for calling.",
              "type": "array",
              "items": {
                "$ref": "#/definitions/TrialPhoneNumberUsageCallingBounds"
              }
            }
          }
        },
        "Sms": {
          "description": "The SMS capabilities for the trial phone number.",
          "type": "object",
          "properties": {
            "Outbound": {
              "description": "Outbound trial phone number SMS capabilities.",
              "type": "array",
              "items": {
                "$ref": "#/definitions/TrialPhoneNumberUsageSmsBounds"
              }
            },
            "Inbound": {
              "description": "Inbound trial phone number SMS capabilities.",
              "type": "array",
              "items": {
                "$ref": "#/definitions/TrialPhoneNumberUsageSmsBounds"
              }
            }
          }
        }
      }
    },
    "CommunicationErrorResponse": {
      "description": "The Communication Services error.",
      "type": "object",
      "required": [
        "error"
      ],
      "properties": {
        "error": {
          "description": "The Communication Services error.",
          "$ref": "#/definitions/CommunicationError"
        }
      }
    },
    "CommunicationError": {
      "description": "The Communication Services error.",
      "type": "object",
      "required": [
        "code",
        "message"
      ],
      "properties": {
        "code": {
          "type": "string",
          "description": "The error code."
        },
        "message": {
          "type": "string",
          "description": "The error message."
        },
        "target": {
          "type": "string",
          "readOnly": true,
          "description": "The error target."
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/CommunicationError"
          },
          "readOnly": true,
          "description": "Further details about specific errors that led to this error."
        },
        "innererror": {
          "x-ms-client-name": "innerError",
          "readOnly": true,
          "$ref": "#/definitions/CommunicationError",
          "description": "The inner error if any."
        }
      }
    }
  },
  "parameters": {
    "ApiVersionParameter": {
      "in": "query",
      "name": "api-version",
      "description": "Version of API to invoke",
      "required": true,
      "type": "string"
    },
    "Endpoint": {
      "in": "path",
      "name": "endpoint",
      "description": "The communication resource, for example https://resourcename.communication.azure.com",
      "required": true,
      "type": "string",
      "x-ms-skip-url-encoding": true,
      "x-ms-parameter-location": "client"
    }
  },
  "securityDefinitions": {
    "azure_auth": {
      "type": "oauth2",
      "flow": "implicit",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
      "scopes": {
        "user_impersonation": "impersonate your user account"
      },
      "description": "Azure Active Directory OAuth2 Flow"
    }
  },
  "x-ms-parameterized-host": {
    "hostTemplate": "{endpoint}",
    "useSchemePrefix": false,
    "parameters": [
      {
        "$ref": "#/parameters/Endpoint"
      }
    ]
  }
}
