{"version":3,"file":"streaming.js","sourceRoot":"","sources":["../../../src/models/streaming.ts"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,kCAAkC;AAsClC,MAAM,CAAN,IAAY,SAKX;AALD,WAAY,SAAS;IACnB,iBAAiB;IACjB,oCAAuB,CAAA;IACvB,qBAAqB;IACrB,oCAAuB,CAAA;AACzB,CAAC,EALW,SAAS,KAAT,SAAS,QAKpB;AAKD;;GAEG;AACH,MAAM,CAAN,IAAY,UAGX;AAHD,WAAY,UAAU;IACpB,iDAAiD;IACjD,iCAAmB,CAAA;AACrB,CAAC,EAHW,UAAU,KAAV,UAAU,QAGrB;AAyDD,yEAAyE;AACzE,MAAM,CAAN,IAAY,iBASX;AATD,WAAY,iBAAiB;IAC3B,kBAAkB;IAClB,4CAAuB,CAAA;IACvB,sBAAsB;IACtB,oDAA+B,CAAA;IAC/B,0BAA0B;IAC1B,4DAAuC,CAAA;IACvC,8BAA8B;IAC9B,oEAA+C,CAAA;AACjD,CAAC,EATW,iBAAiB,KAAjB,iBAAiB,QAS5B;AAED,oBAAoB;AACpB,MAAM,CAAN,IAAY,OAGX;AAHD,WAAY,OAAO;IACjB,2CAAW,CAAA;IACX,qCAAQ,CAAA;AACV,CAAC,EAHW,OAAO,KAAP,OAAO,QAGlB;AAED,oCAAoC;AACpC,MAAM,OAAO,gBAAgB;IAQ3B,YAAY,IAAe;QACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;IAED,iEAAiE;IACjE,MAAM,CAAC,2BAA2B,CAAC,IAAY;QAC7C,MAAM,gBAAgB,GAAqB;YACzC,IAAI,EAAE,SAAS,CAAC,SAAS;YACzB,SAAS,EAAE;gBACT,IAAI,EAAE,IAAI;gBACV,SAAS,EAAE,SAAS;gBACpB,WAAW,EAAE,SAAS;gBACtB,QAAQ,EAAE,KAAK;aAChB;YACD,SAAS,EAAE,EAAE;SACd,CAAC;QAEF,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;QAC9C,OAAO,IAAI,CAAC;IACd,CAAC;IAED,6DAA6D;IAC7D,MAAM,CAAC,uBAAuB;QAC5B,MAAM,gBAAgB,GAAqB;YACzC,IAAI,EAAE,SAAS,CAAC,SAAS;YACzB,SAAS,EAAE,SAAS;YACpB,SAAS,EAAE,EAAE;SACd,CAAC;QACF,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;QAC9C,OAAO,IAAI,CAAC;IACd,CAAC;CACF","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport type { CommunicationIdentifier } from \"@azure/communication-common\";\nimport type { TranscriptionResultState } from \"../generated/src/index.js\";\n\n/**\n * Audio streaming data.\n */\nexport interface AudioData {\n  /** A unique identifier for the media subscription.*/\n  data: string;\n  /** The timestamp indicating when the media content was received by the bot,\n          or if the bot is sending media, the timestamp of when the media was sourced.\n          The format is ISO 8601 (yyyy-mm-ddThh:mm).*/\n  timestamp?: Date;\n  /** Indicates whether the received audio buffer contains only silence..*/\n  isSilent?: boolean;\n  /** The identified speaker based on participant raw ID. */\n  participant?: CommunicationIdentifier | undefined;\n}\n\n/**\n * Audio streaming metadata.\n */\nexport interface AudioMetadata {\n  /** Audio streaming subscription id.*/\n  subscriptionId: string;\n  /** The format used to encode the audio. Currently, only \"pcm\" (Pulse Code Modulation) is supported.*/\n  encoding: string;\n  /** The number of samples per second in the audio. Supported values are 16kHz or 24kHz.*/\n  sampleRate: number;\n  /** Specifies the number of audio channels in the audio configuration.\n          Currently, only \"mono\" (single channel) is supported.*/\n  channels: Channel;\n  /** The size of the audio data being sent, based on the sample rate and duration.*/\n  length: number;\n}\n\nexport enum MediaKind {\n  /** Audio data.*/\n  AudioData = \"audioData\",\n  /** stop audio data*/\n  StopAudio = \"stopAudio\",\n}\n\n// Out streaming Stop Audio Data\nexport interface StopAudio {}\n\n/**\n * The format of transcription text.\n */\nexport enum TextFormat {\n  /** Formatted recognize text with punctuations.*/\n  Display = \"display\",\n}\n\n/**\n * Text in the phrase.\n */\nexport interface WordData {\n  /** Text in the phrase.*/\n  text: string;\n  /** The word's position within the phrase.*/\n  offsetInTicks: number;\n  /** Duration in ticks. 1 tick = 100 nanoseconds.*/\n  durationInTicks: number;\n}\n\n/**\n * Metadata for Transcription Streaming.\n */\nexport interface TranscriptionMetadata {\n  /** Transcription Subscription Id.*/\n  subscriptionId: string;\n  /** The target locale in which the translated text needs to be.*/\n  locale: string;\n  /** call connection Id.*/\n  callConnectionId: string;\n  /** correlation Id.*/\n  correlationId: string;\n}\n\n/**\n * Streaming Transcription.\n */\nexport interface TranscriptionData {\n  /** The display form of the recognized word.*/\n  text: string;\n  /** The format of text.*/\n  format: TextFormat;\n  /** Confidence of recognition of the whole phrase, from 0.0 (no confidence) to 1.0 (full confidence). */\n  confidence: number;\n  /** The position of this payload. 1 tick = 100 nanoseconds. */\n  offsetInTicks: number;\n  /** Duration in ticks. 1 tick = 100 nanoseconds. */\n  durationInTicks: number;\n  /** The result for each word of the phrase. */\n  words: WordData[];\n  /** The identified speaker based on participant raw ID. */\n  participant: CommunicationIdentifier;\n  /** State of the result of transcription. */\n  resultState: TranscriptionResultState;\n}\n\n// StreamingDataResult type  | TranscriptionMetadata| TranscriptionData| AudioData| AudioMetadata;\nexport type StreamingDataResult =\n  | TranscriptionMetadata\n  | TranscriptionData\n  | AudioData\n  | AudioMetadata;\n\n// Enum for different kinds of streaming data in a call automation system\nexport enum StreamingDataKind {\n  // Audio data type\n  AudioData = \"AudioData\",\n  // Audio metadata type\n  AudioMetadata = \"AudioMetadata\",\n  // Transcription data type\n  TranscriptionData = \"TranscriptionData\",\n  // Transcription metadata type\n  TranscriptionMetadata = \"TranscriptionMetadata\",\n}\n\n// Enum for channel.\nexport enum Channel {\n  Unknown = 0,\n  Mono = 1,\n}\n\n// Base class for Out Streaming Data\nexport class OutStreamingData {\n  /** Out streaming data kind ex. StopAudio, AudioData*/\n  kind: MediaKind;\n  /** Out streaming Audio Data */\n  audioData?: AudioData;\n  /** Out streaming Stop Audio Data */\n  stopAudio?: StopAudio;\n\n  constructor(kind: MediaKind) {\n    this.kind = kind;\n  }\n\n  /** Public static method to stringify the outbound audio data. */\n  static getStreamingDataForOutbound(data: string): string {\n    const outStreamingData: OutStreamingData = {\n      kind: MediaKind.AudioData,\n      audioData: {\n        data: data,\n        timestamp: undefined,\n        participant: undefined,\n        isSilent: false,\n      },\n      stopAudio: {},\n    };\n\n    const json = JSON.stringify(outStreamingData);\n    return json;\n  }\n\n  /** Public static method to stringify the stop audio data. */\n  static getStopAudioForOutbound(): string {\n    const outStreamingData: OutStreamingData = {\n      kind: MediaKind.StopAudio,\n      audioData: undefined,\n      stopAudio: {},\n    };\n    const json = JSON.stringify(outStreamingData);\n    return json;\n  }\n}\n"]}