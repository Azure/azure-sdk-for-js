<!DOCTYPE html>
<html>
<head>
	<title>ESLint Report</title>
	<style>
	body {
		font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
		font-size: 16px;
		font-weight: normal;
		margin: 0;
		padding: 0;
		color: #333;
	}

	code {
		font: 12px monaco, monospace;
	}

	#overview {
		background: #f3f3f3;
		padding: 20px 30px;
		border-bottom: 10px solid #ccc;
	}

	#overview.bg-success {border-color: #008000;}
	#overview.bg-warning {border-color: #ffa500;}
	#overview.bg-error {border-color: #f00;}

	.bg-success {background: #dff0d8;}
	.bg-warning {background: #fcf8e3;}
	.bg-error {background: #f2dede;}

	.container {
		padding: 0 30px;
	}

	.page-header {
		padding-bottom: 9px;
		margin: 20px 0 20px;
		border-bottom: 1px solid #eee;
	}

	.row {
		display: table;
		width: 100%;
	}

	.column {
		padding: 15px;
		display: table-cell;
	}

	.text-success {
		color: #468847;
	}

	.text-warning {
		color: #f0ad4e;
	}

	.text-error {
		color: #b94a48;
	}

	td, th {
		padding: 5px 10px;
	}

	h1 {
		margin: 0;
	}

	h1 small {
		text-transform: capitalize;
	}

	table#fileOverview {
		margin: 30px;
		width: calc(100vw - 120px);
		border-radius: 5px;
		border: 1px solid #ddd;
		border-spacing: 0;
	}

	th {
		font-weight: 400;
		font-size: normal;
		text-align: left;
		border-bottom: 1px solid #ddd;
	}

	tr.lint-result {
		cursor: pointer;
	}

	tr.lint-result.bg-success {
		cursor: default;
	}

	th span {
		font-weight: 700;
		float: right;
		margin-left: 20px;
	}

	th span:after {
		content: "";
		clear: both;
		display: block;
	}

	tr:last-child td {
		border-bottom: none;
	}

	tr.bg-success th {
		border-color: #d6e9c6;
	}

	tr.bg-warning th {
		border-color: #fbeed5;
	}

	tr.bg-error th {
		border-color: #eed3d7;
	}

	td {
		border-bottom: 1px solid #ddd;
	}

	td a {
		color: #2780e3;
		text-decoration: none;
	}

	td a:hover {
		color: #165ba8;
		text-decoration: underline;
	}

	.icon-box {
		width: 30px;
		-webkit-box-sizing: border-box;
		-moz-box-sizing: border-box;
		box-sizing: border-box;
	}

	.result-summary {
		text-align: right;
	}

	/* Summary Styles */

	.summary-table {
		width: 100%;
	}

	.summary-table, .summary-table th, .summary-table td {
		color: #333;
		border: 1px solid #ddd;
		border-collapse: collapse;
		margin: 0;
	}

	.summary-table th {
		color: #444;
		background-color: #fafafa;
		font-weight: 700;
		text-transform: capitalize;
		border-bottom-width: 2px;
	}

	/* Filters */

	.filters {border: none;}
	.filters legend {
		font-weight: bold;
	}
	.filters input[type="radio"] {
		position: absolute;
		opacity: 0;
	}
	.btn-radio {
		display: inline-block;
		font-weight: bold;
		background: #fff;
		border: 1px solid #ccc;
		padding: 6px 12px;
		cursor: pointer;
	}
	input[type="radio"]:focus + .btn-radio {
		outline: 2px dotted #000;
	}
	input[type="radio"]:checked + .btn-radio {
		background: #e6e6e6;
		-webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
		box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
	}

	/* Accordion */

	.caret {
		display: inline-block;
		width: 0;
		height: 0;
		margin-left: 2px;
		vertical-align: middle;
		border-left: 6px dashed;
		border-top: 6px solid transparent;
		border-bottom: 6px solid transparent;
	}

	.open .caret{
		border-top: 6px dashed;
		border-right: 6px solid transparent;
		border-left: 6px solid transparent;
	}

	.bg-success .caret {
		border: none;
		height: auto;
		width: auto;
	}

	.bg-success .caret:before {
		content: '\02713';
	}

	/* Tabs */

	.nav-tabs {
		margin-bottom: 15px;
		padding-left: 0;
		list-style: none;
		border-bottom: 1px solid #ddd;
	}

	.nav-tabs > li {
		position: relative;
		display: inline-block;
		margin-bottom: -1px;
	}

	.nav-tabs > li > button {
		position: relative;
		display: block;
		padding: 10px 15px;
		margin-right: 2px;
		line-height: 1.5;
		cursor: pointer;
		color: #2780e3;
		background-color: transparent;
		border: 1px solid transparent;
	}

	.nav-tabs > li > button:focus,
	.nav-tabs > li > button:hover {
		color: #165ba8;
		background-color: #e6e6e6;
		border-color: #e6e6e6 #e6e6e6 #ddd;
	}

	.nav-tabs > li.active > button {
		color: #555;
		background-color: #fff;
		border: 1px solid #ddd;
		border-bottom-color: transparent;
		cursor: default;
		text-decoration: none;
	}

	/* Code Styles */

	table.source-code {
		width: 100%;
		margin-top: 10px;
		border-collapse: collapse;
		border: 1px solid #cbcbcb;
		color: #363636;
		-webkit-border-radius: 3px;
		-moz-border-radius: 3px;
		border-radius: 3px;
	}

	table.source-code thead {
		display: none;
	}

	table.source-code td {
		color: #363636;
		border: none;
	}

	table.source-code td.line {
		width: 20px;
		background: #eaeaea;
		text-align: center;
		font-size: 11px;
		padding: 0 10px;
		color: #949494;
	}

	table.source-code tr.bg-success {
		background: #fff;
	}

	table.source-code tr.bg-warning td.line {
		background: #fbeed5;
	}

	table.source-code tr.bg-warning td {
		background: #fcf8e3;
	}

	table.source-code tr.bg-error td.line {
		background: #e6c3c7;
	}

	table.source-code tr.bg-error td {
		background: #f8d5d8;
	}

	table.source-code tr.issue {
		background-color: hsl(240, 20%, 96%);
		font-size: 12px;
		box-shadow: inset 10px 10px 10px -12px hsl(240, 20%, 17%);
		margin-top: 10px;
		padding-top: 5px;
		padding-left: 5px;
		padding-bottom: 2px;
	}

	.issue a {
		float: right;
	}

	table.source-code td.source {
		padding-left: 15px;
		line-height: 15px;
		white-space: pre;
	}

	/* Overwrite classes */

	.hidden {
		display: none;
	}
</style>
</head>
<body>
	<div id="overview" class="bg-error">
		<h1>ESLint Report - <small class="text-error">error</small></h1>
	</div>
	<div class="container">
		<div id="summary">
			<h2 class="page-header">Summary</h2>
			<div>129 problems (71 errors, 58 warnings)</div>
			<div class="row"><div class="column">
	<h3 class="text-error">Top errors</h3>
	<table class="summary-table"><thead>
		<tr>
			<th>rule</th>
			<th>count</th>
		</tr>
	</thead><tbody>
		<tr>
	<td><a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a></td>
	<td>26</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a></td>
	<td>16</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a></td>
	<td>12</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a></td>
	<td>6</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a></td>
	<td>5</td>
</tr>
	</tbody></table>
</div>
<div class="column">
	<h3 class="text-warning">Top warnings</h3>
	<table class="summary-table"><thead>
		<tr>
			<th>rule</th>
			<th>count</th>
		</tr>
	</thead><tbody>
		<tr>
	<td><a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a></td>
	<td>28</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a></td>
	<td>15</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a></td>
	<td>12</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/@typescript-eslint/no-unused-vars" target="_blank">@typescript-eslint/no-unused-vars</a></td>
	<td>3</td>
</tr>
	</tbody></table>
</div>
</div><div class="row">
	<div class="column">
		<h3>Most Problems</h3>
		<table class="summary-table"><thead>
			<tr>
				<th>file path</th>
				<th>errors</th>
				<th>warnings</th>
			</tr>
		</thead><tbody>
			<tr>
	<td><a href="#cCodeAzureSdkForJsSdkEventhubEventHubsSrcEventDataTs">\src\eventData.ts</a></td>
	<td>14</td>
	<td>0</td>
</tr>
<tr>
	<td><a href="#cCodeAzureSdkForJsSdkEventhubEventHubsTestReceiverSpecTs">\test\receiver.spec.ts</a></td>
	<td>12</td>
	<td>51</td>
</tr>
<tr>
	<td><a href="#cCodeAzureSdkForJsSdkEventhubEventHubsSrcEventHubSenderTs">\src\eventHubSender.ts</a></td>
	<td>9</td>
	<td>2</td>
</tr>
<tr>
	<td><a href="#cCodeAzureSdkForJsSdkEventhubEventHubsSrcBatchingReceiverTs">\src\batchingReceiver.ts</a></td>
	<td>8</td>
	<td>2</td>
</tr>
<tr>
	<td><a href="#cCodeAzureSdkForJsSdkEventhubEventHubsSrcManagementClientTs">\src\managementClient.ts</a></td>
	<td>8</td>
	<td>0</td>
</tr>
		</tbody></table>
	</div>
</div>

		</div>
		<div id="details">
			<h2 class="page-header">Details</h2>
			<fieldset class="filters">
				<legend>Filters:</legend>
				<label>
					<input type="radio" name="filters" value="lint-result" checked>
					<span class="btn-radio">All</span>
				</label>
				<label>
					<input type="radio" name="filters" value="warning">
					<span class="btn-radio text-warning">Warnings</span>
				</label>
				<label>
					<input type="radio" name="filters" value="error">
					<span class="btn-radio text-error">Errors</span>
				</label>
			</fieldset>
			<table id="fileOverview">
				<tbody>
					<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcBatchingReceiverTs" class="lint-result bg-error" data-group="f-0" data-problem-count="10" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\batchingReceiver.ts
    </th>
    <th class="result-summary">
      10 problems (8 errors, 2 warnings)
    </th>
</tr>
<tr class="f-0 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-0"
								data-content="detailSummary-0"
								aria-controls="detailSummary-0"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-0"
								data-content="sourceCode-0"
								aria-controls="sourceCode-0"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-0">
				<div class="row"><div class="column">
	<h3 class="text-error">Top errors</h3>
	<table class="summary-table"><thead>
		<tr>
			<th>rule</th>
			<th>count</th>
		</tr>
	</thead><tbody>
		<tr>
	<td><a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a></td>
	<td>6</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/no-useless-constructor" target="_blank">no-useless-constructor</a></td>
	<td>1</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a></td>
	<td>1</td>
</tr>
	</tbody></table>
</div>
<div class="column">
	<h3 class="text-warning">Top warnings</h3>
	<table class="summary-table"><thead>
		<tr>
			<th>rule</th>
			<th>count</th>
		</tr>
	</thead><tbody>
		<tr>
	<td><a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a></td>
	<td>2</td>
</tr>
	</tbody></table>
</div>
</div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 27, Column 3: "Useless constructor."
		<a href="http://eslint.org/docs/rules/no-useless-constructor" target="_blank">no-useless-constructor</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 46, Column 30: "Expected '===' and instead saw '=='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 53, Column 11: "'onReceiveMessage' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 54, Column 11: "'onReceiveError' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 56, Column 11: "'onSessionError' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 61, Column 27: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 83, Column 7: "'actionAfterWaitTimeout' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 133, Column 7: "'onReceiveClose' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 144, Column 7: "'onSessionClose' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 178, Column 36: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-0">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import { ReceiverEvents, EventContext, OnAmqpEvent, SessionEvents } from "rhea-promise";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>import { translate, Func, Constants, MessagingError } from "@azure/amqp-common";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>import { EventData } from "./eventData";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>import { ReceiveOptions } from "./eventHubClient";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code>import { EventHubReceiver } from "./eventHubReceiver";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>import { ConnectionContext } from "./connectionContext";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code>import * as log from "./log";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code> * Describes the batching receiver where the user can receive a specified number of messages for a predefined time.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code> * @class BatchingReceiver</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code> * @extends EventHubReceiver</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code> * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code>export class BatchingReceiver extends EventHubReceiver {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>   * Instantiate a new receiver from the AMQP `Receiver`. Used by `EventHubClient`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>   * @constructor</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code>   * @param {ConnectionContext} context                        The connection context.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code>   * @param {string} partitionId                               Partition ID from which to receive.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code>   * @param {ReceiveOptions} [options]                         Options for how you'd like to connect.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 27, Column 3: "Useless constructor."
		<a href="http://eslint.org/docs/rules/no-useless-constructor" target="_blank">no-useless-constructor</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">27</td>
	<td class="source"><code>  constructor(context: ConnectionContext, partitionId: string | number, options?: ReceiveOptions) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code>    super(context, partitionId, options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code>   * Receive a batch of EventData objects from an EventHub partition for a given count and</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code>   * a given max wait time in seconds, whichever happens first. This method can be used directly</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>   * after creating the receiver object.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code>   * @param {number} maxMessageCount The maximum message count. Must be a value greater than 0.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>   * @param {number} [maxWaitTimeInSeconds] The maximum wait time in seconds for which the Receiver</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code>   * should wait to receiver the said amount of messages. If not provided, it defaults to 60 seconds.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code>   * @returns {Promise&#60;EventData[]&#62;} A promise that resolves with an array of EventData objects.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code>  receive(maxMessageCount: number, maxWaitTimeInSeconds?: number): Promise&#60;EventData[]&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code>    if (!maxMessageCount || (maxMessageCount && typeof maxMessageCount !== "number")) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>      throw new Error("'maxMessageCount' is a required parameter of type number with a value greater than 0.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 46, Column 30: "Expected '===' and instead saw '=='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">46</td>
	<td class="source"><code>    if (maxWaitTimeInSeconds == undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>      maxWaitTimeInSeconds = Constants.defaultOperationTimeoutInSeconds;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code>    const eventDatas: EventData[] = [];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>    let timeOver = false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code>    return new Promise&#60;EventData[]&#62;((resolve, reject) =&#62; {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 53, Column 11: "'onReceiveMessage' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">53</td>
	<td class="source"><code>      let onReceiveMessage: OnAmqpEvent;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 54, Column 11: "'onReceiveError' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">54</td>
	<td class="source"><code>      let onReceiveError: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>      let onReceiveClose: OnAmqpEvent;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 56, Column 11: "'onSessionError' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">56</td>
	<td class="source"><code>      let onSessionError: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>      let onSessionClose: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>      let waitTimer: any;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>      let actionAfterWaitTimeout: Func&#60;void, void&#62;;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>      // Final action to be performed after maxMessageCount is reached or the maxWaitTime is over.</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 61, Column 27: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">61</td>
	<td class="source"><code>      const finalAction = (timeOver: boolean, data?: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>        // Resetting the mode. Now anyone can call start() or receive() again.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code>        if (this._receiver) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">64</td>
	<td class="source"><code>          this._receiver.removeListener(ReceiverEvents.receiverError, onReceiveError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code>          this._receiver.removeListener(ReceiverEvents.message, onReceiveMessage);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>        if (!data) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>          data = eventDatas.length ? eventDatas[eventDatas.length - 1] : undefined;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code>        if (!timeOver) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code>          clearTimeout(waitTimer);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code>        if (this.receiverRuntimeMetricEnabled && data) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code>          this.runtimeInfo.lastSequenceNumber = data.lastSequenceNumber;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>          this.runtimeInfo.lastEnqueuedTimeUtc = data.lastEnqueuedTime;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code>          this.runtimeInfo.lastEnqueuedOffset = data.lastEnqueuedOffset;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code>          this.runtimeInfo.retrievalTime = data.retrievalTime;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code>        resolve(eventDatas);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code>      // Action to be performed after the max wait time is over.</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 83, Column 7: "'actionAfterWaitTimeout' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">83</td>
	<td class="source"><code>      actionAfterWaitTimeout = () =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code>        timeOver = true;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>        log.batching(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>          "[%s] Batching Receiver '%s', %d messages received when max wait time in seconds %d is over.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>          eventDatas.length,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>          maxWaitTimeInSeconds</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>        return finalAction(timeOver);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>      // Action to be performed on the "message" event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>      onReceiveMessage = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code>        const data: EventData = EventData.fromAmqpMessage(context.message!);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>        data.body = this._context.dataTransformer.decode(context.message!.body);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code>        if (eventDatas.length &#60;= maxMessageCount) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>          eventDatas.push(data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code>        if (eventDatas.length === maxMessageCount) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code>          log.batching(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>            "[%s] Batching Receiver '%s', %d messages received within %d seconds.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>            eventDatas.length,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>            maxWaitTimeInSeconds</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">110</td>
	<td class="source"><code>          finalAction(timeOver, data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">113</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code>      // Action to be taken when an error is received.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>      onReceiveError = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code>        const receiver = this._receiver || context.receiver!;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">117</td>
	<td class="source"><code>        receiver.removeListener(ReceiverEvents.receiverError, onReceiveError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>        receiver.removeListener(ReceiverEvents.message, onReceiveMessage);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>        receiver.session.removeListener(SessionEvents.sessionError, onSessionError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>        const receiverError = context.receiver && context.receiver.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>        let error = new MessagingError("An error occuured while receiving messages.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code>        if (receiverError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>          error = translate(receiverError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code>          log.error("[%s] Receiver '%s' received an error:\n%O", this._context.connectionId, this.name, error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code>        if (waitTimer) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>          clearTimeout(waitTimer);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">130</td>
	<td class="source"><code>        reject(error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 133, Column 7: "'onReceiveClose' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">133</td>
	<td class="source"><code>      onReceiveClose = async (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>        const receiverError = context.receiver && context.receiver.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code>        if (receiverError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code>            "[%s] 'receiver_close' event occurred. The associated error is: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code>            receiverError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">142</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">143</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 144, Column 7: "'onSessionClose' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">144</td>
	<td class="source"><code>      onSessionClose = async (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">145</td>
	<td class="source"><code>        const sessionError = context.session && context.session.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">146</td>
	<td class="source"><code>        if (sessionError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">147</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">148</td>
	<td class="source"><code>            "[%s] 'session_close' event occurred for receiver '%s'. The associated error is: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">149</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">150</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">151</td>
	<td class="source"><code>            sessionError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">152</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">153</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">154</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">155</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">156</td>
	<td class="source"><code>      onSessionError = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">157</td>
	<td class="source"><code>        const receiver = this._receiver || context.receiver!;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">158</td>
	<td class="source"><code>        receiver.removeListener(ReceiverEvents.receiverError, onReceiveError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">159</td>
	<td class="source"><code>        receiver.removeListener(ReceiverEvents.message, onReceiveMessage);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">160</td>
	<td class="source"><code>        receiver.session.removeListener(SessionEvents.sessionError, onReceiveError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">161</td>
	<td class="source"><code>        const sessionError = context.session && context.session.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">162</td>
	<td class="source"><code>        let error = new MessagingError("An error occuured while receiving messages.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">163</td>
	<td class="source"><code>        if (sessionError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">164</td>
	<td class="source"><code>          error = translate(sessionError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">165</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">166</td>
	<td class="source"><code>            "[%s] 'session_close' event occurred for Receiver '%s' received an error:\n%O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">167</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">168</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">169</td>
	<td class="source"><code>            error</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">170</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">171</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">172</td>
	<td class="source"><code>        if (waitTimer) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">173</td>
	<td class="source"><code>          clearTimeout(waitTimer);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">174</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">175</td>
	<td class="source"><code>        reject(error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">176</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">177</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 178, Column 36: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">178</td>
	<td class="source"><code>      const addCreditAndSetTimer = (reuse?: boolean) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">179</td>
	<td class="source"><code>        log.batching(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">180</td>
	<td class="source"><code>          "[%s] Receiver '%s', adding credit for receiving %d messages.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">181</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">182</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">183</td>
	<td class="source"><code>          maxMessageCount</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">184</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">185</td>
	<td class="source"><code>        this._receiver!.addCredit(maxMessageCount);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">186</td>
	<td class="source"><code>        let msg: string = "[%s] Setting the wait timer for %d seconds for receiver '%s'.";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">187</td>
	<td class="source"><code>        if (reuse) msg += " Receiver link already present, hence reusing it.";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">188</td>
	<td class="source"><code>        log.batching(msg, this._context.connectionId, maxWaitTimeInSeconds, this.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">189</td>
	<td class="source"><code>        waitTimer = setTimeout(actionAfterWaitTimeout, (maxWaitTimeInSeconds as number) * 1000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">190</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">191</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">192</td>
	<td class="source"><code>      if (!this.isOpen()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">193</td>
	<td class="source"><code>        log.batching("[%s] Receiver '%s', setting the prefetch count to 0.", this._context.connectionId, this.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">194</td>
	<td class="source"><code>        this.prefetchCount = 0;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">195</td>
	<td class="source"><code>        const rcvrOptions = this._createReceiverOptions({</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">196</td>
	<td class="source"><code>          onMessage: onReceiveMessage,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">197</td>
	<td class="source"><code>          onError: onReceiveError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">198</td>
	<td class="source"><code>          onClose: onReceiveClose,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">199</td>
	<td class="source"><code>          onSessionError: onSessionError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">200</td>
	<td class="source"><code>          onSessionClose: onSessionClose</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">201</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">202</td>
	<td class="source"><code>        this._init(rcvrOptions)</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">203</td>
	<td class="source"><code>          .then(() =&#62; addCreditAndSetTimer())</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">204</td>
	<td class="source"><code>          .catch(reject);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">205</td>
	<td class="source"><code>      } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">206</td>
	<td class="source"><code>        addCreditAndSetTimer(true);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">207</td>
	<td class="source"><code>        this._receiver!.on(ReceiverEvents.message, onReceiveMessage);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">208</td>
	<td class="source"><code>        this._receiver!.on(ReceiverEvents.receiverError, onReceiveError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">209</td>
	<td class="source"><code>        this._receiver!.session.on(SessionEvents.sessionError, onReceiveError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">210</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">211</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">212</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">213</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">214</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">215</td>
	<td class="source"><code>   * Creates a batching receiver.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">216</td>
	<td class="source"><code>   * @static</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">217</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">218</td>
	<td class="source"><code>   * @param {ConnectionContext} context    The connection context.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">219</td>
	<td class="source"><code>   * @param {string | number} partitionId  The partitionId to receive events from.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">220</td>
	<td class="source"><code>   * @param {ReceiveOptions} [options]     Receive options.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">221</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">222</td>
	<td class="source"><code>  static create(context: ConnectionContext, partitionId: string | number, options?: ReceiveOptions): BatchingReceiver {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">223</td>
	<td class="source"><code>    const bReceiver = new BatchingReceiver(context, partitionId, options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">224</td>
	<td class="source"><code>    context.receivers[bReceiver.name] = bReceiver;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">225</td>
	<td class="source"><code>    return bReceiver;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">226</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">227</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">228</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcConnectionContextTs" class="lint-result bg-warning" data-group="f-1" data-problem-count="1" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\connectionContext.ts
    </th>
    <th class="result-summary">
      1 problem (0 errors, 1 warning)
    </th>
</tr>
<tr class="f-1 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-1"
								data-content="detailSummary-1"
								aria-controls="detailSummary-1"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-1"
								data-content="sourceCode-1"
								aria-controls="sourceCode-1"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-1">
				<div class="row"></div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 104, Column 44: "'context' is defined but never used."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/no-unused-vars" target="_blank">@typescript-eslint/no-unused-vars</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-1">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import * as log from "./log";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>import os from "os";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>import { packageJsonInfo } from "./util/constants";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>import { EventHubReceiver } from "./eventHubReceiver";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code>import { EventHubSender } from "./eventHubSender";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>import {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code>  Constants,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code>  delay,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code>  ConnectionContextBase,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code>  CreateConnectionContextBaseParameters,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>  EventHubConnectionConfig</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code>} from "@azure/amqp-common";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code>import { ManagementClient, ManagementClientOptions } from "./managementClient";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code>import { ClientOptions } from "./eventHubClient";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code>import { Dictionary, OnAmqpEvent, EventContext, ConnectionEvents } from "rhea-promise";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code> * @interface ConnectionContext</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code> * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code> * Provides contextual information like the underlying amqp connection, cbs session, management session,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code> * tokenProvider, senders, receivers, etc. about the EventHub client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code>export interface ConnectionContext extends ConnectionContextBase {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code>   * @property {EventHubConnectionConfig} config The EventHub connection config that is created after</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>   * parsing the connection string.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code>  readonly config: EventHubConnectionConfig;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code>   * @property {boolean} wasConnectionCloseCalled Indicates whether the close() method was</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>   * called on theconnection object.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code>  wasConnectionCloseCalled: boolean;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code>   * @property {Dictionary&#60;EventHubReceiver&#62;} receivers A dictionary of the EventHub Receivers associated with this client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code>  receivers: Dictionary&#60;EventHubReceiver&#62;;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code>   * @property {Dictionary&#60;EventHubSender&#62;} senders A dictionary of the EventHub Senders associated with this client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code>  senders: Dictionary&#60;EventHubSender&#62;;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code>   * @property {ManagementClient} managementSession A reference to the management session ($management endpoint) on</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>   * the underlying amqp connection for the EventHub Client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>  managementSession?: ManagementClient;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code>export interface ConnectionContextOptions extends ClientOptions {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code>  managementSessionAddress?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">54</td>
	<td class="source"><code>  managementSessionAudience?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>export namespace ConnectionContext {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>   * @property {string} userAgent The user agent string for the EventHubs client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>   * See guideline at https://github.com/Azure/azure-sdk/blob/master/docs/design/Telemetry.mdk</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>  const userAgent: string = `azsdk-js-azureeventhubs/${packageJsonInfo.version} (NODE-VERSION ${</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code>    process.version</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">64</td>
	<td class="source"><code>  }; ${os.type()} ${os.release()})`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>  export function getUserAgent(options: ConnectionContextOptions): string {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>    const finalUserAgent = options.userAgent ? `${userAgent},${options.userAgent}` : userAgent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>    if (finalUserAgent.length &#62; Constants.maxUserAgentLength) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code>      throw new Error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code>        `The user-agent string cannot be more than ${Constants.maxUserAgentLength} characters in length.` +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code>          `The given user-agent string is: ${finalUserAgent} with length: ${finalUserAgent.length}`</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code>    return finalUserAgent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code>  export function create(config: EventHubConnectionConfig, options?: ConnectionContextOptions): ConnectionContext {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code>    if (!options) options = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code>    const parameters: CreateConnectionContextBaseParameters = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code>      config: config,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code>      tokenProvider: options.tokenProvider,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code>      dataTransformer: options.dataTransformer,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code>      isEntityPathRequired: true,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>      connectionProperties: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>        product: "MSJSClient",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>        userAgent: getUserAgent(options),</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>        version: packageJsonInfo.version</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>    // Let us create the base context and then add EventHub specific ConnectionContext properties.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>    const connectionContext = ConnectionContextBase.create(parameters) as ConnectionContext;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>    connectionContext.wasConnectionCloseCalled = false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code>    connectionContext.senders = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>    connectionContext.receivers = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>    const mOptions: ManagementClientOptions = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code>      address: options.managementSessionAddress,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>      audience: options.managementSessionAudience</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>    connectionContext.managementSession = new ManagementClient(connectionContext, mOptions);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code>    // Define listeners to be added to the connection object for</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code>    // "connection_open" and "connection_error" events.</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 104, Column 44: "'context' is defined but never used."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/no-unused-vars" target="_blank">@typescript-eslint/no-unused-vars</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">104</td>
	<td class="source"><code>    const onConnectionOpen: OnAmqpEvent = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>      connectionContext.wasConnectionCloseCalled = false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>      log.context(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>        "[%s] setting 'wasConnectionCloseCalled' property of connection context to %s.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>        connectionContext.connection.id,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code>        connectionContext.wasConnectionCloseCalled</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">110</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">113</td>
	<td class="source"><code>    const disconnected: OnAmqpEvent = async (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code>      const connectionError = context.connection && context.connection.error ? context.connection.error : undefined;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>      if (connectionError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">117</td>
	<td class="source"><code>          "[%s] Error (context.connection.error) occurred on the amqp connection: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>          connectionContext.connection.id,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>          connectionError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>      const contextError = context.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code>      if (contextError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code>          "[%s] Error (context.error) occurred on the amqp connection: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>          connectionContext.connection.id,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code>          contextError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">130</td>
	<td class="source"><code>      const state: Readonly&#60;{</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code>        wasConnectionCloseCalled: boolean;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code>        numSenders: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">133</td>
	<td class="source"><code>        numReceivers: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>      }&#62; = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code>        wasConnectionCloseCalled: connectionContext.wasConnectionCloseCalled,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code>        numSenders: Object.keys(connectionContext.senders).length,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code>        numReceivers: Object.keys(connectionContext.receivers).length</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>      // Clear internal map maintained by rhea to avoid reconnecting of old links once the</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code>      // connection is back up.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">142</td>
	<td class="source"><code>      connectionContext.connection.removeAllSessions();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">143</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">144</td>
	<td class="source"><code>      // Close the cbs session to ensure all the event handlers are released.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">145</td>
	<td class="source"><code>      await connectionContext.cbsSession.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">146</td>
	<td class="source"><code>      // Close the management session to ensure all the event handlers are released.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">147</td>
	<td class="source"><code>      await connectionContext.managementSession!.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">148</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">149</td>
	<td class="source"><code>      // The connection should always be brought back up if the sdk did not call connection.close()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">150</td>
	<td class="source"><code>      // and there was atleast one sender/receiver link on the connection before it went down.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">151</td>
	<td class="source"><code>      log.error("[%s] state: %O", connectionContext.connection.id, state);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">152</td>
	<td class="source"><code>      if (!state.wasConnectionCloseCalled && (state.numSenders || state.numReceivers)) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">153</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">154</td>
	<td class="source"><code>          "[%s] connection.close() was not called from the sdk and there were some " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">155</td>
	<td class="source"><code>            "sender or receiver links or both. We should reconnect.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">156</td>
	<td class="source"><code>          connectionContext.connection.id</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">157</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">158</td>
	<td class="source"><code>        await delay(Constants.connectionReconnectDelay);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">159</td>
	<td class="source"><code>        // reconnect senders if any</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">160</td>
	<td class="source"><code>        for (const senderName of Object.keys(connectionContext.senders)) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">161</td>
	<td class="source"><code>          const sender = connectionContext.senders[senderName];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">162</td>
	<td class="source"><code>          if (!sender.isConnecting) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">163</td>
	<td class="source"><code>            log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">164</td>
	<td class="source"><code>              "[%s] calling detached on sender '%s' with address '%s'.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">165</td>
	<td class="source"><code>              connectionContext.connection.id,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">166</td>
	<td class="source"><code>              sender.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">167</td>
	<td class="source"><code>              sender.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">168</td>
	<td class="source"><code>            );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">169</td>
	<td class="source"><code>            sender.detached(connectionError || contextError).catch(err =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">170</td>
	<td class="source"><code>              log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">171</td>
	<td class="source"><code>                "[%s] An error occurred while reconnecting the sender '%s' with adress '%s' %O.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">172</td>
	<td class="source"><code>                connectionContext.connection.id,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">173</td>
	<td class="source"><code>                sender.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">174</td>
	<td class="source"><code>                sender.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">175</td>
	<td class="source"><code>                err</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">176</td>
	<td class="source"><code>              );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">177</td>
	<td class="source"><code>            });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">178</td>
	<td class="source"><code>          } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">179</td>
	<td class="source"><code>            log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">180</td>
	<td class="source"><code>              "[%s] sender '%s' with address '%s' is already reconnecting. Hence not " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">181</td>
	<td class="source"><code>                "calling detached on the sender.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">182</td>
	<td class="source"><code>              connectionContext.connection.id,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">183</td>
	<td class="source"><code>              sender.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">184</td>
	<td class="source"><code>              sender.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">185</td>
	<td class="source"><code>            );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">186</td>
	<td class="source"><code>          }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">187</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">188</td>
	<td class="source"><code>        // reconnect receivers if any</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">189</td>
	<td class="source"><code>        for (const receiverName of Object.keys(connectionContext.receivers)) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">190</td>
	<td class="source"><code>          const receiver = connectionContext.receivers[receiverName];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">191</td>
	<td class="source"><code>          if (!receiver.isConnecting) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">192</td>
	<td class="source"><code>            log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">193</td>
	<td class="source"><code>              "[%s] calling detached on receiver '%s' with address '%s'.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">194</td>
	<td class="source"><code>              connectionContext.connection.id,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">195</td>
	<td class="source"><code>              receiver.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">196</td>
	<td class="source"><code>              receiver.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">197</td>
	<td class="source"><code>            );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">198</td>
	<td class="source"><code>            receiver.detached(connectionError || contextError).catch(err =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">199</td>
	<td class="source"><code>              log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">200</td>
	<td class="source"><code>                "[%s] An error occurred while reconnecting the receiver '%s' with adress '%s' %O.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">201</td>
	<td class="source"><code>                connectionContext.connection.id,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">202</td>
	<td class="source"><code>                receiver.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">203</td>
	<td class="source"><code>                receiver.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">204</td>
	<td class="source"><code>                err</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">205</td>
	<td class="source"><code>              );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">206</td>
	<td class="source"><code>            });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">207</td>
	<td class="source"><code>          } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">208</td>
	<td class="source"><code>            log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">209</td>
	<td class="source"><code>              "[%s] receiver '%s' with address '%s' is already reconnecting. Hence not " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">210</td>
	<td class="source"><code>                "calling detached on the receiver.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">211</td>
	<td class="source"><code>              connectionContext.connection.id,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">212</td>
	<td class="source"><code>              receiver.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">213</td>
	<td class="source"><code>              receiver.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">214</td>
	<td class="source"><code>            );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">215</td>
	<td class="source"><code>          }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">216</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">217</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">218</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">219</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">220</td>
	<td class="source"><code>    // Add listeners on the connection object.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">221</td>
	<td class="source"><code>    connectionContext.connection.on(ConnectionEvents.connectionOpen, onConnectionOpen);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">222</td>
	<td class="source"><code>    connectionContext.connection.on(ConnectionEvents.disconnected, disconnected);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">223</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">224</td>
	<td class="source"><code>    log.context("[%s] Created connection context successfully.", connectionContext.connectionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">225</td>
	<td class="source"><code>    return connectionContext;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">226</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">227</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">228</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcEventDataTs" class="lint-result bg-error" data-group="f-2" data-problem-count="14" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\eventData.ts
    </th>
    <th class="result-summary">
      14 problems (14 errors, 0 warnings)
    </th>
</tr>
<tr class="f-2 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-2"
								data-content="detailSummary-2"
								aria-controls="detailSummary-2"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-2"
								data-content="sourceCode-2"
								aria-controls="sourceCode-2"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-2">
				<div class="row"><div class="column">
	<h3 class="text-error">Top errors</h3>
	<table class="summary-table"><thead>
		<tr>
			<th>rule</th>
			<th>count</th>
		</tr>
	</thead><tbody>
		<tr>
	<td><a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a></td>
	<td>14</td>
</tr>
	</tbody></table>
</div>
</div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 150, Column 59: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 153, Column 61: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 156, Column 59: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 159, Column 53: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 165, Column 30: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 174, Column 30: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 217, Column 27: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 224, Column 29: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 227, Column 30: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 230, Column 21: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 233, Column 33: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 236, Column 33: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 239, Column 31: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 242, Column 28: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-2">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>  Message,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>  MessageProperties,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>  MessageHeader,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code>  Dictionary,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>  messageHeader,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code>  messageProperties,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code>  MessageAnnotations,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code>  DeliveryAnnotations</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code>} from "rhea-promise";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>import { Constants } from "@azure/amqp-common";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code> * Describes the delivery annotations.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code> * @interface EventHubDeliveryAnnotations</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>export interface EventHubDeliveryAnnotations extends DeliveryAnnotations {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>   * @property {string} [last_enqueued_offset] The offset of the last event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code>  last_enqueued_offset?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code>   * @property {number} [last_enqueued_sequence_number] The sequence number of the last event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code>  last_enqueued_sequence_number?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code>   * @property {number} [last_enqueued_time_utc] The enqueued time of the last event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code>  last_enqueued_time_utc?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>   * @property {number} [runtime_info_retrieval_time_utc] The retrieval time of the last event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code>  runtime_info_retrieval_time_utc?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code>   * @property {string} Any unknown delivery annotations.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code>  [x: string]: any;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code> * Map containing message attributes that will be held in the message header.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code> * @interface EventHubMessageAnnotations</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>export interface EventHubMessageAnnotations extends MessageAnnotations {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>   * @property {string | null} [x-opt-partition-key] Annotation for the partition key set for the event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>  "x-opt-partition-key"?: string | null;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code>   * @property {number} [x-opt-sequence-number] Annontation for the sequence number of the event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">54</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>  "x-opt-sequence-number"?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>   * @property {number} [x-opt-enqueued-time] Annotation for the enqueued time of the event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>  "x-opt-enqueued-time"?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>   * @property {string} [x-opt-offset] Annotation for the offset of the event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code>  "x-opt-offset"?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">64</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code>   * @property {any} Any other annotation that can be added to the message.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>  [x: string]: any;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code> * Describes the structure of an event to be sent or received from the EventHub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code> * @interface EventData</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code>export interface EventData {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code>   * @property {MessageHeader} [header] - The message headers.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code>  header?: MessageHeader;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code>   * @property {any} body - The message body that needs to be sent or is received.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code>  body: any;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code>   * @property {Date} [enqueuedTimeUtc] The enqueued time of the event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>  enqueuedTimeUtc?: Date;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>   * @property {string | null} [partitionKey] If specified EventHub will hash this to a partitionId.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>   * It guarantees that messages end up in a specific partition on the event hub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>  partitionKey?: string | null;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>   * @property {string} [offset] The offset of the event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>  offset?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code>   * @property {number} [sequenceNumber] The sequence number of the event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code>  sequenceNumber?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>   * @property {AmqpMessageAnnotations} [annotations] The amqp message attributes.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code>  annotations?: EventHubMessageAnnotations;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>   * @property {AmqpMessageProperties} [properties] The predefined AMQP properties like message_id, correlation_id, reply_to, etc.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>  properties?: MessageProperties;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code>   * @property {Dictionary&#60;any&#62;} [applicationProperties] The application specific properties.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">110</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code>  applicationProperties?: Dictionary&#60;any&#62;;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">113</td>
	<td class="source"><code>   * @property {number} [lastSequenceNumber] The last sequence number of the event within the partition stream of the Event Hub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>  lastSequenceNumber?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">117</td>
	<td class="source"><code>   * @property {string} [lastEnqueuedOffset] The offset of the last enqueued event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>  lastEnqueuedOffset?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>   * @property {Date} [lastEnqueuedTime] The enqueued UTC time of the last event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code>  lastEnqueuedTime?: Date;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code>   * @property {Date} [retrievalTime] The time when the runtime info was retrieved</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code>  retrievalTime?: Date;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code>   * @property {AmqpMessage} _raw_amqp_mesage The underlying raw amqp message.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">130</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code>  _raw_amqp_mesage?: Message;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">133</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code> * Describes the methods on the EventData interface.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code> * @module EventData</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code>export namespace EventData {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>   * Converts the AMQP message to an EventData.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code>   * @param {AmqpMessage} msg The AMQP message that needs to be converted to EventData.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">142</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">143</td>
	<td class="source"><code>  export function fromAmqpMessage(msg: Message): EventData {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">144</td>
	<td class="source"><code>    const data: EventData = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">145</td>
	<td class="source"><code>      body: msg.body,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">146</td>
	<td class="source"><code>      _raw_amqp_mesage: msg</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">147</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">148</td>
	<td class="source"><code>    if (msg.message_annotations) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">149</td>
	<td class="source"><code>      data.annotations = msg.message_annotations;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 150, Column 59: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">150</td>
	<td class="source"><code>      if (msg.message_annotations[Constants.partitionKey] != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">151</td>
	<td class="source"><code>        data.partitionKey = msg.message_annotations[Constants.partitionKey];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">152</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 153, Column 61: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">153</td>
	<td class="source"><code>      if (msg.message_annotations[Constants.sequenceNumber] != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">154</td>
	<td class="source"><code>        data.sequenceNumber = msg.message_annotations[Constants.sequenceNumber];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">155</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 156, Column 59: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">156</td>
	<td class="source"><code>      if (msg.message_annotations[Constants.enqueuedTime] != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">157</td>
	<td class="source"><code>        data.enqueuedTimeUtc = new Date(msg.message_annotations[Constants.enqueuedTime] as number);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">158</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 159, Column 53: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">159</td>
	<td class="source"><code>      if (msg.message_annotations[Constants.offset] != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">160</td>
	<td class="source"><code>        data.offset = msg.message_annotations[Constants.offset];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">161</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">162</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">163</td>
	<td class="source"><code>    // Since rhea expects message properties as top level properties we will look for them and unflatten them inside properties.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">164</td>
	<td class="source"><code>    for (const prop of messageProperties) {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 165, Column 30: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">165</td>
	<td class="source"><code>      if ((msg as any)[prop] != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">166</td>
	<td class="source"><code>        if (!data.properties) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">167</td>
	<td class="source"><code>          data.properties = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">168</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">169</td>
	<td class="source"><code>        (data.properties as any)[prop] = (msg as any)[prop];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">170</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">171</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">172</td>
	<td class="source"><code>    // Since rhea expects message headers as top level properties we will look for them and unflatten them inside header.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">173</td>
	<td class="source"><code>    for (const prop of messageHeader) {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 174, Column 30: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">174</td>
	<td class="source"><code>      if ((msg as any)[prop] != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">175</td>
	<td class="source"><code>        if (!data.header) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">176</td>
	<td class="source"><code>          data.header = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">177</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">178</td>
	<td class="source"><code>        (data.header as any)[prop] = (msg as any)[prop];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">179</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">180</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">181</td>
	<td class="source"><code>    if (msg.application_properties) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">182</td>
	<td class="source"><code>      data.applicationProperties = msg.application_properties;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">183</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">184</td>
	<td class="source"><code>    if (msg.delivery_annotations) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">185</td>
	<td class="source"><code>      data.lastEnqueuedOffset = msg.delivery_annotations.last_enqueued_offset;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">186</td>
	<td class="source"><code>      data.lastSequenceNumber = msg.delivery_annotations.last_enqueued_sequence_number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">187</td>
	<td class="source"><code>      data.lastEnqueuedTime = new Date(msg.delivery_annotations.last_enqueued_time_utc as number);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">188</td>
	<td class="source"><code>      data.retrievalTime = new Date(msg.delivery_annotations.runtime_info_retrieval_time_utc as number);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">189</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">190</td>
	<td class="source"><code>    return data;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">191</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">192</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">193</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">194</td>
	<td class="source"><code>   * Converts an EventData object to an AMQP message.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">195</td>
	<td class="source"><code>   * @param {EventData} data The EventData object that needs to be converted to an AMQP message.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">196</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">197</td>
	<td class="source"><code>  export function toAmqpMessage(data: EventData): Message {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">198</td>
	<td class="source"><code>    const msg: Message = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">199</td>
	<td class="source"><code>      body: data.body</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">200</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">201</td>
	<td class="source"><code>    // As per the AMQP 1.0 spec If the message-annotations or delivery-annotations section is omitted,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">202</td>
	<td class="source"><code>    // it is equivalent to a message-annotations section containing anempty map of annotations.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">203</td>
	<td class="source"><code>    msg.message_annotations = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">204</td>
	<td class="source"><code>    msg.delivery_annotations = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">205</td>
	<td class="source"><code>    if (data.annotations) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">206</td>
	<td class="source"><code>      msg.message_annotations = data.annotations;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">207</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">208</td>
	<td class="source"><code>    if (data.properties) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">209</td>
	<td class="source"><code>      // Set amqp message properties as top level properties, since rhea sends them as top level properties.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">210</td>
	<td class="source"><code>      for (const prop in data.properties) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">211</td>
	<td class="source"><code>        (msg as any)[prop] = (data.properties as any)[prop];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">212</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">213</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">214</td>
	<td class="source"><code>    if (data.applicationProperties) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">215</td>
	<td class="source"><code>      msg.application_properties = data.applicationProperties;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">216</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 217, Column 27: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">217</td>
	<td class="source"><code>    if (data.partitionKey != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">218</td>
	<td class="source"><code>      msg.message_annotations[Constants.partitionKey] = data.partitionKey;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">219</td>
	<td class="source"><code>      // Event Hub service cannot route messages to a specific partition based on the partition key</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">220</td>
	<td class="source"><code>      // if AMQP message header is an empty object. Hence we make sure that header is always present</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">221</td>
	<td class="source"><code>      // with atleast one property. Setting durable to true, helps us achieve that.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">222</td>
	<td class="source"><code>      msg.durable = true;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">223</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 224, Column 29: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">224</td>
	<td class="source"><code>    if (data.sequenceNumber != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">225</td>
	<td class="source"><code>      msg.message_annotations[Constants.sequenceNumber] = data.sequenceNumber;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">226</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 227, Column 30: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">227</td>
	<td class="source"><code>    if (data.enqueuedTimeUtc != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">228</td>
	<td class="source"><code>      msg.message_annotations[Constants.enqueuedTime] = data.enqueuedTimeUtc.getTime();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">229</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 230, Column 21: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">230</td>
	<td class="source"><code>    if (data.offset != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">231</td>
	<td class="source"><code>      msg.message_annotations[Constants.offset] = data.offset;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">232</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 233, Column 33: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">233</td>
	<td class="source"><code>    if (data.lastEnqueuedOffset != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">234</td>
	<td class="source"><code>      msg.delivery_annotations.last_enqueued_offset = data.lastEnqueuedOffset;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">235</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 236, Column 33: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">236</td>
	<td class="source"><code>    if (data.lastSequenceNumber != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">237</td>
	<td class="source"><code>      msg.delivery_annotations.last_enqueued_sequence_number = data.lastSequenceNumber;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">238</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 239, Column 31: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">239</td>
	<td class="source"><code>    if (data.lastEnqueuedTime != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">240</td>
	<td class="source"><code>      msg.delivery_annotations.last_enqueued_time_utc = data.lastEnqueuedTime.getTime();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">241</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 242, Column 28: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">242</td>
	<td class="source"><code>    if (data.retrievalTime != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">243</td>
	<td class="source"><code>      msg.delivery_annotations.runtime_info_retrieval_time_utc = data.retrievalTime.getTime();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">244</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">245</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">246</td>
	<td class="source"><code>    if (data.header) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">247</td>
	<td class="source"><code>      // Set amqp message header as top level properties, since rhea expects them as top level properties.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">248</td>
	<td class="source"><code>      for (const prop in data.header) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">249</td>
	<td class="source"><code>        (msg as any)[prop] = (data.header as any)[prop];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">250</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">251</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">252</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">253</td>
	<td class="source"><code>    return msg;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">254</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">255</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">256</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcEventHubClientTs" class="lint-result bg-error" data-group="f-3" data-problem-count="2" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\eventHubClient.ts
    </th>
    <th class="result-summary">
      2 problems (2 errors, 0 warnings)
    </th>
</tr>
<tr class="f-3 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-3"
								data-content="detailSummary-3"
								aria-controls="detailSummary-3"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-3"
								data-content="sourceCode-3"
								aria-controls="sourceCode-3"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-3">
				<div class="row"></div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 170, Column 7: "Do not assign to the exception parameter."
		<a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 299, Column 36: "Array type using 'Array<string>' is forbidden. Use 'string[]' instead."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/array-type" target="_blank">@typescript-eslint/array-type</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-3">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import * as log from "./log";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>import { Delivery, WebSocketImpl } from "rhea-promise";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>import {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>  ApplicationTokenCredentials,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code>  DeviceTokenCredentials,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>  UserTokenCredentials,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code>  MSITokenCredentials</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code>} from "@azure/ms-rest-nodeauth";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code>import {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code>  MessagingError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>  DataTransformer,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code>  TokenProvider,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code>  EventHubConnectionConfig,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code>  AadTokenProvider</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code>} from "@azure/amqp-common";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code>import { OnMessage, OnError } from "./eventHubReceiver";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>import { EventData } from "./eventData";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>import { ConnectionContext } from "./connectionContext";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>import { EventHubPartitionRuntimeInformation, EventHubRuntimeInformation } from "./managementClient";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code>import { EventPosition } from "./eventPosition";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code>import { EventHubSender } from "./eventHubSender";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code>import { StreamingReceiver, ReceiveHandler } from "./streamingReceiver";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code>import { BatchingReceiver } from "./batchingReceiver";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code>import { IotHubClient } from "./iothub/iothubClient";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code> * Describes the options that one can set while receiving messages.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code> * @interface ReceiveOptions</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code>export interface ReceiveOptions {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>   * @property {string} [name] The name of the receiver. If not provided then we will set a GUID by default.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>  name?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code>   * @property {object} [eventPosition] The starting event position at which to start receiving messages.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code>   * This is used to filter messages for the EventHub Receiver.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code>  eventPosition?: EventPosition;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code>   * @property {string} [consumerGroup] The consumer group to which the receiver wants to connect to.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code>   * If not provided then it will be connected to "$default" consumer group.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>  consumerGroup?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>   * @property {number} [prefetchCount] The upper limit of events this receiver will actively receive</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code>   * regardless of whether a receive operation is pending. Defaults to 1000.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code>  prefetchCount?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">54</td>
	<td class="source"><code>   * @property {number} [epoch] The epoch value that this receiver is currently using for partition ownership.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code>  epoch?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>   * @property {string} [identifier] The receiver identifier that uniqely identifies the receiver.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>  identifier?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>   * @property {boolean} [enableReceiverRuntimeMetric] A value indicating whether the runtime metric of a receiver is enabled.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">64</td>
	<td class="source"><code>  enableReceiverRuntimeMetric?: boolean;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code> * Describes the base client options.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code> * @interface ClientOptionsBase</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code>export interface ClientOptionsBase {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code>   * @property {DataTransformer} [dataTransformer] The data transformer that will be used to encode</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code>   * and decode the sent and received messages respectively. If not provided then we will use the</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>   * DefaultDataTransformer. The default transformer should handle majority of the cases. This</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code>   * option needs to be used only for specialized scenarios.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code>  dataTransformer?: DataTransformer;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code>   * @property {string} [userAgent] The user agent that needs to be appended to the built in</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code>   * user agent string.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code>  userAgent?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>   * @property {WebSocketImpl} [webSocket] - The WebSocket constructor used to create an AMQP connection</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>   * over a WebSocket. In browsers, the built-in WebSocket will be  used by default. In Node, a</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>   * TCP socket will be used if a WebSocket constructor is not provided.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>   webSocket?: WebSocketImpl;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>   * @property {webSocketConstructorOptions} - Options to be passed to the WebSocket constructor</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>   webSocketConstructorOptions?: any;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code> * Describes the options that can be provided while creating the EventHub Client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code> * @interface ClientOptions</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>export interface ClientOptions extends ClientOptionsBase {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code>   * @property {TokenProvider} [tokenProvider] - The token provider that provides the token for authentication.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code>   * Default value: SasTokenProvider.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>  tokenProvider?: TokenProvider;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code> * @class EventHubClient</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">110</td>
	<td class="source"><code> * Describes the EventHub client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code>export class EventHubClient {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">113</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code>   * @property {string} [connectionId] The amqp connection id that uniquely identifies the connection within a process.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code>  connectionId?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">117</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>   * @property {string} eventhubName The name of the Eventhub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code>   * @readonly</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>  get eventhubName(): string {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code>    return this._context.config.entityPath!;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code>   * @property {ConnectionContext} _context Describes the amqp connection context for the eventhub client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>   * @private</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">130</td>
	<td class="source"><code>  private _context: ConnectionContext;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">133</td>
	<td class="source"><code>   * Instantiates a client pointing to the Event Hub given by this configuration.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code>   * @constructor</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code>   * @param {EventHubConnectionConfig} config - The connection configuration to create the EventHub Client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code>   * @param {ClientOptions} options - The optional parameters that can be provided to the EventHub</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code>   * Client constructor.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>  constructor(config: EventHubConnectionConfig, options?: ClientOptions) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code>    if (!options) options = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">142</td>
	<td class="source"><code>    this._context = ConnectionContext.create(config, options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">143</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">144</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">145</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">146</td>
	<td class="source"><code>   * Closes the AMQP connection to the Event Hub for this client,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">147</td>
	<td class="source"><code>   * returning a promise that will be resolved when disconnection is completed.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">148</td>
	<td class="source"><code>   * @returns {Promise&#60;void&#62;} Promise&#60;void&#62;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">149</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">150</td>
	<td class="source"><code>  async close(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">151</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">152</td>
	<td class="source"><code>      if (this._context.connection.isOpen()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">153</td>
	<td class="source"><code>        // Close all the senders.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">154</td>
	<td class="source"><code>        for (const senderName of Object.keys(this._context.senders)) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">155</td>
	<td class="source"><code>          await this._context.senders[senderName].close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">156</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">157</td>
	<td class="source"><code>        // Close all the receivers.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">158</td>
	<td class="source"><code>        for (const receiverName of Object.keys(this._context.receivers)) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">159</td>
	<td class="source"><code>          await this._context.receivers[receiverName].close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">160</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">161</td>
	<td class="source"><code>        // Close the cbs session;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">162</td>
	<td class="source"><code>        await this._context.cbsSession.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">163</td>
	<td class="source"><code>        // Close the management session</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">164</td>
	<td class="source"><code>        await this._context.managementSession!.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">165</td>
	<td class="source"><code>        await this._context.connection.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">166</td>
	<td class="source"><code>        this._context.wasConnectionCloseCalled = true;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">167</td>
	<td class="source"><code>        log.client("Closed the amqp connection '%s' on the client.", this._context.connectionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">168</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">169</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 170, Column 7: "Do not assign to the exception parameter."
		<a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">170</td>
	<td class="source"><code>      err = err instanceof Error ? err : JSON.stringify(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">171</td>
	<td class="source"><code>      log.error(`An error occurred while closing the connection "${this._context.connectionId}":\n${err}`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">172</td>
	<td class="source"><code>      throw err;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">173</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">174</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">175</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">176</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">177</td>
	<td class="source"><code>   * Sends the given message to the EventHub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">178</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">179</td>
	<td class="source"><code>   * @param {any} data                    Message to send.  Will be sent as UTF8-encoded JSON string.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">180</td>
	<td class="source"><code>   * @param {string|number} [partitionId] Partition ID to which the event data needs to be sent. This should only be specified</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">181</td>
	<td class="source"><code>   * if you intend to send the event to a specific partition. When not specified EventHub will store the messages in a round-robin</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">182</td>
	<td class="source"><code>   * fashion amongst the different partitions in the EventHub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">183</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">184</td>
	<td class="source"><code>   * @returns {Promise&#60;Delivery&#62;} Promise&#60;Delivery&#62;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">185</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">186</td>
	<td class="source"><code>  async send(data: EventData, partitionId?: string | number): Promise&#60;Delivery&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">187</td>
	<td class="source"><code>    const sender = EventHubSender.create(this._context, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">188</td>
	<td class="source"><code>    return sender.send(data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">189</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">190</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">191</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">192</td>
	<td class="source"><code>   * Send a batch of EventData to the EventHub. The "message_annotations", "application_properties" and "properties"</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">193</td>
	<td class="source"><code>   * of the first message will be set as that of the envelope (batch message).</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">194</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">195</td>
	<td class="source"><code>   * @param {Array&#60;EventData&#62;} datas  An array of EventData objects to be sent in a Batch message.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">196</td>
	<td class="source"><code>   * @param {string|number} [partitionId] Partition ID to which the event data needs to be sent. This should only be specified</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">197</td>
	<td class="source"><code>   * if you intend to send the event to a specific partition. When not specified EventHub will store the messages in a round-robin</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">198</td>
	<td class="source"><code>   * fashion amongst the different partitions in the EventHub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">199</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">200</td>
	<td class="source"><code>   * @return {Promise&#60;Delivery&#62;} Promise&#60;Delivery&#62;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">201</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">202</td>
	<td class="source"><code>  async sendBatch(datas: EventData[], partitionId?: string | number): Promise&#60;Delivery&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">203</td>
	<td class="source"><code>    const sender = EventHubSender.create(this._context, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">204</td>
	<td class="source"><code>    return sender.sendBatch(datas);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">205</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">206</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">207</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">208</td>
	<td class="source"><code>   * Starts the receiver by establishing an AMQP session and an AMQP receiver link on the session. Messages will be passed to</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">209</td>
	<td class="source"><code>   * the provided onMessage handler and error will be passed to the provided onError handler.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">210</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">211</td>
	<td class="source"><code>   * @param {string|number} partitionId                        Partition ID from which to receive.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">212</td>
	<td class="source"><code>   * @param {OnMessage} onMessage                              The message handler to receive event data objects.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">213</td>
	<td class="source"><code>   * @param {OnError} onError                                  The error handler to receive an error that occurs</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">214</td>
	<td class="source"><code>   * while receiving messages.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">215</td>
	<td class="source"><code>   * @param {ReceiveOptions} [options]                         Options for how you'd like to receive messages.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">216</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">217</td>
	<td class="source"><code>   * @returns {ReceiveHandler} ReceiveHandler - An object that provides a mechanism to stop receiving more messages.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">218</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">219</td>
	<td class="source"><code>  receive(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">220</td>
	<td class="source"><code>    partitionId: string | number,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">221</td>
	<td class="source"><code>    onMessage: OnMessage,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">222</td>
	<td class="source"><code>    onError: OnError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">223</td>
	<td class="source"><code>    options?: ReceiveOptions</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">224</td>
	<td class="source"><code>  ): ReceiveHandler {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">225</td>
	<td class="source"><code>    if (typeof partitionId !== "string" && typeof partitionId !== "number") {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">226</td>
	<td class="source"><code>      throw new Error("'partitionId' is a required parameter and must be of type: 'string' | 'number'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">227</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">228</td>
	<td class="source"><code>    const sReceiver = StreamingReceiver.create(this._context, partitionId, options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">229</td>
	<td class="source"><code>    this._context.receivers[sReceiver.name] = sReceiver;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">230</td>
	<td class="source"><code>    return sReceiver.receive(onMessage, onError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">231</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">232</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">233</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">234</td>
	<td class="source"><code>   * Receives a batch of EventData objects from an EventHub partition for a given count and a given max wait time in seconds, whichever</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">235</td>
	<td class="source"><code>   * happens first. This method can be used directly after creating the receiver object and **MUST NOT** be used along with the `start()` method.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">236</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">237</td>
	<td class="source"><code>   * @param {string|number} partitionId                        Partition ID from which to receive.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">238</td>
	<td class="source"><code>   * @param {number} maxMessageCount                           The maximum message count. Must be a value greater than 0.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">239</td>
	<td class="source"><code>   * @param {number} [maxWaitTimeInSeconds]                    The maximum wait time in seconds for which the Receiver should wait</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">240</td>
	<td class="source"><code>   * to receiver the said amount of messages. If not provided, it defaults to 60 seconds.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">241</td>
	<td class="source"><code>   * @param {ReceiveOptions} [options]                         Options for how you'd like to receive messages.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">242</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">243</td>
	<td class="source"><code>   * @returns {Promise&#60;Array&#60;EventData&#62;&#62;} Promise&#60;Array&#60;EventData&#62;&#62;.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">244</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">245</td>
	<td class="source"><code>  async receiveBatch(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">246</td>
	<td class="source"><code>    partitionId: string | number,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">247</td>
	<td class="source"><code>    maxMessageCount: number,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">248</td>
	<td class="source"><code>    maxWaitTimeInSeconds?: number,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">249</td>
	<td class="source"><code>    options?: ReceiveOptions</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">250</td>
	<td class="source"><code>  ): Promise&#60;EventData[]&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">251</td>
	<td class="source"><code>    if (typeof partitionId !== "string" && typeof partitionId !== "number") {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">252</td>
	<td class="source"><code>      throw new Error("'partitionId' is a required parameter and must be of type: 'string' | 'number'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">253</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">254</td>
	<td class="source"><code>    const bReceiver = BatchingReceiver.create(this._context, partitionId, options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">255</td>
	<td class="source"><code>    this._context.receivers[bReceiver.name] = bReceiver;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">256</td>
	<td class="source"><code>    let error: MessagingError | undefined;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">257</td>
	<td class="source"><code>    let result: EventData[] = [];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">258</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">259</td>
	<td class="source"><code>      result = await bReceiver.receive(maxMessageCount, maxWaitTimeInSeconds);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">260</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">261</td>
	<td class="source"><code>      error = err;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">262</td>
	<td class="source"><code>      log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">263</td>
	<td class="source"><code>        "[%s] Receiver '%s', an error occurred while receiving %d messages for %d max time:\n %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">264</td>
	<td class="source"><code>        this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">265</td>
	<td class="source"><code>        bReceiver.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">266</td>
	<td class="source"><code>        maxMessageCount,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">267</td>
	<td class="source"><code>        maxWaitTimeInSeconds,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">268</td>
	<td class="source"><code>        err</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">269</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">270</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">271</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">272</td>
	<td class="source"><code>      await bReceiver.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">273</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">274</td>
	<td class="source"><code>      // do nothing about it.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">275</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">276</td>
	<td class="source"><code>    if (error) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">277</td>
	<td class="source"><code>      throw error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">278</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">279</td>
	<td class="source"><code>    return result;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">280</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">281</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">282</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">283</td>
	<td class="source"><code>   * Provides the eventhub runtime information.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">284</td>
	<td class="source"><code>   * @returns {Promise&#60;EventHubRuntimeInformation&#62;} A promise that resolves with EventHubRuntimeInformation.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">285</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">286</td>
	<td class="source"><code>  async getHubRuntimeInformation(): Promise&#60;EventHubRuntimeInformation&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">287</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">288</td>
	<td class="source"><code>      return await this._context.managementSession!.getHubRuntimeInformation();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">289</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">290</td>
	<td class="source"><code>      log.error("An error occurred while getting the hub runtime information: %O", err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">291</td>
	<td class="source"><code>      throw err;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">292</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">293</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">294</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">295</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">296</td>
	<td class="source"><code>   * Provides an array of partitionIds.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">297</td>
	<td class="source"><code>   * @returns {Promise&#60;Array&#60;string&#62;&#62;} A promise that resolves with an Array of strings.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">298</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 299, Column 36: "Array type using 'Array<string>' is forbidden. Use 'string[]' instead."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/array-type" target="_blank">@typescript-eslint/array-type</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">299</td>
	<td class="source"><code>  async getPartitionIds(): Promise&#60;Array&#60;string&#62;&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">300</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">301</td>
	<td class="source"><code>      const runtimeInfo = await this.getHubRuntimeInformation();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">302</td>
	<td class="source"><code>      return runtimeInfo.partitionIds;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">303</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">304</td>
	<td class="source"><code>      log.error("An error occurred while getting the partition ids: %O", err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">305</td>
	<td class="source"><code>      throw err;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">306</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">307</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">308</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">309</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">310</td>
	<td class="source"><code>   * Provides information about the specified partition.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">311</td>
	<td class="source"><code>   * @param {(string|number)} partitionId Partition ID for which partition information is required.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">312</td>
	<td class="source"><code>   * @returns {Promise&#60;EventHubPartitionRuntimeInformation&#62;} A promise that resoloves with EventHubPartitionRuntimeInformation.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">313</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">314</td>
	<td class="source"><code>  async getPartitionInformation(partitionId: string | number): Promise&#60;EventHubPartitionRuntimeInformation&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">315</td>
	<td class="source"><code>    if (typeof partitionId !== "string" && typeof partitionId !== "number") {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">316</td>
	<td class="source"><code>      throw new Error("'partitionId' is a required parameter and must be of type: 'string' | 'number'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">317</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">318</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">319</td>
	<td class="source"><code>      return await this._context.managementSession!.getPartitionInformation(partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">320</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">321</td>
	<td class="source"><code>      log.error("An error occurred while getting the partition information: %O", err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">322</td>
	<td class="source"><code>      throw err;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">323</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">324</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">325</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">326</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">327</td>
	<td class="source"><code>   * Creates an EventHub Client from connection string.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">328</td>
	<td class="source"><code>   * @param {string} connectionString - Connection string of the form 'Endpoint=sb://my-servicebus-namespace.servicebus.windows.net/;SharedAccessKeyName=my-SA-name;SharedAccessKey=my-SA-key'</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">329</td>
	<td class="source"><code>   * @param {string} [path] - EventHub path of the form 'my-event-hub-name'</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">330</td>
	<td class="source"><code>   * @param {ClientOptions} [options] Options that can be provided during client creation.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">331</td>
	<td class="source"><code>   * @returns {EventHubClient} - An instance of the eventhub client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">332</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">333</td>
	<td class="source"><code>  static createFromConnectionString(connectionString: string, path?: string, options?: ClientOptions): EventHubClient {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">334</td>
	<td class="source"><code>    if (!connectionString || (connectionString && typeof connectionString !== "string")) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">335</td>
	<td class="source"><code>      throw new Error("'connectionString' is a required parameter and must be of type: 'string'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">336</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">337</td>
	<td class="source"><code>    const config = EventHubConnectionConfig.create(connectionString, path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">338</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">339</td>
	<td class="source"><code>    config.webSocket = options && options.webSocket;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">340</td>
	<td class="source"><code>    config.webSocketEndpointPath = "$servicebus/websocket";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">341</td>
	<td class="source"><code>    config.webSocketConstructorOptions = options && options.webSocketConstructorOptions;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">342</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">343</td>
	<td class="source"><code>    if (!config.entityPath) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">344</td>
	<td class="source"><code>      throw new Error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">345</td>
	<td class="source"><code>        `Either the connectionString must have "EntityPath=&#60;path-to-entity&#62;" or ` +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">346</td>
	<td class="source"><code>          `you must provide "path", while creating the client`</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">347</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">348</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">349</td>
	<td class="source"><code>    return new EventHubClient(config, options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">350</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">351</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">352</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">353</td>
	<td class="source"><code>   * Creates an EventHub Client from connection string.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">354</td>
	<td class="source"><code>   * @param {string} iothubConnectionString - Connection string of the form 'HostName=iot-host-name;SharedAccessKeyName=my-SA-name;SharedAccessKey=my-SA-key'</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">355</td>
	<td class="source"><code>   * @param {ClientOptions} [options] Options that can be provided during client creation.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">356</td>
	<td class="source"><code>   * @returns {Promise&#60;EventHubClient&#62;} - Promise&#60;EventHubClient&#62;.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">357</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">358</td>
	<td class="source"><code>  static async createFromIotHubConnectionString(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">359</td>
	<td class="source"><code>    iothubConnectionString: string,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">360</td>
	<td class="source"><code>    options?: ClientOptions</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">361</td>
	<td class="source"><code>  ): Promise&#60;EventHubClient&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">362</td>
	<td class="source"><code>    if (!iothubConnectionString || (iothubConnectionString && typeof iothubConnectionString !== "string")) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">363</td>
	<td class="source"><code>      throw new Error("'connectionString' is a required parameter and must be of type: 'string'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">364</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">365</td>
	<td class="source"><code>    const connectionString = await new IotHubClient(iothubConnectionString).getEventHubConnectionString();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">366</td>
	<td class="source"><code>    return EventHubClient.createFromConnectionString(connectionString, undefined, options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">367</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">368</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">369</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">370</td>
	<td class="source"><code>   * Creates an EventHub Client from a generic token provider.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">371</td>
	<td class="source"><code>   * @param {string} host - Fully qualified domain name for Event Hubs. Most likely,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">372</td>
	<td class="source"><code>   * &#60;yournamespace&#62;.servicebus.windows.net</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">373</td>
	<td class="source"><code>   * @param {string} entityPath - EventHub path of the form 'my-event-hub-name'</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">374</td>
	<td class="source"><code>   * @param {TokenProvider} tokenProvider - Your token provider that implements the TokenProvider interface.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">375</td>
	<td class="source"><code>   * @param {ClientOptionsBase} options - The options that can be provided during client creation.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">376</td>
	<td class="source"><code>   * @returns {EventHubClient} An instance of the Eventhub client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">377</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">378</td>
	<td class="source"><code>  static createFromTokenProvider(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">379</td>
	<td class="source"><code>    host: string,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">380</td>
	<td class="source"><code>    entityPath: string,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">381</td>
	<td class="source"><code>    tokenProvider: TokenProvider,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">382</td>
	<td class="source"><code>    options?: ClientOptionsBase</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">383</td>
	<td class="source"><code>  ): EventHubClient {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">384</td>
	<td class="source"><code>    if (!host || (host && typeof host !== "string")) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">385</td>
	<td class="source"><code>      throw new Error("'host' is a required parameter and must be of type: 'string'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">386</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">387</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">388</td>
	<td class="source"><code>    if (!entityPath || (entityPath && typeof entityPath !== "string")) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">389</td>
	<td class="source"><code>      throw new Error("'entityPath' is a required parameter and must be of type: 'string'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">390</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">391</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">392</td>
	<td class="source"><code>    if (!tokenProvider || (tokenProvider && typeof tokenProvider !== "object")) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">393</td>
	<td class="source"><code>      throw new Error("'tokenProvider' is a required parameter and must be of type: 'object'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">394</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">395</td>
	<td class="source"><code>    if (!host.endsWith("/")) host += "/";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">396</td>
	<td class="source"><code>    const connectionString =</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">397</td>
	<td class="source"><code>      `Endpoint=sb://${host};SharedAccessKeyName=defaultKeyName;` + `SharedAccessKey=defaultKeyValue`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">398</td>
	<td class="source"><code>    if (!options) options = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">399</td>
	<td class="source"><code>    const clientOptions: ClientOptions = options;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">400</td>
	<td class="source"><code>    clientOptions.tokenProvider = tokenProvider;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">401</td>
	<td class="source"><code>    return EventHubClient.createFromConnectionString(connectionString, entityPath, clientOptions);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">402</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">403</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">404</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">405</td>
	<td class="source"><code>   * Creates an EventHub Client from AADTokenCredentials.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">406</td>
	<td class="source"><code>   * @param {string} host - Fully qualified domain name for Event Hubs. Most likely,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">407</td>
	<td class="source"><code>   * &#60;yournamespace&#62;.servicebus.windows.net</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">408</td>
	<td class="source"><code>   * @param {string} entityPath - EventHub path of the form 'my-event-hub-name'</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">409</td>
	<td class="source"><code>   * @param {TokenCredentials} credentials - The AAD Token credentials. It can be one of the following:</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">410</td>
	<td class="source"><code>   * ApplicationTokenCredentials | UserTokenCredentials | DeviceTokenCredentials | MSITokenCredentials.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">411</td>
	<td class="source"><code>   * @param {ClientOptionsBase} options - The options that can be provided during client creation.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">412</td>
	<td class="source"><code>   * @returns {EventHubClient} An instance of the Eventhub client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">413</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">414</td>
	<td class="source"><code>  static createFromAadTokenCredentials(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">415</td>
	<td class="source"><code>    host: string,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">416</td>
	<td class="source"><code>    entityPath: string,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">417</td>
	<td class="source"><code>    credentials: ApplicationTokenCredentials | UserTokenCredentials | DeviceTokenCredentials | MSITokenCredentials,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">418</td>
	<td class="source"><code>    options?: ClientOptionsBase</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">419</td>
	<td class="source"><code>  ): EventHubClient {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">420</td>
	<td class="source"><code>    if (!credentials || (credentials && typeof credentials !== "object")) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">421</td>
	<td class="source"><code>      throw new Error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">422</td>
	<td class="source"><code>        "'credentials' is a required parameter and must be an instance of " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">423</td>
	<td class="source"><code>          "ApplicationTokenCredentials | UserTokenCredentials | DeviceTokenCredentials | " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">424</td>
	<td class="source"><code>          "MSITokenCredentials."</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">425</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">426</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">427</td>
	<td class="source"><code>    const tokenProvider = new AadTokenProvider(credentials);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">428</td>
	<td class="source"><code>    return EventHubClient.createFromTokenProvider(host, entityPath, tokenProvider, options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">429</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">430</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">431</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcEventHubReceiverTs" class="lint-result bg-error" data-group="f-4" data-problem-count="5" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\eventHubReceiver.ts
    </th>
    <th class="result-summary">
      5 problems (5 errors, 0 warnings)
    </th>
</tr>
<tr class="f-4 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-4"
								data-content="detailSummary-4"
								aria-controls="detailSummary-4"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-4"
								data-content="sourceCode-4"
								aria-controls="sourceCode-4"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-4">
				<div class="row"></div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 185, Column 48: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 494, Column 3: "Member _deleteFromCache should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 505, Column 3: "Member _init should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 565, Column 7: "Do not assign to the exception parameter."
		<a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 580, Column 3: "Member _createReceiverOptions should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-4">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import uuid from "uuid/v4";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>import * as log from "./log";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>import { Receiver, OnAmqpEvent, EventContext, ReceiverOptions, types, AmqpError } from "rhea-promise";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>import { translate, Constants, MessagingError, retry, RetryOperationType, RetryConfig } from "@azure/amqp-common";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code>import { EventData } from "./eventData";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>import { ReceiveOptions } from "./eventHubClient";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code>import { ConnectionContext } from "./connectionContext";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code>import { LinkEntity } from "./linkEntity";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code>import { EventPosition } from "./eventPosition";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>interface CreateReceiverOptions {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code>  onMessage: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code>  onError: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code>  onClose: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code>  onSessionError: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code>  onSessionClose: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>  newName?: boolean;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>  eventPosition?: EventPosition;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code> * Represents the approximate receiver runtime information for a logical partition of an Event Hub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code> * @interface ReceiverRuntimeInfo</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code>export interface ReceiverRuntimeInfo {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code>   * @property {string} partitionId The parition identifier.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code>  partitionId: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>   * @property {number} lastSequenceNumber The logical sequence number of the event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code>  lastSequenceNumber?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code>   * @property {Date} lastEnqueuedTimeUtc The enqueued time of the last event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code>  lastEnqueuedTimeUtc?: Date;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code>   * @property {string} lastEnqueuedOffset The offset of the last enqueued event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code>  lastEnqueuedOffset?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code>   * @property {Date} retrievalTime The enqueued time of the last event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>  retrievalTime?: Date;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code> * Describes the checkoint information.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code> * @interface CheckpointData</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">54</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>export interface CheckpointData {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>   * @property {Date} enqueuedTimeUtc The enqueued time of the event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>  enqueuedTimeUtc: Date;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>   * @property {string} offset The offset of the event to be checked in.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code>  offset: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">64</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code>   * @property {string} sequenceNumber The sequence number of the event to be checked in.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>  sequenceNumber: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code> * Describes the message handler signature.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code>export type OnMessage = (eventData: EventData) =&#62; void;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code> * Describes the error handler signature.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code>export type OnError = (error: MessagingError | Error) =&#62; void;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code> * Describes the EventHubReceiver that will receive event data from EventHub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code> * @class EventHubReceiver</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code> * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>export class EventHubReceiver extends LinkEntity {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>   * @property {string} consumerGroup The EventHub consumer group from which the receiver will</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>   * receive messages. (Default: "default").</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>  consumerGroup: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>   * @property {ReceiverRuntimeInfo} runtimeInfo The receiver runtime info.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code>  runtimeInfo: ReceiverRuntimeInfo;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>   * @property {number} [epoch] The Receiver epoch.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>  epoch?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>   * @property {string} [identifier] The Receiver identifier</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code>  identifier?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>   * @property {ReceiveOptions} [options] Optional properties that can be set while creating</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>   * the EventHubReceiver.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>  options: ReceiveOptions;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code>   * @property {number} [prefetchCount] The number of messages that the receiver can fetch/receive</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">110</td>
	<td class="source"><code>   * initially. Defaults to 1000.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code>  prefetchCount?: number = Constants.defaultPrefetchCount;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">113</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code>   * @property {boolean} receiverRuntimeMetricEnabled Indicates whether receiver runtime metric</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>   * is enabled. Default: false.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">117</td>
	<td class="source"><code>  receiverRuntimeMetricEnabled: boolean = false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>   * @property {Receiver} [_receiver] The AMQP receiver link.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>  protected _receiver?: Receiver;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>   * @property {OnMessage} _onMessage The message handler provided by the user that will be wrapped</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code>   * inside _onAmqpMessage.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>  protected _onMessage?: OnMessage;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">130</td>
	<td class="source"><code>   * @property {OnError} _onError The error handler provided by the user that will be wrapped</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code>   * inside _onAmqpError.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">133</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>  protected _onError?: OnError;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code>   * @property {OnAmqpEvent} _onAmqpError The message handler that will be set as the handler on the</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code>   * underlying rhea receiver for the "message" event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>  protected _onAmqpMessage: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">142</td>
	<td class="source"><code>   * @property {OnAmqpEvent} _onAmqpError The message handler that will be set as the handler on the</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">143</td>
	<td class="source"><code>   * underlying rhea receiver for the "receiver_error" event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">144</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">145</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">146</td>
	<td class="source"><code>  protected _onAmqpError: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">147</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">148</td>
	<td class="source"><code>   * @property {OnAmqpEvent} _onAmqpClose The message handler that will be set as the handler on the</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">149</td>
	<td class="source"><code>   * underlying rhea receiver for the "receiver_close" event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">150</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">151</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">152</td>
	<td class="source"><code>  protected _onAmqpClose: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">153</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">154</td>
	<td class="source"><code>   * @property {OnAmqpEvent} _onSessionError The message handler that will be set as the handler on</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">155</td>
	<td class="source"><code>   * the underlying rhea receiver's session for the "session_error" event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">156</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">157</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">158</td>
	<td class="source"><code>  protected _onSessionError: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">159</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">160</td>
	<td class="source"><code>   * @property {OnAmqpEvent} _onSessionClose The message handler that will be set as the handler on</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">161</td>
	<td class="source"><code>   * the underlying rhea receiver's session for the "session_close" event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">162</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">163</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">164</td>
	<td class="source"><code>  protected _onSessionClose: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">165</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">166</td>
	<td class="source"><code>   * @property {CheckpointData} _checkpoint Describes metadata about the last message received.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">167</td>
	<td class="source"><code>   * This is used as the offset to receive messages from incase of recovery.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">168</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">169</td>
	<td class="source"><code>  protected _checkpoint: CheckpointData;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">170</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">171</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">172</td>
	<td class="source"><code>   * Instantiate a new receiver from the AMQP `Receiver`. Used by `EventHubClient`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">173</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">174</td>
	<td class="source"><code>   * @constructor</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">175</td>
	<td class="source"><code>   * @param {EventHubClient} client                            The EventHub client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">176</td>
	<td class="source"><code>   * @param {string} partitionId                               Partition ID from which to receive.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">177</td>
	<td class="source"><code>   * @param {ReceiveOptions} [options]                         Receiver options.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">178</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">179</td>
	<td class="source"><code>  constructor(context: ConnectionContext, partitionId: string | number, options?: ReceiveOptions) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">180</td>
	<td class="source"><code>    super(context, { partitionId: partitionId, name: options ? options.name : undefined });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">181</td>
	<td class="source"><code>    if (!options) options = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">182</td>
	<td class="source"><code>    this.consumerGroup = options.consumerGroup ? options.consumerGroup : Constants.defaultConsumerGroup;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">183</td>
	<td class="source"><code>    this.address = context.config.getReceiverAddress(partitionId, this.consumerGroup);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">184</td>
	<td class="source"><code>    this.audience = context.config.getReceiverAudience(partitionId, this.consumerGroup);</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 185, Column 48: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">185</td>
	<td class="source"><code>    this.prefetchCount = options.prefetchCount != undefined ? options.prefetchCount : Constants.defaultPrefetchCount;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">186</td>
	<td class="source"><code>    this.epoch = options.epoch;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">187</td>
	<td class="source"><code>    this.identifier = options.identifier;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">188</td>
	<td class="source"><code>    this.options = options;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">189</td>
	<td class="source"><code>    this.receiverRuntimeMetricEnabled = options.enableReceiverRuntimeMetric || false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">190</td>
	<td class="source"><code>    this.runtimeInfo = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">191</td>
	<td class="source"><code>      partitionId: `${partitionId}`</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">192</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">193</td>
	<td class="source"><code>    this._checkpoint = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">194</td>
	<td class="source"><code>      enqueuedTimeUtc: new Date(),</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">195</td>
	<td class="source"><code>      offset: "0",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">196</td>
	<td class="source"><code>      sequenceNumber: -1</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">197</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">198</td>
	<td class="source"><code>    this._onAmqpMessage = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">199</td>
	<td class="source"><code>      const evData = EventData.fromAmqpMessage(context.message!);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">200</td>
	<td class="source"><code>      evData.body = this._context.dataTransformer.decode(context.message!.body);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">201</td>
	<td class="source"><code>      this._checkpoint = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">202</td>
	<td class="source"><code>        enqueuedTimeUtc: evData.enqueuedTimeUtc!,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">203</td>
	<td class="source"><code>        offset: evData.offset!,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">204</td>
	<td class="source"><code>        sequenceNumber: evData.sequenceNumber!</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">205</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">206</td>
	<td class="source"><code>      if (this.receiverRuntimeMetricEnabled && evData) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">207</td>
	<td class="source"><code>        this.runtimeInfo.lastSequenceNumber = evData.lastSequenceNumber;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">208</td>
	<td class="source"><code>        this.runtimeInfo.lastEnqueuedTimeUtc = evData.lastEnqueuedTime;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">209</td>
	<td class="source"><code>        this.runtimeInfo.lastEnqueuedOffset = evData.lastEnqueuedOffset;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">210</td>
	<td class="source"><code>        this.runtimeInfo.retrievalTime = evData.retrievalTime;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">211</td>
	<td class="source"><code>        log.receiver(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">212</td>
	<td class="source"><code>          "[%s] RuntimeInfo of Receiver '%s' is %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">213</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">214</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">215</td>
	<td class="source"><code>          this.runtimeInfo</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">216</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">217</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">218</td>
	<td class="source"><code>      this._onMessage!(evData);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">219</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">220</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">221</td>
	<td class="source"><code>    this._onAmqpError = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">222</td>
	<td class="source"><code>      const receiver = this._receiver || context.receiver!;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">223</td>
	<td class="source"><code>      const receiverError = context.receiver && context.receiver.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">224</td>
	<td class="source"><code>      if (receiverError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">225</td>
	<td class="source"><code>        const ehError = translate(receiverError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">226</td>
	<td class="source"><code>        log.error("[%s] An error occurred for Receiver '%s': %O.", this._context.connectionId, this.name, ehError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">227</td>
	<td class="source"><code>        if (!ehError.retryable) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">228</td>
	<td class="source"><code>          if (receiver && !receiver.isItselfClosed()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">229</td>
	<td class="source"><code>            log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">230</td>
	<td class="source"><code>              "[%s] Since the user did not close the receiver and the error is not " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">231</td>
	<td class="source"><code>                "retryable, we let the user know about it by calling the user's error handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">232</td>
	<td class="source"><code>              this._context.connectionId</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">233</td>
	<td class="source"><code>            );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">234</td>
	<td class="source"><code>            this._onError!(ehError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">235</td>
	<td class="source"><code>          } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">236</td>
	<td class="source"><code>            log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">237</td>
	<td class="source"><code>              "[%s] The received error is not retryable. However, the receiver was " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">238</td>
	<td class="source"><code>                "closed by the user. Hence not notifying the user's error handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">239</td>
	<td class="source"><code>              this._context.connectionId</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">240</td>
	<td class="source"><code>            );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">241</td>
	<td class="source"><code>          }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">242</td>
	<td class="source"><code>        } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">243</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">244</td>
	<td class="source"><code>            "[%s] Since received error is retryable, we will NOT notify the user's " + "error handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">245</td>
	<td class="source"><code>            this._context.connectionId</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">246</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">247</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">248</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">249</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">250</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">251</td>
	<td class="source"><code>    this._onSessionError = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">252</td>
	<td class="source"><code>      const receiver = this._receiver || context.receiver!;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">253</td>
	<td class="source"><code>      const sessionError = context.session && context.session.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">254</td>
	<td class="source"><code>      if (sessionError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">255</td>
	<td class="source"><code>        const ehError = translate(sessionError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">256</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">257</td>
	<td class="source"><code>          "[%s] An error occurred on the session for Receiver '%s': %O.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">258</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">259</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">260</td>
	<td class="source"><code>          ehError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">261</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">262</td>
	<td class="source"><code>        if (receiver && !receiver.isSessionItselfClosed() && !ehError.retryable) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">263</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">264</td>
	<td class="source"><code>            "[%s] Since the user did not close the receiver and the session error is not " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">265</td>
	<td class="source"><code>              "retryable, we let the user know about it by calling the user's error handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">266</td>
	<td class="source"><code>            this._context.connectionId</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">267</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">268</td>
	<td class="source"><code>          this._onError!(ehError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">269</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">270</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">271</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">272</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">273</td>
	<td class="source"><code>    this._onAmqpClose = async (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">274</td>
	<td class="source"><code>      const receiverError = context.receiver && context.receiver.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">275</td>
	<td class="source"><code>      const receiver = this._receiver || context.receiver!;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">276</td>
	<td class="source"><code>      if (receiverError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">277</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">278</td>
	<td class="source"><code>          "[%s] 'receiver_close' event occurred for receiver '%s' with address '%s'. " + "The associated error is: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">279</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">280</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">281</td>
	<td class="source"><code>          this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">282</td>
	<td class="source"><code>          receiverError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">283</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">284</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">285</td>
	<td class="source"><code>      if (receiver && !receiver.isItselfClosed()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">286</td>
	<td class="source"><code>        if (!this.isConnecting) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">287</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">288</td>
	<td class="source"><code>            "[%s] 'receiver_close' event occurred on the receiver '%s' with address '%s' " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">289</td>
	<td class="source"><code>              "and the sdk did not initiate this. The receiver is not reconnecting. Hence, calling " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">290</td>
	<td class="source"><code>              "detached from the _onAmqpClose() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">291</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">292</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">293</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">294</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">295</td>
	<td class="source"><code>          await this.detached(receiverError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">296</td>
	<td class="source"><code>        } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">297</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">298</td>
	<td class="source"><code>            "[%s] 'receiver_close' event occurred on the receiver '%s' with address '%s' " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">299</td>
	<td class="source"><code>              "and the sdk did not initate this. Moreover the receiver is already re-connecting. " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">300</td>
	<td class="source"><code>              "Hence not calling detached from the _onAmqpClose() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">301</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">302</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">303</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">304</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">305</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">306</td>
	<td class="source"><code>      } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">307</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">308</td>
	<td class="source"><code>          "[%s] 'receiver_close' event occurred on the receiver '%s' with address '%s' " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">309</td>
	<td class="source"><code>            "because the sdk initiated it. Hence not calling detached from the _onAmqpClose" +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">310</td>
	<td class="source"><code>            "() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">311</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">312</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">313</td>
	<td class="source"><code>          this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">314</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">315</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">316</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">317</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">318</td>
	<td class="source"><code>    this._onSessionClose = async (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">319</td>
	<td class="source"><code>      const receiver = this._receiver || context.receiver!;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">320</td>
	<td class="source"><code>      const sessionError = context.session && context.session.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">321</td>
	<td class="source"><code>      if (sessionError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">322</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">323</td>
	<td class="source"><code>          "[%s] 'session_close' event occurred for receiver '%s' with address '%s'. " + "The associated error is: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">324</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">325</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">326</td>
	<td class="source"><code>          this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">327</td>
	<td class="source"><code>          sessionError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">328</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">329</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">330</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">331</td>
	<td class="source"><code>      if (receiver && !receiver.isSessionItselfClosed()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">332</td>
	<td class="source"><code>        if (!this.isConnecting) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">333</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">334</td>
	<td class="source"><code>            "[%s] 'session_close' event occurred on the session of receiver '%s' with " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">335</td>
	<td class="source"><code>              "address '%s' and the sdk did not initiate this. Hence calling detached from the " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">336</td>
	<td class="source"><code>              "_onSessionClose() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">337</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">338</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">339</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">340</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">341</td>
	<td class="source"><code>          await this.detached(sessionError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">342</td>
	<td class="source"><code>        } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">343</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">344</td>
	<td class="source"><code>            "[%s] 'session_close' event occurred on the session of receiver '%s' with " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">345</td>
	<td class="source"><code>              "address '%s' and the sdk did not initiate this. Moreover the receiver is already " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">346</td>
	<td class="source"><code>              "re-connecting. Hence not calling detached from the _onSessionClose() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">347</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">348</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">349</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">350</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">351</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">352</td>
	<td class="source"><code>      } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">353</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">354</td>
	<td class="source"><code>          "[%s] 'session_close' event occurred on the session of receiver '%s' with address " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">355</td>
	<td class="source"><code>            "'%s' because the sdk initiated it. Hence not calling detached from the _onSessionClose" +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">356</td>
	<td class="source"><code>            "() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">357</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">358</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">359</td>
	<td class="source"><code>          this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">360</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">361</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">362</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">363</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">364</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">365</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">366</td>
	<td class="source"><code>   * Will reconnect the receiver link if necessary.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">367</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">368</td>
	<td class="source"><code>   * @param {AmqpError | Error} [receiverError] The receiver error if any.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">369</td>
	<td class="source"><code>   * @returns {Promise&#60;void&#62;} Promise&#60;void&#62;.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">370</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">371</td>
	<td class="source"><code>  async detached(receiverError?: AmqpError | Error): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">372</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">373</td>
	<td class="source"><code>      const wasCloseInitiated = this._receiver && this._receiver.isItselfClosed();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">374</td>
	<td class="source"><code>      // Clears the token renewal timer. Closes the link and its session if they are open.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">375</td>
	<td class="source"><code>      // Removes the link and its session if they are present in rhea's cache.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">376</td>
	<td class="source"><code>      await this._closeLink(this._receiver);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">377</td>
	<td class="source"><code>      // We should attempt to reopen only when the receiver(sdk) did not initiate the close</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">378</td>
	<td class="source"><code>      let shouldReopen = false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">379</td>
	<td class="source"><code>      if (receiverError && !wasCloseInitiated) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">380</td>
	<td class="source"><code>        const translatedError = translate(receiverError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">381</td>
	<td class="source"><code>        if (translatedError.retryable) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">382</td>
	<td class="source"><code>          shouldReopen = true;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">383</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">384</td>
	<td class="source"><code>            "[%s] close() method of Receiver '%s' with address '%s' was not called. There " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">385</td>
	<td class="source"><code>              "was an accompanying error and it is retryable. This is a candidate for re-establishing " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">386</td>
	<td class="source"><code>              "the receiver link.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">387</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">388</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">389</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">390</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">391</td>
	<td class="source"><code>        } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">392</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">393</td>
	<td class="source"><code>            "[%s] close() method of Receiver '%s' with address '%s' was not called. There " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">394</td>
	<td class="source"><code>              "was an accompanying error and it is NOT retryable. Hence NOT re-establishing " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">395</td>
	<td class="source"><code>              "the receiver link.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">396</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">397</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">398</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">399</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">400</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">401</td>
	<td class="source"><code>      } else if (!wasCloseInitiated) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">402</td>
	<td class="source"><code>        shouldReopen = true;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">403</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">404</td>
	<td class="source"><code>          "[%s] close() method of Receiver '%s' with address '%s' was not called. " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">405</td>
	<td class="source"><code>            "There was no accompanying error as well. This is a candidate for re-establishing " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">406</td>
	<td class="source"><code>            "the receiver link.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">407</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">408</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">409</td>
	<td class="source"><code>          this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">410</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">411</td>
	<td class="source"><code>      } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">412</td>
	<td class="source"><code>        const state: any = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">413</td>
	<td class="source"><code>          wasCloseInitiated: wasCloseInitiated,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">414</td>
	<td class="source"><code>          receiverError: receiverError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">415</td>
	<td class="source"><code>          _receiver: this._receiver</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">416</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">417</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">418</td>
	<td class="source"><code>          "[%s] Something went wrong. State of Receiver '%s' with address '%s' is: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">419</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">420</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">421</td>
	<td class="source"><code>          this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">422</td>
	<td class="source"><code>          state</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">423</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">424</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">425</td>
	<td class="source"><code>      if (shouldReopen) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">426</td>
	<td class="source"><code>        const rcvrOptions: CreateReceiverOptions = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">427</td>
	<td class="source"><code>          onMessage: this._onAmqpMessage,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">428</td>
	<td class="source"><code>          onError: this._onAmqpError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">429</td>
	<td class="source"><code>          onClose: this._onAmqpClose,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">430</td>
	<td class="source"><code>          onSessionError: this._onSessionError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">431</td>
	<td class="source"><code>          onSessionClose: this._onSessionClose,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">432</td>
	<td class="source"><code>          newName: true // provide a new name to the link while re-connecting it. This ensures that</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">433</td>
	<td class="source"><code>          // the service does not send an error stating that the link is still open.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">434</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">435</td>
	<td class="source"><code>        // reconnect the receiver link with sequenceNumber of the last received message as the offset</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">436</td>
	<td class="source"><code>        // if messages were received by the receiver before it got disconnected.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">437</td>
	<td class="source"><code>        if (this._checkpoint.sequenceNumber &#62; -1) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">438</td>
	<td class="source"><code>          rcvrOptions.eventPosition = EventPosition.fromSequenceNumber(this._checkpoint.sequenceNumber);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">439</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">440</td>
	<td class="source"><code>        const options: ReceiverOptions = this._createReceiverOptions(rcvrOptions);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">441</td>
	<td class="source"><code>        // shall retry forever at an interval of 15 seconds if the error is a retryable error</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">442</td>
	<td class="source"><code>        // else bail out when the error is not retryable or the oepration succeeds.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">443</td>
	<td class="source"><code>        const config: RetryConfig&#60;void&#62; = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">444</td>
	<td class="source"><code>          operation: () =&#62; this._init(options),</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">445</td>
	<td class="source"><code>          connectionId: this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">446</td>
	<td class="source"><code>          operationType: RetryOperationType.receiverLink,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">447</td>
	<td class="source"><code>          times: Constants.defaultConnectionRetryAttempts,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">448</td>
	<td class="source"><code>          connectionHost: this._context.config.host,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">449</td>
	<td class="source"><code>          delayInSeconds: 15</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">450</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">451</td>
	<td class="source"><code>        await retry&#60;void&#62;(config);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">452</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">453</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">454</td>
	<td class="source"><code>      log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">455</td>
	<td class="source"><code>        "[%s] An error occurred while processing detached() of Receiver '%s' with address " + "'%s': %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">456</td>
	<td class="source"><code>        this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">457</td>
	<td class="source"><code>        this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">458</td>
	<td class="source"><code>        this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">459</td>
	<td class="source"><code>        err</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">460</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">461</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">462</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">463</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">464</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">465</td>
	<td class="source"><code>   * Closes the underlying AMQP receiver.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">466</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">467</td>
	<td class="source"><code>   * @returns {Promise&#60;void&#62;}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">468</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">469</td>
	<td class="source"><code>  async close(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">470</td>
	<td class="source"><code>    if (this._receiver) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">471</td>
	<td class="source"><code>      const receiverLink = this._receiver;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">472</td>
	<td class="source"><code>      this._deleteFromCache();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">473</td>
	<td class="source"><code>      await this._closeLink(receiverLink);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">474</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">475</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">476</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">477</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">478</td>
	<td class="source"><code>   * Determines whether the AMQP receiver link is open. If open then returns true else returns false.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">479</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">480</td>
	<td class="source"><code>   * @return {boolean} boolean</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">481</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">482</td>
	<td class="source"><code>  isOpen(): boolean {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">483</td>
	<td class="source"><code>    const result: boolean = this._receiver! && this._receiver!.isOpen();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">484</td>
	<td class="source"><code>    log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">485</td>
	<td class="source"><code>      "[%s] Receiver '%s' with address '%s' is open? -&#62; %s",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">486</td>
	<td class="source"><code>      this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">487</td>
	<td class="source"><code>      this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">488</td>
	<td class="source"><code>      this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">489</td>
	<td class="source"><code>      result</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">490</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">491</td>
	<td class="source"><code>    return result;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">492</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">493</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 494, Column 3: "Member _deleteFromCache should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">494</td>
	<td class="source"><code>  protected _deleteFromCache(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">495</td>
	<td class="source"><code>    this._receiver = undefined;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">496</td>
	<td class="source"><code>    delete this._context.receivers[this.name];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">497</td>
	<td class="source"><code>    log.error("[%s] Deleted the receiver '%s' from the client cache.", this._context.connectionId, this.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">498</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">499</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">500</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">501</td>
	<td class="source"><code>   * Creates a new AMQP receiver under a new AMQP session.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">502</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">503</td>
	<td class="source"><code>   * @returns {Promise&#60;void&#62;}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">504</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 505, Column 3: "Member _init should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">505</td>
	<td class="source"><code>  protected async _init(options?: ReceiverOptions): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">506</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">507</td>
	<td class="source"><code>      if (!this.isOpen() && !this.isConnecting) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">508</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">509</td>
	<td class="source"><code>          "[%s] The receiver '%s' with address '%s' is not open and is not currently " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">510</td>
	<td class="source"><code>            "establishing itself. Hence let's try to connect.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">511</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">512</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">513</td>
	<td class="source"><code>          this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">514</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">515</td>
	<td class="source"><code>        this.isConnecting = true;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">516</td>
	<td class="source"><code>        await this._negotiateClaim();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">517</td>
	<td class="source"><code>        if (!options) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">518</td>
	<td class="source"><code>          options = this._createReceiverOptions({</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">519</td>
	<td class="source"><code>            onMessage: this._onAmqpMessage,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">520</td>
	<td class="source"><code>            onError: this._onAmqpError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">521</td>
	<td class="source"><code>            onClose: this._onAmqpClose,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">522</td>
	<td class="source"><code>            onSessionError: this._onSessionError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">523</td>
	<td class="source"><code>            onSessionClose: this._onSessionClose</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">524</td>
	<td class="source"><code>          });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">525</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">526</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">527</td>
	<td class="source"><code>          "[%s] Trying to create receiver '%s' with options %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">528</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">529</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">530</td>
	<td class="source"><code>          options</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">531</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">532</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">533</td>
	<td class="source"><code>        this._receiver = await this._context.connection.createReceiver(options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">534</td>
	<td class="source"><code>        this.isConnecting = false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">535</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">536</td>
	<td class="source"><code>          "[%s] Receiver '%s' with address '%s' has established itself.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">537</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">538</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">539</td>
	<td class="source"><code>          this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">540</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">541</td>
	<td class="source"><code>        log.receiver("Promise to create the receiver resolved. Created receiver with name: ", this.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">542</td>
	<td class="source"><code>        log.receiver(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">543</td>
	<td class="source"><code>          "[%s] Receiver '%s' created with receiver options: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">544</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">545</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">546</td>
	<td class="source"><code>          options</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">547</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">548</td>
	<td class="source"><code>        // It is possible for someone to close the receiver and then start it again.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">549</td>
	<td class="source"><code>        // Thus make sure that the receiver is present in the client cache.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">550</td>
	<td class="source"><code>        if (!this._context.receivers[this.name]) this._context.receivers[this.name] = this;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">551</td>
	<td class="source"><code>        await this._ensureTokenRenewal();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">552</td>
	<td class="source"><code>      } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">553</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">554</td>
	<td class="source"><code>          "[%s] The receiver '%s' with address '%s' is open -&#62; %s and is connecting " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">555</td>
	<td class="source"><code>            "-&#62; %s. Hence not reconnecting.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">556</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">557</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">558</td>
	<td class="source"><code>          this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">559</td>
	<td class="source"><code>          this.isOpen(),</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">560</td>
	<td class="source"><code>          this.isConnecting</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">561</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">562</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">563</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">564</td>
	<td class="source"><code>      this.isConnecting = false;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 565, Column 7: "Do not assign to the exception parameter."
		<a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">565</td>
	<td class="source"><code>      err = translate(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">566</td>
	<td class="source"><code>      log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">567</td>
	<td class="source"><code>        "[%s] An error occured while creating the receiver '%s': %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">568</td>
	<td class="source"><code>        this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">569</td>
	<td class="source"><code>        this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">570</td>
	<td class="source"><code>        err</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">571</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">572</td>
	<td class="source"><code>      throw err;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">573</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">574</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">575</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">576</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">577</td>
	<td class="source"><code>   * Creates the options that need to be specified while creating an AMQP receiver link.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">578</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">579</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 580, Column 3: "Member _createReceiverOptions should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">580</td>
	<td class="source"><code>  protected _createReceiverOptions(options: CreateReceiverOptions): ReceiverOptions {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">581</td>
	<td class="source"><code>    if (options.newName) this.name = `${uuid()}`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">582</td>
	<td class="source"><code>    const rcvrOptions: ReceiverOptions = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">583</td>
	<td class="source"><code>      name: this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">584</td>
	<td class="source"><code>      autoaccept: true,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">585</td>
	<td class="source"><code>      source: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">586</td>
	<td class="source"><code>        address: this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">587</td>
	<td class="source"><code>      },</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">588</td>
	<td class="source"><code>      credit_window: this.prefetchCount,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">589</td>
	<td class="source"><code>      onMessage: options.onMessage || this._onAmqpMessage,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">590</td>
	<td class="source"><code>      onError: options.onError || this._onAmqpError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">591</td>
	<td class="source"><code>      onClose: options.onClose || this._onAmqpClose,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">592</td>
	<td class="source"><code>      onSessionError: options.onSessionError || this._onSessionError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">593</td>
	<td class="source"><code>      onSessionClose: options.onSessionClose || this._onSessionClose</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">594</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">595</td>
	<td class="source"><code>    if (this.epoch !== undefined && this.epoch !== null) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">596</td>
	<td class="source"><code>      if (!rcvrOptions.properties) rcvrOptions.properties = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">597</td>
	<td class="source"><code>      rcvrOptions.properties[Constants.attachEpoch] = types.wrap_long(this.epoch);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">598</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">599</td>
	<td class="source"><code>    if (this.identifier) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">600</td>
	<td class="source"><code>      if (!rcvrOptions.properties) rcvrOptions.properties = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">601</td>
	<td class="source"><code>      rcvrOptions.properties[Constants.receiverIdentifierName] = this.identifier;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">602</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">603</td>
	<td class="source"><code>    if (this.receiverRuntimeMetricEnabled) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">604</td>
	<td class="source"><code>      rcvrOptions.desired_capabilities = Constants.enableReceiverRuntimeMetricName;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">605</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">606</td>
	<td class="source"><code>    const eventPosition = options.eventPosition || this.options.eventPosition;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">607</td>
	<td class="source"><code>    if (eventPosition) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">608</td>
	<td class="source"><code>      // Set filter on the receiver if event position is specified.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">609</td>
	<td class="source"><code>      const filterClause = eventPosition.getExpression();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">610</td>
	<td class="source"><code>      if (filterClause) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">611</td>
	<td class="source"><code>        (rcvrOptions.source as any).filter = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">612</td>
	<td class="source"><code>          "apache.org:selector-filter:string": types.wrap_described(filterClause, 0x468c00000004)</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">613</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">614</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">615</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">616</td>
	<td class="source"><code>    return rcvrOptions;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">617</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">618</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">619</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcEventHubSenderTs" class="lint-result bg-error" data-group="f-5" data-problem-count="11" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\eventHubSender.ts
    </th>
    <th class="result-summary">
      11 problems (9 errors, 2 warnings)
    </th>
</tr>
<tr class="f-5 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-5"
								data-content="detailSummary-5"
								aria-controls="detailSummary-5"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-5"
								data-content="sourceCode-5"
								aria-controls="sourceCode-5"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-5">
				<div class="row"><div class="column">
	<h3 class="text-error">Top errors</h3>
	<table class="summary-table"><thead>
		<tr>
			<th>rule</th>
			<th>count</th>
		</tr>
	</thead><tbody>
		<tr>
	<td><a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a></td>
	<td>4</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a></td>
	<td>4</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a></td>
	<td>1</td>
</tr>
	</tbody></table>
</div>
<div class="column">
	<h3 class="text-warning">Top warnings</h3>
	<table class="summary-table"><thead>
		<tr>
			<th>rule</th>
			<th>count</th>
		</tr>
	</thead><tbody>
		<tr>
	<td><a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a></td>
	<td>2</td>
</tr>
	</tbody></table>
</div>
</div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 421, Column 3: "Member _deleteFromCache should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 432, Column 3: "Member _createSenderOptions should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 458, Column 3: "Member _trySend should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 459, Column 30: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 476, Column 15: "'onRejected' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 477, Column 15: "'onReleased' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 478, Column 15: "'onModified' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 479, Column 15: "'onAccepted' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 534, Column 38: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 591, Column 3: "Member _init should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 643, Column 7: "Do not assign to the exception parameter."
		<a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-5">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import uuid from "uuid/v4";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>import * as log from "./log";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>import {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>  messageProperties,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code>  Sender,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>  EventContext,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code>  OnAmqpEvent,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code>  SenderOptions,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code>  Delivery,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code>  SenderEvents,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>  message,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code>  AmqpError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code>} from "rhea-promise";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code>import {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code>  defaultLock,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code>  Func,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>  retry,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>  translate,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>  AmqpMessage,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code>  ErrorNameConditionMapper,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code>  RetryConfig,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code>  RetryOperationType,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code>  Constants,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code>  randomNumberFromInterval</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code>} from "@azure/amqp-common";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>import { EventData } from "./eventData";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code>import { ConnectionContext } from "./connectionContext";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code>import { LinkEntity } from "./linkEntity";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code>interface CreateSenderOptions {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>  newName?: boolean;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code> * Describes the EventHubSender that will send event data to EventHub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code> * @class EventHubSender</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code> * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code>export class EventHubSender extends LinkEntity {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code>   * @property {string} senderLock The unqiue lock name per connection that is used to acquire the</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code>   * lock for establishing a sender link by an entity on that connection.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code>   * @readonly</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>  readonly senderLock: string = `sender-${uuid()}`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code>   * @property {OnAmqpEvent} _onAmqpError The handler function to handle errors that happen on the</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>   * underlying sender.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code>   * @readonly</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">54</td>
	<td class="source"><code>  private readonly _onAmqpError: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code>   * @property {OnAmqpEvent} _onAmqpClose The handler function to handle "sender_close" event</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>   * that happens on the underlying sender.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>   * @readonly</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>  private readonly _onAmqpClose: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>   * @property {OnAmqpEvent} _onSessionError The message handler that will be set as the handler on</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code>   * the underlying rhea sender's session for the "session_error" event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">64</td>
	<td class="source"><code>   * @private</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>  private _onSessionError: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>   * @property {OnAmqpEvent} _onSessionClose The message handler that will be set as the handler on</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code>   * the underlying rhea sender's session for the "session_close" event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code>   * @private</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code>  private _onSessionClose: OnAmqpEvent;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code>   * @property {Sender} [_sender] The AMQP sender link.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>   * @private</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code>  private _sender?: Sender;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code>   * Creates a new EventHubSender instance.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code>   * @constructor</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code>   * @param {ConnectionContext} context The connection context.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code>   * @param {string|number} [partitionId] The EventHub partition id to which the sender</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>   * wants to send the event data.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>  constructor(context: ConnectionContext, partitionId?: string | number, name?: string) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>    super(context, { name: name, partitionId: partitionId });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>    this.address = context.config.getSenderAddress(partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>    this.audience = context.config.getSenderAudience(partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>    this._onAmqpError = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>      const senderError = context.sender && context.sender.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code>      if (senderError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>        const err = translate(senderError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>        log.error("[%s] An error occurred for sender '%s': %O.", this._context.connectionId, this.name, err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>    this._onSessionError = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>      const sessionError = context.session && context.session.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code>      if (sessionError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code>        const err = translate(sessionError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>          "[%s] An error occurred on the session of sender '%s': %O.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>          err</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">110</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">113</td>
	<td class="source"><code>    this._onAmqpClose = async (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code>      const sender = this._sender || context.sender!;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>      const senderError = context.sender && context.sender.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code>      if (senderError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">117</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>          "[%s] 'sender_close' event occurred for sender '%s' with address '%s'. " + "The associated error is: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>          this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>          senderError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code>      if (sender && !sender.isItselfClosed()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>        if (!this.isConnecting) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>            "[%s] 'sender_close' event occurred on the sender '%s' with address '%s' " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code>              "and the sdk did not initiate this. The sender is not reconnecting. Hence, calling " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">130</td>
	<td class="source"><code>              "detached from the _onAmqpClose() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">133</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code>          await this.detached(senderError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code>        } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code>            "[%s] 'sender_close' event occurred on the sender '%s' with address '%s' " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code>              "and the sdk did not initate this. Moreover the sender is already re-connecting. " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>              "Hence not calling detached from the _onAmqpClose() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">142</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">143</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">144</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">145</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">146</td>
	<td class="source"><code>      } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">147</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">148</td>
	<td class="source"><code>          "[%s] 'sender_close' event occurred on the sender '%s' with address '%s' " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">149</td>
	<td class="source"><code>            "because the sdk initiated it. Hence not calling detached from the _onAmqpClose" +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">150</td>
	<td class="source"><code>            "() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">151</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">152</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">153</td>
	<td class="source"><code>          this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">154</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">155</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">156</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">157</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">158</td>
	<td class="source"><code>    this._onSessionClose = async (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">159</td>
	<td class="source"><code>      const sender = this._sender || context.sender!;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">160</td>
	<td class="source"><code>      const sessionError = context.session && context.session.error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">161</td>
	<td class="source"><code>      if (sessionError) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">162</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">163</td>
	<td class="source"><code>          "[%s] 'session_close' event occurred for sender '%s' with address '%s'. " + "The associated error is: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">164</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">165</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">166</td>
	<td class="source"><code>          this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">167</td>
	<td class="source"><code>          sessionError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">168</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">169</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">170</td>
	<td class="source"><code>      if (sender && !sender.isSessionItselfClosed()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">171</td>
	<td class="source"><code>        if (!this.isConnecting) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">172</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">173</td>
	<td class="source"><code>            "[%s] 'session_close' event occurred on the session of sender '%s' with " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">174</td>
	<td class="source"><code>              "address '%s' and the sdk did not initiate this. Hence calling detached from the " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">175</td>
	<td class="source"><code>              "_onSessionClose() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">176</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">177</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">178</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">179</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">180</td>
	<td class="source"><code>          await this.detached(sessionError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">181</td>
	<td class="source"><code>        } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">182</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">183</td>
	<td class="source"><code>            "[%s] 'session_close' event occurred on the session of sender '%s' with " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">184</td>
	<td class="source"><code>              "address '%s' and the sdk did not initiate this. Moreover the sender is already " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">185</td>
	<td class="source"><code>              "re-connecting. Hence not calling detached from the _onSessionClose() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">186</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">187</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">188</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">189</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">190</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">191</td>
	<td class="source"><code>      } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">192</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">193</td>
	<td class="source"><code>          "[%s] 'session_close' event occurred on the session of sender '%s' with address " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">194</td>
	<td class="source"><code>            "'%s' because the sdk initiated it. Hence not calling detached from the _onSessionClose" +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">195</td>
	<td class="source"><code>            "() handler.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">196</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">197</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">198</td>
	<td class="source"><code>          this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">199</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">200</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">201</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">202</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">203</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">204</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">205</td>
	<td class="source"><code>   * Will reconnect the sender link if necessary.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">206</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">207</td>
	<td class="source"><code>   * @param {AmqpError | Error} [senderError] The sender error if any.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">208</td>
	<td class="source"><code>   * @returns {Promise&#60;void&#62;} Promise&#60;void&#62;.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">209</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">210</td>
	<td class="source"><code>  async detached(senderError?: AmqpError | Error): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">211</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">212</td>
	<td class="source"><code>      const wasCloseInitiated = this._sender && this._sender.isItselfClosed();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">213</td>
	<td class="source"><code>      // Clears the token renewal timer. Closes the link and its session if they are open.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">214</td>
	<td class="source"><code>      // Removes the link and its session if they are present in rhea's cache.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">215</td>
	<td class="source"><code>      await this._closeLink(this._sender);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">216</td>
	<td class="source"><code>      // We should attempt to reopen only when the sender(sdk) did not initiate the close</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">217</td>
	<td class="source"><code>      let shouldReopen = false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">218</td>
	<td class="source"><code>      if (senderError && !wasCloseInitiated) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">219</td>
	<td class="source"><code>        const translatedError = translate(senderError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">220</td>
	<td class="source"><code>        if (translatedError.retryable) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">221</td>
	<td class="source"><code>          shouldReopen = true;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">222</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">223</td>
	<td class="source"><code>            "[%s] close() method of Sender '%s' with address '%s' was not called. There " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">224</td>
	<td class="source"><code>              "was an accompanying error an it is retryable. This is a candidate for re-establishing " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">225</td>
	<td class="source"><code>              "the sender link.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">226</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">227</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">228</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">229</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">230</td>
	<td class="source"><code>        } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">231</td>
	<td class="source"><code>          log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">232</td>
	<td class="source"><code>            "[%s] close() method of Sender '%s' with address '%s' was not called. There " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">233</td>
	<td class="source"><code>              "was an accompanying error and it is NOT retryable. Hence NOT re-establishing " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">234</td>
	<td class="source"><code>              "the sender link.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">235</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">236</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">237</td>
	<td class="source"><code>            this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">238</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">239</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">240</td>
	<td class="source"><code>      } else if (!wasCloseInitiated) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">241</td>
	<td class="source"><code>        shouldReopen = true;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">242</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">243</td>
	<td class="source"><code>          "[%s] close() method of Sender '%s' with address '%s' was not called. There " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">244</td>
	<td class="source"><code>            "was no accompanying error as well. This is a candidate for re-establishing " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">245</td>
	<td class="source"><code>            "the sender link.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">246</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">247</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">248</td>
	<td class="source"><code>          this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">249</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">250</td>
	<td class="source"><code>      } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">251</td>
	<td class="source"><code>        const state: any = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">252</td>
	<td class="source"><code>          wasCloseInitiated: wasCloseInitiated,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">253</td>
	<td class="source"><code>          senderError: senderError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">254</td>
	<td class="source"><code>          _sender: this._sender</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">255</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">256</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">257</td>
	<td class="source"><code>          "[%s] Something went wrong. State of sender '%s' with address '%s' is: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">258</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">259</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">260</td>
	<td class="source"><code>          this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">261</td>
	<td class="source"><code>          state</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">262</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">263</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">264</td>
	<td class="source"><code>      if (shouldReopen) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">265</td>
	<td class="source"><code>        await defaultLock.acquire(this.senderLock, () =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">266</td>
	<td class="source"><code>          const options: SenderOptions = this._createSenderOptions({</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">267</td>
	<td class="source"><code>            newName: true</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">268</td>
	<td class="source"><code>          });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">269</td>
	<td class="source"><code>          // shall retry forever at an interval of 15 seconds if the error is a retryable error</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">270</td>
	<td class="source"><code>          // else bail out when the error is not retryable or the oepration succeeds.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">271</td>
	<td class="source"><code>          const config: RetryConfig&#60;void&#62; = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">272</td>
	<td class="source"><code>            operation: () =&#62; this._init(options),</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">273</td>
	<td class="source"><code>            connectionId: this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">274</td>
	<td class="source"><code>            operationType: RetryOperationType.senderLink,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">275</td>
	<td class="source"><code>            times: Constants.defaultConnectionRetryAttempts,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">276</td>
	<td class="source"><code>            connectionHost: this._context.config.host,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">277</td>
	<td class="source"><code>            delayInSeconds: 15</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">278</td>
	<td class="source"><code>          };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">279</td>
	<td class="source"><code>          return retry&#60;void&#62;(config);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">280</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">281</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">282</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">283</td>
	<td class="source"><code>      log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">284</td>
	<td class="source"><code>        "[%s] An error occurred while processing detached() of Sender '%s' with address " + "'%s': %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">285</td>
	<td class="source"><code>        this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">286</td>
	<td class="source"><code>        this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">287</td>
	<td class="source"><code>        this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">288</td>
	<td class="source"><code>        err</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">289</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">290</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">291</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">292</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">293</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">294</td>
	<td class="source"><code>   * Deletes the sender fromt the context. Clears the token renewal timer. Closes the sender link.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">295</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">296</td>
	<td class="source"><code>   * @return {Promise&#60;void&#62;} Promise&#60;void&#62;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">297</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">298</td>
	<td class="source"><code>  async close(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">299</td>
	<td class="source"><code>    if (this._sender) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">300</td>
	<td class="source"><code>      const senderLink = this._sender;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">301</td>
	<td class="source"><code>      this._deleteFromCache();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">302</td>
	<td class="source"><code>      await this._closeLink(senderLink);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">303</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">304</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">305</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">306</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">307</td>
	<td class="source"><code>   * Determines whether the AMQP sender link is open. If open then returns true else returns false.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">308</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">309</td>
	<td class="source"><code>   * @return {boolean} boolean</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">310</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">311</td>
	<td class="source"><code>  isOpen(): boolean {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">312</td>
	<td class="source"><code>    const result: boolean = this._sender! && this._sender!.isOpen();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">313</td>
	<td class="source"><code>    log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">314</td>
	<td class="source"><code>      "[%s] Sender '%s' with address '%s' is open? -&#62; %s",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">315</td>
	<td class="source"><code>      this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">316</td>
	<td class="source"><code>      this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">317</td>
	<td class="source"><code>      this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">318</td>
	<td class="source"><code>      result</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">319</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">320</td>
	<td class="source"><code>    return result;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">321</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">322</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">323</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">324</td>
	<td class="source"><code>   * Sends the given message, with the given options on this link</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">325</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">326</td>
	<td class="source"><code>   * @param {any} data Message to send.  Will be sent as UTF8-encoded JSON string.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">327</td>
	<td class="source"><code>   * @returns {Promise&#60;Delivery&#62;} Promise&#60;Delivery&#62;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">328</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">329</td>
	<td class="source"><code>  async send(data: EventData): Promise&#60;Delivery&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">330</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">331</td>
	<td class="source"><code>      if (!data || (data && typeof data !== "object")) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">332</td>
	<td class="source"><code>        throw new Error("data is required and it must be of type object.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">333</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">334</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">335</td>
	<td class="source"><code>      if (data.partitionKey && typeof data.partitionKey !== "string") {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">336</td>
	<td class="source"><code>        throw new Error("'partitionKey' must be of type 'string'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">337</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">338</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">339</td>
	<td class="source"><code>      if (!this.isOpen()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">340</td>
	<td class="source"><code>        log.sender(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">341</td>
	<td class="source"><code>          "Acquiring lock %s for initializing the session, sender and " + "possibly the connection.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">342</td>
	<td class="source"><code>          this.senderLock</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">343</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">344</td>
	<td class="source"><code>        await defaultLock.acquire(this.senderLock, () =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">345</td>
	<td class="source"><code>          return this._init();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">346</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">347</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">348</td>
	<td class="source"><code>      const message = EventData.toAmqpMessage(data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">349</td>
	<td class="source"><code>      message.body = this._context.dataTransformer.encode(data.body);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">350</td>
	<td class="source"><code>      return await this._trySend(message, message.message_id);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">351</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">352</td>
	<td class="source"><code>      log.error("An error occurred while sending the message %O", err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">353</td>
	<td class="source"><code>      throw err;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">354</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">355</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">356</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">357</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">358</td>
	<td class="source"><code>   * Send a batch of EventData to the EventHub. The "message_annotations",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">359</td>
	<td class="source"><code>   * "application_properties" and "properties" of the first message will be set as that</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">360</td>
	<td class="source"><code>   * of the envelope (batch message).</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">361</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">362</td>
	<td class="source"><code>   * @param {Array&#60;EventData&#62;} datas  An array of EventData objects to be sent in a Batch message.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">363</td>
	<td class="source"><code>   * @return {Promise&#60;Delivery&#62;} Promise&#60;Delivery&#62;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">364</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">365</td>
	<td class="source"><code>  async sendBatch(datas: EventData[]): Promise&#60;Delivery&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">366</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">367</td>
	<td class="source"><code>      if (!datas || (datas && !Array.isArray(datas))) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">368</td>
	<td class="source"><code>        throw new Error("data is required and it must be an Array.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">369</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">370</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">371</td>
	<td class="source"><code>      if (!this.isOpen()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">372</td>
	<td class="source"><code>        log.sender(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">373</td>
	<td class="source"><code>          "Acquiring lock %s for initializing the session, sender and " + "possibly the connection.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">374</td>
	<td class="source"><code>          this.senderLock</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">375</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">376</td>
	<td class="source"><code>        await defaultLock.acquire(this.senderLock, () =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">377</td>
	<td class="source"><code>          return this._init();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">378</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">379</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">380</td>
	<td class="source"><code>      log.sender("[%s] Sender '%s', trying to send EventData[].", this._context.connectionId, this.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">381</td>
	<td class="source"><code>      const messages: AmqpMessage[] = [];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">382</td>
	<td class="source"><code>      // Convert EventData to AmqpMessage.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">383</td>
	<td class="source"><code>      for (let i = 0; i &#60; datas.length; i++) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">384</td>
	<td class="source"><code>        const message = EventData.toAmqpMessage(datas[i]);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">385</td>
	<td class="source"><code>        message.body = this._context.dataTransformer.encode(datas[i].body);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">386</td>
	<td class="source"><code>        messages[i] = message;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">387</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">388</td>
	<td class="source"><code>      // Encode every amqp message and then convert every encoded message to amqp data section</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">389</td>
	<td class="source"><code>      const batchMessage: AmqpMessage = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">390</td>
	<td class="source"><code>        body: message.data_sections(messages.map(message.encode))</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">391</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">392</td>
	<td class="source"><code>      // Set message_annotations, application_properties and properties of the first message as</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">393</td>
	<td class="source"><code>      // that of the envelope (batch message).</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">394</td>
	<td class="source"><code>      if (messages[0].message_annotations) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">395</td>
	<td class="source"><code>        batchMessage.message_annotations = messages[0].message_annotations;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">396</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">397</td>
	<td class="source"><code>      if (messages[0].application_properties) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">398</td>
	<td class="source"><code>        batchMessage.application_properties = messages[0].application_properties;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">399</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">400</td>
	<td class="source"><code>      for (const prop of messageProperties) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">401</td>
	<td class="source"><code>        if ((messages[0] as any)[prop]) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">402</td>
	<td class="source"><code>          (batchMessage as any)[prop] = (messages[0] as any)[prop];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">403</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">404</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">405</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">406</td>
	<td class="source"><code>      // Finally encode the envelope (batch message).</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">407</td>
	<td class="source"><code>      const encodedBatchMessage = message.encode(batchMessage);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">408</td>
	<td class="source"><code>      log.sender(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">409</td>
	<td class="source"><code>        "[%s] Sender '%s', sending encoded batch message.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">410</td>
	<td class="source"><code>        this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">411</td>
	<td class="source"><code>        this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">412</td>
	<td class="source"><code>        encodedBatchMessage</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">413</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">414</td>
	<td class="source"><code>      return await this._trySend(encodedBatchMessage, batchMessage.message_id, 0x80013700);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">415</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">416</td>
	<td class="source"><code>      log.error("An error occurred while sending the batch message %O", err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">417</td>
	<td class="source"><code>      throw err;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">418</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">419</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">420</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 421, Column 3: "Member _deleteFromCache should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">421</td>
	<td class="source"><code>  private _deleteFromCache(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">422</td>
	<td class="source"><code>    this._sender = undefined;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">423</td>
	<td class="source"><code>    delete this._context.senders[this.address];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">424</td>
	<td class="source"><code>    log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">425</td>
	<td class="source"><code>      "[%s] Deleted the sender '%s' with address '%s' from the client cache.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">426</td>
	<td class="source"><code>      this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">427</td>
	<td class="source"><code>      this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">428</td>
	<td class="source"><code>      this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">429</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">430</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">431</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 432, Column 3: "Member _createSenderOptions should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">432</td>
	<td class="source"><code>  private _createSenderOptions(options: CreateSenderOptions): SenderOptions {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">433</td>
	<td class="source"><code>    if (options.newName) this.name = `${uuid()}`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">434</td>
	<td class="source"><code>    const srOptions: SenderOptions = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">435</td>
	<td class="source"><code>      name: this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">436</td>
	<td class="source"><code>      target: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">437</td>
	<td class="source"><code>        address: this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">438</td>
	<td class="source"><code>      },</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">439</td>
	<td class="source"><code>      onError: this._onAmqpError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">440</td>
	<td class="source"><code>      onClose: this._onAmqpClose,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">441</td>
	<td class="source"><code>      onSessionError: this._onSessionError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">442</td>
	<td class="source"><code>      onSessionClose: this._onSessionClose</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">443</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">444</td>
	<td class="source"><code>    log.sender("Creating sender with options: %O", srOptions);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">445</td>
	<td class="source"><code>    return srOptions;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">446</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">447</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">448</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">449</td>
	<td class="source"><code>   * Tries to send the message to EventHub if there is enough credit to send them</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">450</td>
	<td class="source"><code>   * and the circular buffer has available space to settle the message after sending them.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">451</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">452</td>
	<td class="source"><code>   * We have implemented a synchronous send over here in the sense that we shall be waiting</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">453</td>
	<td class="source"><code>   * for the message to be accepted or rejected and accordingly resolve or reject the promise.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">454</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">455</td>
	<td class="source"><code>   * @param message The message to be sent to EventHub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">456</td>
	<td class="source"><code>   * @return {Promise&#60;Delivery&#62;} Promise&#60;Delivery&#62;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">457</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 458, Column 3: "Member _trySend should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">458</td>
	<td class="source"><code>  private _trySend(message: AmqpMessage | Buffer, tag: any, format?: number): Promise&#60;Delivery&#62; {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 459, Column 30: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">459</td>
	<td class="source"><code>    const sendEventPromise = () =&#62;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">460</td>
	<td class="source"><code>      new Promise&#60;Delivery&#62;((resolve, reject) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">461</td>
	<td class="source"><code>        let waitTimer: any;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">462</td>
	<td class="source"><code>        log.sender(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">463</td>
	<td class="source"><code>          "[%s] Sender '%s', credit: %d available: %d",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">464</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">465</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">466</td>
	<td class="source"><code>          this._sender!.credit,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">467</td>
	<td class="source"><code>          this._sender!.session.outgoing.available()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">468</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">469</td>
	<td class="source"><code>        if (this._sender!.sendable()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">470</td>
	<td class="source"><code>          log.sender(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">471</td>
	<td class="source"><code>            "[%s] Sender '%s', sending message with id '%s'.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">472</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">473</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">474</td>
	<td class="source"><code>            (Buffer.isBuffer(message) ? tag : message.message_id) || tag || "&#60;not specified&#62;"</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">475</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 476, Column 15: "'onRejected' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">476</td>
	<td class="source"><code>          let onRejected: Func&#60;EventContext, void&#62;;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 477, Column 15: "'onReleased' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">477</td>
	<td class="source"><code>          let onReleased: Func&#60;EventContext, void&#62;;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 478, Column 15: "'onModified' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">478</td>
	<td class="source"><code>          let onModified: Func&#60;EventContext, void&#62;;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 479, Column 15: "'onAccepted' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">479</td>
	<td class="source"><code>          let onAccepted: Func&#60;EventContext, void&#62;;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">480</td>
	<td class="source"><code>          const removeListeners = (): void =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">481</td>
	<td class="source"><code>            clearTimeout(waitTimer);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">482</td>
	<td class="source"><code>            this._sender!.removeListener(SenderEvents.rejected, onRejected);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">483</td>
	<td class="source"><code>            this._sender!.removeListener(SenderEvents.accepted, onAccepted);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">484</td>
	<td class="source"><code>            this._sender!.removeListener(SenderEvents.released, onReleased);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">485</td>
	<td class="source"><code>            this._sender!.removeListener(SenderEvents.modified, onModified);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">486</td>
	<td class="source"><code>          };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">487</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">488</td>
	<td class="source"><code>          onAccepted = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">489</td>
	<td class="source"><code>            // Since we will be adding listener for accepted and rejected event every time</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">490</td>
	<td class="source"><code>            // we send a message, we need to remove listener for both the events.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">491</td>
	<td class="source"><code>            // This will ensure duplicate listeners are not added for the same event.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">492</td>
	<td class="source"><code>            removeListeners();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">493</td>
	<td class="source"><code>            log.sender("[%s] Sender '%s', got event accepted.", this._context.connectionId, this.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">494</td>
	<td class="source"><code>            resolve(context.delivery);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">495</td>
	<td class="source"><code>          };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">496</td>
	<td class="source"><code>          onRejected = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">497</td>
	<td class="source"><code>            removeListeners();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">498</td>
	<td class="source"><code>            log.error("[%s] Sender '%s', got event rejected.", this._context.connectionId, this.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">499</td>
	<td class="source"><code>            const err = translate(context!.delivery!.remote_state!.error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">500</td>
	<td class="source"><code>            log.error(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">501</td>
	<td class="source"><code>            reject(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">502</td>
	<td class="source"><code>          };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">503</td>
	<td class="source"><code>          onReleased = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">504</td>
	<td class="source"><code>            removeListeners();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">505</td>
	<td class="source"><code>            log.error("[%s] Sender '%s', got event released.", this._context.connectionId, this.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">506</td>
	<td class="source"><code>            let err: Error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">507</td>
	<td class="source"><code>            if (context!.delivery!.remote_state!.error) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">508</td>
	<td class="source"><code>              err = translate(context!.delivery!.remote_state!.error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">509</td>
	<td class="source"><code>            } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">510</td>
	<td class="source"><code>              err = new Error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">511</td>
	<td class="source"><code>                `[${this._context.connectionId}] Sender '${this.name}', ` +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">512</td>
	<td class="source"><code>                  `received a release disposition.Hence we are rejecting the promise.`</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">513</td>
	<td class="source"><code>              );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">514</td>
	<td class="source"><code>            }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">515</td>
	<td class="source"><code>            log.error(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">516</td>
	<td class="source"><code>            reject(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">517</td>
	<td class="source"><code>          };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">518</td>
	<td class="source"><code>          onModified = (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">519</td>
	<td class="source"><code>            removeListeners();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">520</td>
	<td class="source"><code>            log.error("[%s] Sender '%s', got event modified.", this._context.connectionId, this.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">521</td>
	<td class="source"><code>            let err: Error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">522</td>
	<td class="source"><code>            if (context!.delivery!.remote_state!.error) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">523</td>
	<td class="source"><code>              err = translate(context!.delivery!.remote_state!.error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">524</td>
	<td class="source"><code>            } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">525</td>
	<td class="source"><code>              err = new Error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">526</td>
	<td class="source"><code>                `[${this._context.connectionId}] Sender "${this.name}", ` +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">527</td>
	<td class="source"><code>                  `received a modified disposition.Hence we are rejecting the promise.`</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">528</td>
	<td class="source"><code>              );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">529</td>
	<td class="source"><code>            }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">530</td>
	<td class="source"><code>            log.error(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">531</td>
	<td class="source"><code>            reject(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">532</td>
	<td class="source"><code>          };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">533</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 534, Column 38: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">534</td>
	<td class="source"><code>          const actionAfterTimeout = () =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">535</td>
	<td class="source"><code>            removeListeners();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">536</td>
	<td class="source"><code>            const desc: string =</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">537</td>
	<td class="source"><code>              `[${this._context.connectionId}] Sender "${this.name}" with ` +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">538</td>
	<td class="source"><code>              `address "${this.address}", was not able to send the message right now, due ` +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">539</td>
	<td class="source"><code>              `to operation timeout.`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">540</td>
	<td class="source"><code>            log.error(desc);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">541</td>
	<td class="source"><code>            const e: AmqpError = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">542</td>
	<td class="source"><code>              condition: ErrorNameConditionMapper.ServiceUnavailableError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">543</td>
	<td class="source"><code>              description: desc</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">544</td>
	<td class="source"><code>            };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">545</td>
	<td class="source"><code>            return reject(translate(e));</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">546</td>
	<td class="source"><code>          };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">547</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">548</td>
	<td class="source"><code>          this._sender!.on(SenderEvents.accepted, onAccepted);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">549</td>
	<td class="source"><code>          this._sender!.on(SenderEvents.rejected, onRejected);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">550</td>
	<td class="source"><code>          this._sender!.on(SenderEvents.modified, onModified);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">551</td>
	<td class="source"><code>          this._sender!.on(SenderEvents.released, onReleased);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">552</td>
	<td class="source"><code>          waitTimer = setTimeout(actionAfterTimeout, Constants.defaultOperationTimeoutInSeconds * 1000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">553</td>
	<td class="source"><code>          const delivery = this._sender!.send(message, tag, format);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">554</td>
	<td class="source"><code>          log.sender(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">555</td>
	<td class="source"><code>            "[%s] Sender '%s', sent message with delivery id: %d and tag: %s",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">556</td>
	<td class="source"><code>            this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">557</td>
	<td class="source"><code>            this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">558</td>
	<td class="source"><code>            delivery.id,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">559</td>
	<td class="source"><code>            delivery.tag.toString()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">560</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">561</td>
	<td class="source"><code>        } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">562</td>
	<td class="source"><code>          // let us retry to send the message after some time.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">563</td>
	<td class="source"><code>          const msg =</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">564</td>
	<td class="source"><code>            `[${this._context.connectionId}] Sender "${this.name}", ` +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">565</td>
	<td class="source"><code>            `cannot send the message right now. Please try later.`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">566</td>
	<td class="source"><code>          log.error(msg);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">567</td>
	<td class="source"><code>          const amqpError: AmqpError = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">568</td>
	<td class="source"><code>            condition: ErrorNameConditionMapper.SenderBusyError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">569</td>
	<td class="source"><code>            description: msg</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">570</td>
	<td class="source"><code>          };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">571</td>
	<td class="source"><code>          reject(translate(amqpError));</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">572</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">573</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">574</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">575</td>
	<td class="source"><code>    const jitterInSeconds = randomNumberFromInterval(1, 4);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">576</td>
	<td class="source"><code>    const config: RetryConfig&#60;Delivery&#62; = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">577</td>
	<td class="source"><code>      operation: sendEventPromise,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">578</td>
	<td class="source"><code>      connectionId: this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">579</td>
	<td class="source"><code>      operationType: RetryOperationType.sendMessage,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">580</td>
	<td class="source"><code>      times: Constants.defaultRetryAttempts,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">581</td>
	<td class="source"><code>      delayInSeconds: Constants.defaultDelayBetweenOperationRetriesInSeconds + jitterInSeconds</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">582</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">583</td>
	<td class="source"><code>    return retry&#60;Delivery&#62;(config);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">584</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">585</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">586</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">587</td>
	<td class="source"><code>   * Initializes the sender session on the connection.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">588</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">589</td>
	<td class="source"><code>   * @returns {Promise&#60;void&#62;}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">590</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 591, Column 3: "Member _init should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">591</td>
	<td class="source"><code>  private async _init(options?: SenderOptions): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">592</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">593</td>
	<td class="source"><code>      // isOpen isConnecting  Should establish</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">594</td>
	<td class="source"><code>      // true     false          No</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">595</td>
	<td class="source"><code>      // true     true           No</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">596</td>
	<td class="source"><code>      // false    true           No</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">597</td>
	<td class="source"><code>      // false    false          Yes</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">598</td>
	<td class="source"><code>      if (!this.isOpen() && !this.isConnecting) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">599</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">600</td>
	<td class="source"><code>          "[%s] The sender '%s' with address '%s' is not open and is not currently " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">601</td>
	<td class="source"><code>            "establishing itself. Hence let's try to connect.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">602</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">603</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">604</td>
	<td class="source"><code>          this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">605</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">606</td>
	<td class="source"><code>        this.isConnecting = true;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">607</td>
	<td class="source"><code>        await this._negotiateClaim();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">608</td>
	<td class="source"><code>        log.error("[%s] Trying to create sender '%s'...", this._context.connectionId, this.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">609</td>
	<td class="source"><code>        if (!options) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">610</td>
	<td class="source"><code>          options = this._createSenderOptions({});</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">611</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">612</td>
	<td class="source"><code>        this._sender = await this._context.connection.createSender(options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">613</td>
	<td class="source"><code>        this.isConnecting = false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">614</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">615</td>
	<td class="source"><code>          "[%s] Sender '%s' with address '%s' has established itself.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">616</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">617</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">618</td>
	<td class="source"><code>          this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">619</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">620</td>
	<td class="source"><code>        this._sender.setMaxListeners(1000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">621</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">622</td>
	<td class="source"><code>          "[%s] Promise to create the sender resolved. Created sender with name: %s",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">623</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">624</td>
	<td class="source"><code>          this.name</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">625</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">626</td>
	<td class="source"><code>        log.error("[%s] Sender '%s' created with sender options: %O", this._context.connectionId, this.name, options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">627</td>
	<td class="source"><code>        // It is possible for someone to close the sender and then start it again.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">628</td>
	<td class="source"><code>        // Thus make sure that the sender is present in the client cache.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">629</td>
	<td class="source"><code>        if (!this._context.senders[this.address]) this._context.senders[this.address] = this;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">630</td>
	<td class="source"><code>        await this._ensureTokenRenewal();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">631</td>
	<td class="source"><code>      } else {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">632</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">633</td>
	<td class="source"><code>          "[%s] The sender '%s' with address '%s' is open -&#62; %s and is connecting " + "-&#62; %s. Hence not reconnecting.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">634</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">635</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">636</td>
	<td class="source"><code>          this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">637</td>
	<td class="source"><code>          this.isOpen(),</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">638</td>
	<td class="source"><code>          this.isConnecting</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">639</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">640</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">641</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">642</td>
	<td class="source"><code>      this.isConnecting = false;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 643, Column 7: "Do not assign to the exception parameter."
		<a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">643</td>
	<td class="source"><code>      err = translate(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">644</td>
	<td class="source"><code>      log.error("[%s] An error occurred while creating the sender %s", this._context.connectionId, this.name, err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">645</td>
	<td class="source"><code>      throw err;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">646</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">647</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">648</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">649</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">650</td>
	<td class="source"><code>   * Creates a new sender to the given event hub, and optionally to a given partition if it is</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">651</td>
	<td class="source"><code>   * not present in the context or returns the one present in the context.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">652</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">653</td>
	<td class="source"><code>   * @static</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">654</td>
	<td class="source"><code>   * @param {(string|number)} [partitionId] Partition ID to which it will send event data.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">655</td>
	<td class="source"><code>   * @returns {Promise&#60;EventHubSender&#62;}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">656</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">657</td>
	<td class="source"><code>  static create(context: ConnectionContext, partitionId?: string | number): EventHubSender {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">658</td>
	<td class="source"><code>    if (partitionId && typeof partitionId !== "string" && typeof partitionId !== "number") {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">659</td>
	<td class="source"><code>      throw new Error("'partitionId' must be of type: 'string' | 'number'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">660</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">661</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">662</td>
	<td class="source"><code>    const ehSender: EventHubSender = new EventHubSender(context, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">663</td>
	<td class="source"><code>    if (!context.senders[ehSender.address]) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">664</td>
	<td class="source"><code>      context.senders[ehSender.address] = ehSender;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">665</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">666</td>
	<td class="source"><code>    return context.senders[ehSender.address];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">667</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">668</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">669</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcEventPositionTs" class="lint-result bg-error" data-group="f-6" data-problem-count="6" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\eventPosition.ts
    </th>
    <th class="result-summary">
      6 problems (6 errors, 0 warnings)
    </th>
</tr>
<tr class="f-6 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-6"
								data-content="detailSummary-6"
								aria-controls="detailSummary-6"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-6"
								data-content="sourceCode-6"
								aria-controls="sourceCode-6"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-6">
				<div class="row"></div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 102, Column 21: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 106, Column 36: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 110, Column 34: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 113, Column 34: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 150, Column 24: "Expected '===' and instead saw '=='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 163, Column 22: "Expected '===' and instead saw '=='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-6">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import { translate, Constants, ErrorNameConditionMapper } from "@azure/amqp-common";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code> * Describes the options that can be set while creating an EventPosition.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code> * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code> * @interface EventPositionOptions</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code>export interface EventPositionOptions {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code>   * @property {string} [offset] The offset of the event at the position. It can be undefined</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>   * if the position is just created from a sequence number or an enqueued time.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code>  offset?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code>   * @property {boolean} isInclusive Indicates if the current event at the specified offset is</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code>   * included or not. It is only applicable if offset is set. Default value: false.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>  isInclusive?: boolean;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code>   * @property {Date|number} [enqueuedTime] The enqueued time of the event at the position. It can be undefined</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code>   * if the position is just created from a sequence number or an offset.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code>  enqueuedTime?: Date | number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>   * @property {number} [sequenceNumber] The sequence number of the event at the position. It can be undefined</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code>   * if the position is just created from an enqueued time or an offset.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code>  sequenceNumber?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>   * @property {string} [customFilter] The custom filter expression that needs to be set on the receiver.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>  customFilter?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code> * Represents options can be set during the creation of a event hub receiver.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code> * Defines a position of an @link~EventData in the event hub partition.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code> * @class EventPosition</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code>export class EventPosition {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>   * @property {string} startOfStream The offset from which events would be received: `"-1"`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>   * @static</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>   * @readonly</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>  static readonly startOfStream: string = "-1";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code>   * @property {string} endOfStream The offset from which events would be received: `"@latest"`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">54</td>
	<td class="source"><code>   * @static</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>   * @readonly</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>  static readonly endOfStream: string = "@latest";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>   * @property {string} [offset] The offset of the event at the position. It can be undefined</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>   * if the position is just created from a sequence number or an enqueued time.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>  offset?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">64</td>
	<td class="source"><code>   * @property {boolean} isInclusive Indicates if the current event at the specified offset is</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code>   * included or not. It is only applicable if offset is set. Default value: false.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>  isInclusive: boolean = false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code>   * @property {Date|number} [enqueuedTime] The enqueued time of the event at the position. It can be undefined</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code>   * if the position is just created from a sequence number or an offset.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code>  enqueuedTime?: Date | number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>   * @property {number} [sequenceNumber] The sequence number of the event at the position. It can be undefined</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code>   * if the position is just created from an enqueued time or an offset.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code>  sequenceNumber?: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code>   * @property {string} [customFilter] The custom filter expression that needs to be set on the receiver.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code>  customFilter?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>  constructor(options?: EventPositionOptions) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>    if (options) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>      this.offset = options.offset;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>      this.enqueuedTime = options.enqueuedTime;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>      this.sequenceNumber = options.sequenceNumber;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>      this.isInclusive = options.isInclusive || false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>      this.customFilter = options.customFilter;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>   * Gets the expression (filter clause) that needs to be set on the source.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code>   * @return {string} filterExpression</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code>  getExpression(): string {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>    let result;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>    // order of preference</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 102, Column 21: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">102</td>
	<td class="source"><code>    if (this.offset != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code>      result = this.isInclusive</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>        ? `${Constants.offsetAnnotation} &#62;= '${this.offset}'`</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>        : `${Constants.offsetAnnotation} &#62; '${this.offset}'`;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 106, Column 36: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">106</td>
	<td class="source"><code>    } else if (this.sequenceNumber != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>      result = this.isInclusive</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>        ? `${Constants.sequenceNumberAnnotation} &#62;= '${this.sequenceNumber}'`</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code>        : `${Constants.sequenceNumberAnnotation} &#62; '${this.sequenceNumber}'`;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 110, Column 34: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">110</td>
	<td class="source"><code>    } else if (this.enqueuedTime != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code>      const time = this.enqueuedTime instanceof Date ? this.enqueuedTime.getTime() : this.enqueuedTime;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code>      result = `${Constants.enqueuedTimeAnnotation} &#62; '${time}'`;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 113, Column 34: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">113</td>
	<td class="source"><code>    } else if (this.customFilter != undefined) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code>      result = this.customFilter;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">117</td>
	<td class="source"><code>    if (!result) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>      throw translate({</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>        condition: ErrorNameConditionMapper.ArgumentError,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code>        description: "No starting position was set in the EventPosition."</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code>    return result;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code>   * Creates a position at the given offset.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>   * @param {string} offset The offset of the data relative to the Event Hub partition stream.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code>   * The offset is a marker or identifier for an event within the Event Hubs stream.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">130</td>
	<td class="source"><code>   * The identifier is unique within a partition of the Event Hubs stream.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code>   * @param {boolean} isInclusive If true, the specified event is included;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code>   * otherwise the next event is returned. Default: false.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">133</td>
	<td class="source"><code>   * @return {EventPosition} EventPosition</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code>  static fromOffset(offset: string, isInclusive?: boolean): EventPosition {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code>    if (!offset || typeof offset !== "string") {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code>      throw new Error("'offset' is a required parameter and must be a non-empty string.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code>    return new EventPosition({ offset: offset, isInclusive: isInclusive });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">142</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">143</td>
	<td class="source"><code>   * Creates a position at the given sequence number.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">144</td>
	<td class="source"><code>   * @param {number} sequenceNumber The logical sequence number of the event within the partition stream of the Event Hub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">145</td>
	<td class="source"><code>   * @param {boolean} isInclusive If true, the specified event is included;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">146</td>
	<td class="source"><code>   * otherwise the next event is returned. Default false.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">147</td>
	<td class="source"><code>   * @return {EventPosition} EventPosition</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">148</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">149</td>
	<td class="source"><code>  static fromSequenceNumber(sequenceNumber: number, isInclusive?: boolean): EventPosition {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 150, Column 24: "Expected '===' and instead saw '=='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">150</td>
	<td class="source"><code>    if (sequenceNumber == undefined || typeof sequenceNumber !== "number") {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">151</td>
	<td class="source"><code>      throw new Error("'sequenceNumber' is a required parameter and must be of type 'number'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">152</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">153</td>
	<td class="source"><code>    return new EventPosition({ sequenceNumber: sequenceNumber, isInclusive: isInclusive });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">154</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">155</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">156</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">157</td>
	<td class="source"><code>   * Creates a position at the given enqueued time.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">158</td>
	<td class="source"><code>   * @param {Date | number} enqueuedTime The enqueue time. This value represents the actual time of enqueuing the message.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">159</td>
	<td class="source"><code>   * @param {boolean} isInclusive If true, the specified event is included; otherwise the next event is returned.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">160</td>
	<td class="source"><code>   * @return {EventPosition} EventPosition</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">161</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">162</td>
	<td class="source"><code>  static fromEnqueuedTime(enqueuedTime: Date | number): EventPosition {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 163, Column 22: "Expected '===' and instead saw '=='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">163</td>
	<td class="source"><code>    if (enqueuedTime == undefined || (typeof enqueuedTime !== "number" && !(enqueuedTime instanceof Date))) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">164</td>
	<td class="source"><code>      throw new Error("'enqueuedTime' is a required parameter and must be an instance of 'Date' or of type 'number'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">165</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">166</td>
	<td class="source"><code>    return new EventPosition({ enqueuedTime: enqueuedTime });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">167</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">168</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">169</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">170</td>
	<td class="source"><code>   * Creates a position based on the given custom filter.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">171</td>
	<td class="source"><code>   * @param {string} customFilter The cutom filter expression that needs to be applied on the receiver. This should be used</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">172</td>
	<td class="source"><code>   * only when one of the other methods `fromOffset()`, `fromSequenceNumber()`, `fromEnqueuedTime()` is not applicable for</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">173</td>
	<td class="source"><code>   * your scenario.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">174</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">175</td>
	<td class="source"><code>  static withCustomFilter(customFilter: string): EventPosition {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">176</td>
	<td class="source"><code>    if (!customFilter || typeof customFilter !== "string") {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">177</td>
	<td class="source"><code>      throw new Error("'customFilter' is a required parameter and must be a non-empty string.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">178</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">179</td>
	<td class="source"><code>    return new EventPosition({ customFilter: customFilter });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">180</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">181</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">182</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">183</td>
	<td class="source"><code>   * Returns the position for the start of a stream. Provide this position in receiver creation to</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">184</td>
	<td class="source"><code>   * start receiving from the first available event in the partition.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">185</td>
	<td class="source"><code>   * @return {EventPosition} EventPosition</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">186</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">187</td>
	<td class="source"><code>  static fromStart(): EventPosition {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">188</td>
	<td class="source"><code>    return EventPosition.fromOffset(EventPosition.startOfStream);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">189</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">190</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">191</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">192</td>
	<td class="source"><code>   * Returns the position for the end of a stream. Provide this position in receiver creation to</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">193</td>
	<td class="source"><code>   * start receiving from the next available event in the partition after the receiver is created.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">194</td>
	<td class="source"><code>   * @return {EventPosition} EventPosition</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">195</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">196</td>
	<td class="source"><code>  static fromEnd(): EventPosition {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">197</td>
	<td class="source"><code>    return EventPosition.fromOffset(EventPosition.endOfStream);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">198</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">199</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">200</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcIndexTs" class="lint-result bg-success" data-group="f-7" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\index.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcIothubIothubClientTs" class="lint-result bg-error" data-group="f-8" data-problem-count="4" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\iothub\iothubClient.ts
    </th>
    <th class="result-summary">
      4 problems (4 errors, 0 warnings)
    </th>
</tr>
<tr class="f-8 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-8"
								data-content="detailSummary-8"
								aria-controls="detailSummary-8"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-8"
								data-content="sourceCode-8"
								aria-controls="sourceCode-8"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-8">
				<div class="row"></div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 103, Column 3: "Member _parseRedirectError should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 117, Column 22: "Expected '===' and instead saw '=='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 117, Column 71: "Expected '===' and instead saw '=='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 130, Column 3: "Member _buildConnectionString should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-8">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import { translate, MessagingError, IotSasTokenProvider } from "@azure/amqp-common";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>import { IotHubConnectionConfig } from "@azure/amqp-common";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>import { ConnectionContext, ConnectionContextOptions } from "../connectionContext";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>import * as log from "../log";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code> * @interface ParsedRedirectError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code> * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code>export interface ParsedRedirectError {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>  endpoint: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code>  entityPath: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code> * @interface EHConfig</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code> * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>export interface EHConfig extends ParsedRedirectError {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>  sharedAccessKey: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code>  sharedAccessKeyName: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code> * @class IotHubClient</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code> * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>export class IotHubClient {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code>   * @property {string} connectionString the IotHub connection string.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code>  connectionString: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>  constructor(connectionString: string) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code>    this.connectionString = connectionString;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code>   * Constructs the EventHub connection string by catching the redirect error and parsing the error</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code>   * information.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code>   * @param {ConnectionContextOptions} [options] optional parameters to be provided while creating</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>   * the connection context.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code>   * @return {Promise&#60;string&#62;} Promise&#60;string&#62;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code>  async getEventHubConnectionString(options?: ConnectionContextOptions): Promise&#60;string&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>    const iothubconfig = IotHubConnectionConfig.create(this.connectionString);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>    const config = IotHubConnectionConfig.convertToEventHubConnectionConfig(iothubconfig);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>    let result: string = "";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code>    if (!options) options = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>    options.tokenProvider = new IotSasTokenProvider(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code>      config.endpoint,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code>      config.sharedAccessKeyName,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">54</td>
	<td class="source"><code>      config.sharedAccessKey</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code>    options.managementSessionAddress = `/messages/events/$management`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>    const context = ConnectionContext.create(config, options);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>      log.iotClient("Getting the hub runtime info from the iothub connection string to get the redirect error.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>      await context.managementSession!.getHubRuntimeInformation();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>      const error = translate(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code>      log.error("IotHubClient received the error: %O", error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">64</td>
	<td class="source"><code>      const parsedInfo: ParsedRedirectError = this._parseRedirectError(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code>      log.error("Parsed info from redirect error is: %O", parsedInfo);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>      result = this._buildConnectionString({</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>        sharedAccessKey: config.sharedAccessKey,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>        sharedAccessKeyName: config.sharedAccessKeyName,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code>        endpoint: parsedInfo.endpoint,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code>        entityPath: parsedInfo.entityPath</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code>    log.iotClient("The EventHub ConnectionString is: '%s'.", result);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code>    await this.close(context);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>    return result;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code>   * Closes the AMQP connection to the Event Hub for this client,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code>   * returning a promise that will be resolved when disconnection is completed.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code>   * @returns {Promise&#60;any&#62;}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code>  async close(context: ConnectionContext): Promise&#60;any&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>      if (context.connection.isOpen()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>        log.iotClient("Closing the IotHubClient connection...");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>        // Close the cbs session;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>        await context.cbsSession.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>        log.iotClient("IotHub cbs session closed.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>        // Close the management session</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>        await context.managementSession!.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>        log.iotClient("IotHub management client closed.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code>        await context.connection.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>        log.iotClient("Closed the amqp connection '%s' on the iothub client.", context.connectionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>      const msg = `An error occurred while closing the connection "${context.connectionId}": ${err.stack}`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code>      log.error(msg);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 103, Column 3: "Member _parseRedirectError should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">103</td>
	<td class="source"><code>  private _parseRedirectError(error: MessagingError): ParsedRedirectError {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>    if (!error) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>      throw new Error("'error' is a required parameter and must be of type 'object'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>    if (error.name !== "LinkRedirectError" || !error.info) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>      throw error;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">110</td>
	<td class="source"><code>    if (!error.info.hostname || !error.info.address) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code>      const msg = `The received redirect error from IotHub is malformed. ${error.stack}\n${error.info}`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code>      throw new Error(msg);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">113</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>    const address: string = error.info.address;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code>    const parsedResult = address.match(/5671\/(.*)\/\$management/i);</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 117, Column 22: "Expected '===' and instead saw '=='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 117, Column 71: "Expected '===' and instead saw '=='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">117</td>
	<td class="source"><code>    if (parsedResult == undefined || (parsedResult && parsedResult[1] == undefined)) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>      const msg =</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>        `Cannot parse the EventHub name from the given address: ${address} in the error: ` +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code>        `${error.stack}\n${JSON.stringify(error.info)}.\nThe parsed result is: ${JSON.stringify(parsedResult)}.`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>      throw new Error(msg);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>    return {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code>      endpoint: error.info.hostname,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>      entityPath: parsedResult[1]</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 130, Column 3: "Member _buildConnectionString should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">130</td>
	<td class="source"><code>  private _buildConnectionString(config: EHConfig): string {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code>    const parts = new Map();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code>    parts.set("Endpoint", `sb://${config.endpoint}/`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">133</td>
	<td class="source"><code>    parts.set("SharedAccessKeyName", config.sharedAccessKeyName);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>    parts.set("SharedAccessKey", config.sharedAccessKey);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code>    parts.set("EntityPath", config.entityPath);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code>    return Array.from(parts)</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code>      .map(part =&#62; `${part[0]}=${part[1]}`)</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code>      .join(";");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcLinkEntityTs" class="lint-result bg-error" data-group="f-9" data-problem-count="1" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\linkEntity.ts
    </th>
    <th class="result-summary">
      1 problem (1 error, 0 warnings)
    </th>
</tr>
<tr class="f-9 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-9"
								data-content="detailSummary-9"
								aria-controls="detailSummary-9"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-9"
								data-content="sourceCode-9"
								aria-controls="sourceCode-9"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-9">
				<div class="row"></div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 204, Column 55: "Irregular whitespace not allowed."
		<a href="http://eslint.org/docs/rules/no-irregular-whitespace" target="_blank">no-irregular-whitespace</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-9">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import uuid from "uuid/v4";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>import { defaultLock } from "@azure/amqp-common";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>import { ConnectionContext } from "./connectionContext";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>import { Sender, Receiver } from "rhea-promise";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code>import * as log from "./log";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>export interface LinkEntityOptions {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code>   * @property {string} [name] The unique name for the entity. If not provided then a guid will be</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code>   * assigned.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>  name?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code>   * @property {string | number} [partitionId] The partitionId associated with the link entity.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code>  partitionId?: string | number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>   * @property {string} address The link entity address in one of the following forms:</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>  address?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code>   * @property {string} audience The link entity token audience in one of the following forms:</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code>  audience?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code> * Describes the base class for entities like EventHub Sender, Receiver and Management link.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code> * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code> * @class LinkEntity</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>export class LinkEntity {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code>   * @property {string} [name] The unique name for the entity (mostly a guid).</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code>  name: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code>   * @property {string} address The link entity address in one of the following forms:</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code>   * **Sender**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>   * - `"&#60;hubName&#62;"`</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code>   * - `"&#60;hubName&#62;/Partitions/&#60;partitionId&#62;"`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code>   * **Receiver**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>   * - `"&#60;event-hub-name&#62;/ConsumerGroups/&#60;consumer-group-name&#62;/Partitions/&#60;partition-id&#62;"`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>   * **ManagementClient**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code>   * -`"$management"`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code>  address: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">54</td>
	<td class="source"><code>   * @property {string} audience The link entity token audience in one of the following forms:</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code>   * **Sender**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>   * - `"sb://&#60;yournamespace&#62;.servicebus.windows.net/&#60;hubName&#62;"`</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>   * - `"sb://&#60;yournamespace&#62;.servicebus.windows.net/&#60;hubName&#62;/Partitions/&#60;partitionId&#62;"`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>   * **Receiver**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>   * - `"sb://&#60;your-namespace&#62;.servicebus.windows.net/&#60;event-hub-name&#62;/ConsumerGroups/&#60;consumer-group-name&#62;/Partitions/&#60;partition-id&#62;"`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>   *</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code>   * **ManagementClient**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">64</td>
	<td class="source"><code>   * - `"sb://&#60;your-namespace&#62;.servicebus.windows.net/&#60;event-hub-name&#62;/$management"`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>  audience: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>   * @property {string | number} [partitionId] The partitionId associated with the link entity.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code>  partitionId?: string | number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code>   * @property {boolean} isConnecting Indicates whether the link is in the process of connecting</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code>   * (establishing) itself. Default value: `false`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>  isConnecting: boolean = false;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code>   * @property {ConnectionContext} _context Provides relevant information about the amqp connection,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code>   * cbs and $management sessions, token provider, sender and receivers.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code>  protected _context: ConnectionContext;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code>   * @property {NodeJS.Timer} _tokenRenewalTimer The token renewal timer that keeps track of when</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code>   * the Link Entity is due for token renewal.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>  protected _tokenRenewalTimer?: NodeJS.Timer;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>   * Creates a new LinkEntity instance.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>   * @constructor</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>   * @param {ConnectionContext} context The connection context.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>   * @param {LinkEntityOptions} [options] Options that can be provided while creating the LinkEntity.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>  constructor(context: ConnectionContext, options?: LinkEntityOptions) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>    if (!options) options = {};</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code>    this._context = context;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>    this.address = options.address || "";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code>    this.audience = options.audience || "";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>    this.name = options.name || uuid();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>    this.partitionId = options.partitionId;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>   * Negotiates cbs claim for the LinkEntity.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>   * @param {boolean} [setTokenRenewal] Set the token renewal timer. Default false.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code>   * @return {Promise&#60;void&#62;} Promise&#60;void&#62;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">110</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code>  protected async _negotiateClaim(setTokenRenewal?: boolean): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code>    // Acquire the lock and establish a cbs session if it does not exist on the connection.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">113</td>
	<td class="source"><code>    // Although node.js is single threaded, we need a locking mechanism to ensure that a</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code>    // race condition does not happen while creating a shared resource (in this case the</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>    // cbs session, since we want to have exactly 1 cbs session per connection).</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code>    log.link(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">117</td>
	<td class="source"><code>      "[%s] Acquiring cbs lock: '%s' for creating the cbs session while creating the %s: " + "'%s' with address: '%s'.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>      this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>      this._context.cbsSession.cbsLock,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code>      this._type,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>      this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>      this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>    await defaultLock.acquire(this._context.cbsSession.cbsLock, () =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code>      return this._context.cbsSession.init();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code>    const tokenObject = await this._context.tokenProvider.getToken(this.audience);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>    log.link(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code>      "[%s] %s: calling negotiateClaim for audience '%s'.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">130</td>
	<td class="source"><code>      this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code>      this._type,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code>      this.audience</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">133</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>    // Acquire the lock to negotiate the CBS claim.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code>    log.link(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code>      "[%s] Acquiring cbs lock: '%s' for cbs auth for %s: '%s' with address '%s'.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code>      this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code>      this._context.negotiateClaimLock,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code>      this._type,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>      this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code>      this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">142</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">143</td>
	<td class="source"><code>    await defaultLock.acquire(this._context.negotiateClaimLock, () =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">144</td>
	<td class="source"><code>      return this._context.cbsSession.negotiateClaim(this.audience, tokenObject);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">145</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">146</td>
	<td class="source"><code>    log.link(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">147</td>
	<td class="source"><code>      "[%s] Negotiated claim for %s '%s' with with address: %s",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">148</td>
	<td class="source"><code>      this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">149</td>
	<td class="source"><code>      this._type,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">150</td>
	<td class="source"><code>      this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">151</td>
	<td class="source"><code>      this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">152</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">153</td>
	<td class="source"><code>    if (setTokenRenewal) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">154</td>
	<td class="source"><code>      await this._ensureTokenRenewal();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">155</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">156</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">157</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">158</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">159</td>
	<td class="source"><code>   * Ensures that the token is renewed within the predefined renewal margin.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">160</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">161</td>
	<td class="source"><code>   * @protected</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">162</td>
	<td class="source"><code>   * @returns {void}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">163</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">164</td>
	<td class="source"><code>  protected async _ensureTokenRenewal(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">165</td>
	<td class="source"><code>    const tokenValidTimeInSeconds = this._context.tokenProvider.tokenValidTimeInSeconds;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">166</td>
	<td class="source"><code>    const tokenRenewalMarginInSeconds = this._context.tokenProvider.tokenRenewalMarginInSeconds;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">167</td>
	<td class="source"><code>    const nextRenewalTimeout = (tokenValidTimeInSeconds - tokenRenewalMarginInSeconds) * 1000;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">168</td>
	<td class="source"><code>    this._tokenRenewalTimer = setTimeout(async () =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">169</td>
	<td class="source"><code>      try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">170</td>
	<td class="source"><code>        await this._negotiateClaim(true);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">171</td>
	<td class="source"><code>      } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">172</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">173</td>
	<td class="source"><code>          "[%s] %s '%s' with address %s, an error occurred while renewing the token: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">174</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">175</td>
	<td class="source"><code>          this._type,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">176</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">177</td>
	<td class="source"><code>          this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">178</td>
	<td class="source"><code>          err</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">179</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">180</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">181</td>
	<td class="source"><code>    }, nextRenewalTimeout);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">182</td>
	<td class="source"><code>    log.link(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">183</td>
	<td class="source"><code>      "[%s] %s '%s' with address %s, has next token renewal in %d seconds @(%s).",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">184</td>
	<td class="source"><code>      this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">185</td>
	<td class="source"><code>      this._type,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">186</td>
	<td class="source"><code>      this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">187</td>
	<td class="source"><code>      this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">188</td>
	<td class="source"><code>      nextRenewalTimeout / 1000,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">189</td>
	<td class="source"><code>      new Date(Date.now() + nextRenewalTimeout).toString()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">190</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">191</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">192</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">193</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">194</td>
	<td class="source"><code>   * Closes the Sender|Receiver link and it's underlying session and also removes it from the</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">195</td>
	<td class="source"><code>   * internal map.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">196</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">197</td>
	<td class="source"><code>   * @param {Sender | Receiver} [link] The Sender or Receiver link that needs to be closed and</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">198</td>
	<td class="source"><code>   * removed.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">199</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">200</td>
	<td class="source"><code>  protected async _closeLink(link?: Sender | Receiver): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">201</td>
	<td class="source"><code>    clearTimeout(this._tokenRenewalTimer as NodeJS.Timer);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">202</td>
	<td class="source"><code>    if (link) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">203</td>
	<td class="source"><code>      try {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 204, Column 55: "Irregular whitespace not allowed."
		<a href="http://eslint.org/docs/rules/no-irregular-whitespace" target="_blank">no-irregular-whitespace</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">204</td>
	<td class="source"><code>        // Closing the link and its underlying session if the link is open. This should also</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">205</td>
	<td class="source"><code>        // remove them from the internal map.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">206</td>
	<td class="source"><code>        await link.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">207</td>
	<td class="source"><code>        log.link(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">208</td>
	<td class="source"><code>          "[%s] %s '%s' with address '%s' closed.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">209</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">210</td>
	<td class="source"><code>          this._type,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">211</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">212</td>
	<td class="source"><code>          this.address</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">213</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">214</td>
	<td class="source"><code>      } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">215</td>
	<td class="source"><code>        log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">216</td>
	<td class="source"><code>          "[%s] An error occurred while closing the %s '%s' with address '%s': %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">217</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">218</td>
	<td class="source"><code>          this._type,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">219</td>
	<td class="source"><code>          this.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">220</td>
	<td class="source"><code>          this.address,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">221</td>
	<td class="source"><code>          err</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">222</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">223</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">224</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">225</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">226</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">227</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">228</td>
	<td class="source"><code>   * Provides the current type of the LinkEntity.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">229</td>
	<td class="source"><code>   * @return {string} The entity type.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">230</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">231</td>
	<td class="source"><code>  private get _type(): string {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">232</td>
	<td class="source"><code>    let result = "LinkEntity";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">233</td>
	<td class="source"><code>    if ((this as any).constructor && (this as any).constructor.name) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">234</td>
	<td class="source"><code>      result = (this as any).constructor.name;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">235</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">236</td>
	<td class="source"><code>    return result;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">237</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">238</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">239</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcLogTs" class="lint-result bg-success" data-group="f-10" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\log.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcManagementClientTs" class="lint-result bg-error" data-group="f-11" data-problem-count="8" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\managementClient.ts
    </th>
    <th class="result-summary">
      8 problems (8 errors, 0 warnings)
    </th>
</tr>
<tr class="f-11 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-11"
								data-content="detailSummary-11"
								aria-controls="detailSummary-11"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-11"
								data-content="sourceCode-11"
								aria-controls="sourceCode-11"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-11">
				<div class="row"></div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 142, Column 36: "Array type using 'Array<string>' is forbidden. Use 'string[]' instead."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/array-type" target="_blank">@typescript-eslint/array-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 193, Column 3: "Member _init should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 239, Column 7: "Do not assign to the exception parameter."
		<a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 252, Column 3: "Member _makeManagementRequest should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 253, Column 21: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 267, Column 23: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 276, Column 7: "Do not assign to the exception parameter."
		<a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 282, Column 3: "Member _isMgmtRequestResponseLinkOpen should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-11">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import uuid from "uuid/v4";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>import { RequestResponseLink, defaultLock, translate, Constants } from "@azure/amqp-common";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>import { Message, EventContext, SenderEvents, ReceiverEvents, SenderOptions, ReceiverOptions } from "rhea-promise";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>import { ConnectionContext } from "./connectionContext";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code>import { LinkEntity } from "./linkEntity";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>import * as log from "./log";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code> * Describes the runtime information of an EventHub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code> * @interface EventHubRuntimeInformation</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>export interface EventHubRuntimeInformation {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code>   * @property {string} path - The name of the event hub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code>  path: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>   * @property {Date} createdAt - The date and time the hub was created in UTC.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>  createdAt: Date;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code>   * @property {number} partitionCount - The number of partitions in the event hub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code>  partitionCount: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code>   * @property {string[]} partitionIds - The slice of string partition identifiers.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code>  partitionIds: string[];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code>   * @property {string} type - The type of entity.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>  type: "com.microsoft:eventhub";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code> * Describes the runtime information of an EventHub Partition.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code> * @interface EventHubPartitionRuntimeInformation</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code>export interface EventHubPartitionRuntimeInformation {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>   * @property {string} hubPath - The name of the eventhub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code>  hubPath: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>   * @property {string} partitionId - Identifier of the partition within the eventhub.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>  partitionId: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>   * @property {number} beginningSequenceNumber - The starting sequence number of the partition's message log.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code>  beginningSequenceNumber: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">54</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>   * @property {number} lastSequenceNumber - The last sequence number of the partition's message log.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>  lastSequenceNumber: number;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>   * @property {string} lastEnqueuedOffset - The offset of the last enqueued message in the partition's message log.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>  lastEnqueuedOffset: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code>   * @property {Date} lastEnqueuedTimeUtc - The time of the last enqueued message in the partition's message log in UTC.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">64</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code>  lastEnqueuedTimeUtc: Date;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>   * @property {string} type - The type of entity.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code>  type: "com.microsoft:partition";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code>export interface ManagementClientOptions {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code>  address?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code>  audience?: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code>/**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code> * @class ManagementClient</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code> * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code> * Descibes the EventHubs Management Client that talks</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code> * to the $management endpoint over AMQP connection.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code> */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code>export class ManagementClient extends LinkEntity {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code>  readonly managementLock: string = `${Constants.managementRequestKey}-${uuid()}`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>   * @property {string} entityPath - The name/path of the entity (hub name) for which the management</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>   * request needs to be made.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>  entityPath: string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>   * @property {string} replyTo The reply to Guid for the management client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>  replyTo: string = uuid();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>   * $management sender, receiver on the same session.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>   * @private</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>  private _mgmtReqResLink?: RequestResponseLink;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>   * Instantiates the management client.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code>   * @constructor</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>   * @param {BaseConnectionContext} context The connection context.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>   * @param {string} [address] The address for the management endpoint. For IotHub it will be</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>   * `/messages/events/$management`.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>  constructor(context: ConnectionContext, options?: ManagementClientOptions) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code>    super(context, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">110</td>
	<td class="source"><code>      address: options && options.address ? options.address : Constants.management,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code>      audience: options && options.audience ? options.audience : context.config.getManagementAudience()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">113</td>
	<td class="source"><code>    this._context = context;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code>    this.entityPath = context.config.entityPath as string;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">117</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>   * Provides the eventhub runtime information.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code>   * @param {Connection} connection - The established amqp connection</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>   * @returns {Promise&#60;EventHubRuntimeInformation&#62;}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code>  async getHubRuntimeInformation(): Promise&#60;EventHubRuntimeInformation&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>    const info: any = await this._makeManagementRequest(Constants.eventHub);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code>    const runtimeInfo: EventHubRuntimeInformation = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>      path: info.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code>      createdAt: new Date(info.created_at),</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>      partitionCount: info.partition_count,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code>      partitionIds: info.partition_ids,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">130</td>
	<td class="source"><code>      type: info.type</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code>    log.mgmt("[%s] The hub runtime info is: %O", this._context.connectionId, runtimeInfo);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">133</td>
	<td class="source"><code>    return runtimeInfo;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code>   * Provides an array of partitionIds.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code>   * @param {Connection} connection - The established amqp connection</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>   * @returns {Promise&#60;Array&#60;string&#62;&#62;}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 142, Column 36: "Array type using 'Array<string>' is forbidden. Use 'string[]' instead."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/array-type" target="_blank">@typescript-eslint/array-type</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">142</td>
	<td class="source"><code>  async getPartitionIds(): Promise&#60;Array&#60;string&#62;&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">143</td>
	<td class="source"><code>    const runtimeInfo = await this.getHubRuntimeInformation();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">144</td>
	<td class="source"><code>    return runtimeInfo.partitionIds;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">145</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">146</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">147</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">148</td>
	<td class="source"><code>   * Provides information about the specified partition.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">149</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">150</td>
	<td class="source"><code>   * @param {Connection} connection - The established amqp connection</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">151</td>
	<td class="source"><code>   * @param {(string|number)} partitionId Partition ID for which partition information is required.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">152</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">153</td>
	<td class="source"><code>  async getPartitionInformation(partitionId: string | number): Promise&#60;EventHubPartitionRuntimeInformation&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">154</td>
	<td class="source"><code>    if (typeof partitionId !== "string" && typeof partitionId !== "number") {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">155</td>
	<td class="source"><code>      throw new Error("'partitionId' is a required parameter and must be of " + "type: 'string' | 'number'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">156</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">157</td>
	<td class="source"><code>    const info: any = await this._makeManagementRequest(Constants.partition, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">158</td>
	<td class="source"><code>    const partitionInfo: EventHubPartitionRuntimeInformation = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">159</td>
	<td class="source"><code>      beginningSequenceNumber: info.begin_sequence_number,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">160</td>
	<td class="source"><code>      hubPath: info.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">161</td>
	<td class="source"><code>      lastEnqueuedOffset: info.last_enqueued_offset,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">162</td>
	<td class="source"><code>      lastEnqueuedTimeUtc: new Date(info.last_enqueued_time_utc),</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">163</td>
	<td class="source"><code>      lastSequenceNumber: info.last_enqueued_sequence_number,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">164</td>
	<td class="source"><code>      partitionId: info.partition,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">165</td>
	<td class="source"><code>      type: info.type</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">166</td>
	<td class="source"><code>    };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">167</td>
	<td class="source"><code>    log.mgmt("[%s] The partition info is: %O.", this._context.connectionId, partitionInfo);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">168</td>
	<td class="source"><code>    return partitionInfo;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">169</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">170</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">171</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">172</td>
	<td class="source"><code>   * Closes the AMQP management session to the Event Hub for this client,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">173</td>
	<td class="source"><code>   * returning a promise that will be resolved when disconnection is completed.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">174</td>
	<td class="source"><code>   * @ignore</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">175</td>
	<td class="source"><code>   * @return {Promise&#60;void&#62;}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">176</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">177</td>
	<td class="source"><code>  async close(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">178</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">179</td>
	<td class="source"><code>      if (this._isMgmtRequestResponseLinkOpen()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">180</td>
	<td class="source"><code>        const mgmtLink = this._mgmtReqResLink;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">181</td>
	<td class="source"><code>        this._mgmtReqResLink = undefined;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">182</td>
	<td class="source"><code>        clearTimeout(this._tokenRenewalTimer as NodeJS.Timer);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">183</td>
	<td class="source"><code>        await mgmtLink!.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">184</td>
	<td class="source"><code>        log.mgmt("Successfully closed the management session.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">185</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">186</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">187</td>
	<td class="source"><code>      const msg = `An error occurred while closing the management session: ${err}`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">188</td>
	<td class="source"><code>      log.error(msg);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">189</td>
	<td class="source"><code>      throw new Error(msg);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">190</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">191</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">192</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 193, Column 3: "Member _init should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">193</td>
	<td class="source"><code>  private async _init(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">194</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">195</td>
	<td class="source"><code>      if (!this._isMgmtRequestResponseLinkOpen()) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">196</td>
	<td class="source"><code>        await this._negotiateClaim();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">197</td>
	<td class="source"><code>        const rxopt: ReceiverOptions = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">198</td>
	<td class="source"><code>          source: { address: this.address },</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">199</td>
	<td class="source"><code>          name: this.replyTo,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">200</td>
	<td class="source"><code>          target: { address: this.replyTo },</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">201</td>
	<td class="source"><code>          onSessionError: (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">202</td>
	<td class="source"><code>            const id = context.connection.options.id;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">203</td>
	<td class="source"><code>            const ehError = translate(context.session!.error!);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">204</td>
	<td class="source"><code>            log.error(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">205</td>
	<td class="source"><code>              "[%s] An error occurred on the session for request/response links for " + "$management: %O",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">206</td>
	<td class="source"><code>              id,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">207</td>
	<td class="source"><code>              ehError</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">208</td>
	<td class="source"><code>            );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">209</td>
	<td class="source"><code>          }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">210</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">211</td>
	<td class="source"><code>        const sropt: SenderOptions = { target: { address: this.address } };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">212</td>
	<td class="source"><code>        log.mgmt(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">213</td>
	<td class="source"><code>          "[%s] Creating sender/receiver links on a session for $management endpoint with " +</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">214</td>
	<td class="source"><code>            "srOpts: %o, receiverOpts: %O.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">215</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">216</td>
	<td class="source"><code>          sropt,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">217</td>
	<td class="source"><code>          rxopt</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">218</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">219</td>
	<td class="source"><code>        this._mgmtReqResLink = await RequestResponseLink.create(this._context.connection, sropt, rxopt);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">220</td>
	<td class="source"><code>        this._mgmtReqResLink.sender.on(SenderEvents.senderError, (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">221</td>
	<td class="source"><code>          const id = context.connection.options.id;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">222</td>
	<td class="source"><code>          const ehError = translate(context.sender!.error!);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">223</td>
	<td class="source"><code>          log.error("[%s] An error occurred on the $management sender link.. %O", id, ehError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">224</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">225</td>
	<td class="source"><code>        this._mgmtReqResLink.receiver.on(ReceiverEvents.receiverError, (context: EventContext) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">226</td>
	<td class="source"><code>          const id = context.connection.options.id;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">227</td>
	<td class="source"><code>          const ehError = translate(context.receiver!.error!);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">228</td>
	<td class="source"><code>          log.error("[%s] An error occurred on the $management receiver link.. %O", id, ehError);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">229</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">230</td>
	<td class="source"><code>        log.mgmt(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">231</td>
	<td class="source"><code>          "[%s] Created sender '%s' and receiver '%s' links for $management endpoint.",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">232</td>
	<td class="source"><code>          this._context.connectionId,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">233</td>
	<td class="source"><code>          this._mgmtReqResLink.sender.name,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">234</td>
	<td class="source"><code>          this._mgmtReqResLink.receiver.name</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">235</td>
	<td class="source"><code>        );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">236</td>
	<td class="source"><code>        await this._ensureTokenRenewal();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">237</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">238</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 239, Column 7: "Do not assign to the exception parameter."
		<a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">239</td>
	<td class="source"><code>      err = translate(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">240</td>
	<td class="source"><code>      log.error("[%s] An error occured while establishing the $management links: %O", this._context.connectionId, err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">241</td>
	<td class="source"><code>      throw err;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">242</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">243</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">244</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">245</td>
	<td class="source"><code>  /**</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">246</td>
	<td class="source"><code>   * @private</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">247</td>
	<td class="source"><code>   * Helper method to make the management request</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">248</td>
	<td class="source"><code>   * @param {Connection} connection - The established amqp connection</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">249</td>
	<td class="source"><code>   * @param {string} type - The type of entity requested for. Valid values are "eventhub", "partition"</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">250</td>
	<td class="source"><code>   * @param {string | number} [partitionId] - The partitionId. Required only when type is "partition".</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">251</td>
	<td class="source"><code>   */</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 252, Column 3: "Member _makeManagementRequest should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">252</td>
	<td class="source"><code>  private async _makeManagementRequest(type: "eventhub" | "partition", partitionId?: string | number): Promise&#60;any&#62; {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 253, Column 21: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">253</td>
	<td class="source"><code>    if (partitionId != undefined && (typeof partitionId !== "string" && typeof partitionId !== "number")) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">254</td>
	<td class="source"><code>      throw new Error("'partitionId' is a required parameter and must be of type: 'string' | 'number'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">255</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">256</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">257</td>
	<td class="source"><code>      const request: Message = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">258</td>
	<td class="source"><code>        body: Buffer.from(JSON.stringify([])),</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">259</td>
	<td class="source"><code>        message_id: uuid(),</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">260</td>
	<td class="source"><code>        reply_to: this.replyTo,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">261</td>
	<td class="source"><code>        application_properties: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">262</td>
	<td class="source"><code>          operation: Constants.readOperation,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">263</td>
	<td class="source"><code>          name: this.entityPath as string,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">264</td>
	<td class="source"><code>          type: `${Constants.vendorString}:${type}`</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">265</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">266</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 267, Column 23: "Expected '!==' and instead saw '!='."
		<a href="http://eslint.org/docs/rules/eqeqeq" target="_blank">eqeqeq</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">267</td>
	<td class="source"><code>      if (partitionId != undefined && type === Constants.partition) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">268</td>
	<td class="source"><code>        request.application_properties!.partition = `${partitionId}`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">269</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">270</td>
	<td class="source"><code>      log.mgmt("[%s] Acquiring lock to get the management req res link.", this._context.connectionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">271</td>
	<td class="source"><code>      await defaultLock.acquire(this.managementLock, () =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">272</td>
	<td class="source"><code>        return this._init();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">273</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">274</td>
	<td class="source"><code>      return (await this._mgmtReqResLink!.sendRequest(request)).body;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">275</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 276, Column 7: "Do not assign to the exception parameter."
		<a href="http://eslint.org/docs/rules/no-ex-assign" target="_blank">no-ex-assign</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">276</td>
	<td class="source"><code>      err = translate(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">277</td>
	<td class="source"><code>      log.error("An error occurred while making the request to $management endpoint: %O", err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">278</td>
	<td class="source"><code>      throw err;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">279</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">280</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">281</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 282, Column 3: "Member _isMgmtRequestResponseLinkOpen should be declared before all public instance method definitions."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/member-ordering" target="_blank">@typescript-eslint/member-ordering</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">282</td>
	<td class="source"><code>  private _isMgmtRequestResponseLinkOpen(): boolean {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">283</td>
	<td class="source"><code>    return this._mgmtReqResLink! && this._mgmtReqResLink!.isOpen();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">284</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">285</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">286</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcStreamingReceiverTs" class="lint-result bg-success" data-group="f-12" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\streamingReceiver.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSrcUtilConstantsTs" class="lint-result bg-success" data-group="f-13" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \src\util\constants.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsTestClientSpecTs" class="lint-result bg-error" data-group="f-14" data-problem-count="3" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \test\client.spec.ts
    </th>
    <th class="result-summary">
      3 problems (1 error, 2 warnings)
    </th>
</tr>
<tr class="f-14 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-14"
								data-content="detailSummary-14"
								aria-controls="detailSummary-14"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-14"
								data-content="sourceCode-14"
								aria-controls="sourceCode-14"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-14">
				<div class="row"></div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 64, Column 57: "Array type using 'Array<string>' is forbidden. Use 'string[]' instead."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/array-type" target="_blank">@typescript-eslint/array-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 185, Column 27: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 188, Column 25: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-14">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import chai from "chai";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>import os from "os";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>const should = chai.should();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>import chaiAsPromised from "chai-as-promised";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code>chai.use(chaiAsPromised);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>import chaiString from "chai-string";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code>chai.use(chaiString);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code>import debugModule from "debug";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code>import dotenv from "dotenv";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code>dotenv.config();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>const debug = debugModule("azure:event-hubs:client-spec");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code>import { EventHubClient } from "../src";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code>import { packageJsonInfo } from "../src/util/constants";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code>function testFalsyValues(testFn: Function): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code>  // tslint:disable-next-line: no-null-keyword</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>  [null, undefined, "", 0].forEach(function(value: string | number | null | undefined): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>    testFn(value);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code>describe("EventHubClient", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code>  describe(".fromConnectionString", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code>    it("throws when there is no connection string", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code>      testFalsyValues(function(value: any): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>        const test = function(): EventHubClient {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code>          return EventHubClient.createFromConnectionString(value);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code>        test.should.throw(Error, "'connectionString' is a required parameter and must be of type: 'string'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code>    it("throws when it cannot find the Event Hub path", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>      const endpoint = "Endpoint=sb://abc";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code>      const test = function(): EventHubClient {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code>        return EventHubClient.createFromConnectionString(endpoint);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code>      test.should.throw(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code>        Error,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>        `Either provide "path" or the "connectionString": "${endpoint}", must contain EntityPath="&#60;path-to-the-entity&#62;".`</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>    it("creates an EventHubClient from a connection string", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>      const client = EventHubClient.createFromConnectionString(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>        "Endpoint=sb://a;SharedAccessKeyName=b;SharedAccessKey=c;EntityPath=d"</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>      client.should.be.an.instanceof(EventHubClient);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">54</td>
	<td class="source"><code>    it("creates an EventHubClient from a connection string and an Event Hub path", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>      const client = EventHubClient.createFromConnectionString(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code>        "Endpoint=sb://a;SharedAccessKeyName=b;SharedAccessKey=c",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>        "path"</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>      client.should.be.an.instanceof(EventHubClient);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>});</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 64, Column 57: "Array type using 'Array<string>' is forbidden. Use 'string[]' instead."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/array-type" target="_blank">@typescript-eslint/array-type</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">64</td>
	<td class="source"><code>function arrayOfIncreasingNumbersFromZero(length: any): Array&#60;string&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code>  // tslint:disable-next-line: no-null-keyword</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>  return Array.apply(null, new Array(length)).map((x: any, i: any) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>    return `${i}`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code>}</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code>before("validate environment", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code>  should.exist(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code>    process.env.EVENTHUB_CONNECTION_STRING,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code>    "define EVENTHUB_CONNECTION_STRING in your environment before running integration tests."</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>  );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code>  should.exist(process.env.EVENTHUB_NAME, "define EVENTHUB_NAME in your environment before running integration tests.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code>});</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code>const service = { connectionString: process.env.EVENTHUB_CONNECTION_STRING, path: process.env.EVENTHUB_NAME };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code>describe("EventHubClient on ", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code>  let client: EventHubClient;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code>  afterEach("close the connection", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>    if (client) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>      debug("&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; afterEach: closing the client.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>      await client.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>  describe("user-agent", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>    it("should correctly populate the default user agent", function(done: Mocha.Done): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>      client = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code>      const packageVersion = packageJsonInfo.version;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>      const properties = client["_context"].connection.options.properties;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>      properties!["user-agent"].should.startWith(`azsdk-js-azureeventhubs/${packageVersion}`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code>      should.equal(properties!.product, "MSJSClient");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>      should.equal(properties!.version, packageVersion);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code>      should.equal(properties!.framework, `Node/${process.version}`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>      should.equal(properties!.platform, `(${os.arch()}-${os.type()}-${os.release()})`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>      done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>    it("should correctly populate the custom user agent", function(done: Mocha.Done): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>      const customua = "/js-event-processor-host=0.2.0";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>      client = EventHubClient.createFromConnectionString(service.connectionString!, service.path, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>        userAgent: customua</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code>      const packageVersion = packageJsonInfo.version;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">110</td>
	<td class="source"><code>      const properties = client["_context"].connection.options.properties;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code>      properties!["user-agent"].should.startWith(`azsdk-js-azureeventhubs/${packageVersion}`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code>      properties!["user-agent"].should.endWith(customua);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">113</td>
	<td class="source"><code>      should.equal(properties!.product, "MSJSClient");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code>      should.equal(properties!.version, packageVersion);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>      should.equal(properties!.framework, `Node/${process.version}`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code>      should.equal(properties!.platform, `(${os.arch()}-${os.type()}-${os.release()})`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">117</td>
	<td class="source"><code>      done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>  describe("#close", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>    it("is a no-op when the connection is already closed", function(): Chai.PromisedAssertion {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code>      client = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>      return client.close().should.be.fulfilled;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>  describe("getPartitionIds", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code>    it("returns an array of partition IDs", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">130</td>
	<td class="source"><code>      client = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code>      const ids = await client.getPartitionIds();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code>      ids.should.have.members(arrayOfIncreasingNumbersFromZero(ids.length));</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">133</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code>  describe("non existent eventhub", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code>    it("should throw MessagingEntityNotFoundError while getting hub runtime info", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code>      try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code>        client = EventHubClient.createFromConnectionString(service.connectionString!, "bad" + Math.random());</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>        await client.getHubRuntimeInformation();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code>      } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">142</td>
	<td class="source"><code>        debug(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">143</td>
	<td class="source"><code>        should.equal(err.name, "MessagingEntityNotFoundError");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">144</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">145</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">146</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">147</td>
	<td class="source"><code>    it("should throw MessagingEntityNotFoundError while getting partition runtime info", async function(): Promise&#60;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">148</td>
	<td class="source"><code>      void</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">149</td>
	<td class="source"><code>    &#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">150</td>
	<td class="source"><code>      try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">151</td>
	<td class="source"><code>        client = EventHubClient.createFromConnectionString(service.connectionString!, "bad" + Math.random());</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">152</td>
	<td class="source"><code>        await client.getPartitionInformation("0");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">153</td>
	<td class="source"><code>      } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">154</td>
	<td class="source"><code>        debug(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">155</td>
	<td class="source"><code>        should.equal(err.name, "MessagingEntityNotFoundError");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">156</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">157</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">158</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">159</td>
	<td class="source"><code>    it("should throw MessagingEntityNotFoundError while creating a sender", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">160</td>
	<td class="source"><code>      try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">161</td>
	<td class="source"><code>        client = EventHubClient.createFromConnectionString(service.connectionString!, "bad" + Math.random());</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">162</td>
	<td class="source"><code>        await client.send({ body: "Hello World" }, "0");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">163</td>
	<td class="source"><code>      } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">164</td>
	<td class="source"><code>        debug(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">165</td>
	<td class="source"><code>        should.equal(err.name, "MessagingEntityNotFoundError");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">166</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">167</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">168</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">169</td>
	<td class="source"><code>    it("should throw MessagingEntityNotFoundError while creating a receiver", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">170</td>
	<td class="source"><code>      try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">171</td>
	<td class="source"><code>        client = EventHubClient.createFromConnectionString(service.connectionString!, "bad" + Math.random());</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">172</td>
	<td class="source"><code>        await client.receiveBatch("0", 10, 5);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">173</td>
	<td class="source"><code>      } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">174</td>
	<td class="source"><code>        debug(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">175</td>
	<td class="source"><code>        should.equal(err.name, "MessagingEntityNotFoundError");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">176</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">177</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">178</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">179</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">180</td>
	<td class="source"><code>  describe("non existent consumer group", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">181</td>
	<td class="source"><code>    it("should throw MessagingEntityNotFoundError while creating a receiver", function(done: Mocha.Done): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">182</td>
	<td class="source"><code>      try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">183</td>
	<td class="source"><code>        client = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">184</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; client created.");</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 185, Column 27: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">185</td>
	<td class="source"><code>        const onMessage = (data: any) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">186</td>
	<td class="source"><code>          debug("&#62;&#62;&#62;&#62;&#62; data: ", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">187</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 188, Column 25: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">188</td>
	<td class="source"><code>        const onError = (error: any) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">189</td>
	<td class="source"><code>          debug("&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; error occurred", error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">190</td>
	<td class="source"><code>          // sleep for 3 seconds so that receiver link and the session can be closed properly then</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">191</td>
	<td class="source"><code>          // in aftereach the connection can be closed. closing the connection while the receiver</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">192</td>
	<td class="source"><code>          // link and it's session are being closed (and the session being removed from rhea's</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">193</td>
	<td class="source"><code>          // internal map) can create havoc.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">194</td>
	<td class="source"><code>          setTimeout(() =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">195</td>
	<td class="source"><code>            done(should.equal(error.name, "MessagingEntityNotFoundError"));</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">196</td>
	<td class="source"><code>          }, 3000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">197</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">198</td>
	<td class="source"><code>        client.receive("0", onMessage, onError, { consumerGroup: "some-randome-name" });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">199</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62;&#62;&#62;&#62;&#62; attached the error handler on the receiver...");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">200</td>
	<td class="source"><code>      } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">201</td>
	<td class="source"><code>        debug("&#62;&#62;&#62; Some error", err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">202</td>
	<td class="source"><code>        throw new Error("This code path must not have hit.. " + JSON.stringify(err));</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">203</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">204</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">205</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">206</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">207</td>
	<td class="source"><code>  describe("on invalid partition ids like", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">208</td>
	<td class="source"><code>    const invalidIds = ["XYZ", "-1", "1000", "-", " "];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">209</td>
	<td class="source"><code>    invalidIds.forEach(function(id: string): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">210</td>
	<td class="source"><code>      it(`"${id}" should throw an error`, async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">211</td>
	<td class="source"><code>        try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">212</td>
	<td class="source"><code>          client = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">213</td>
	<td class="source"><code>          await client.getPartitionInformation(id);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">214</td>
	<td class="source"><code>        } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">215</td>
	<td class="source"><code>          debug(`&#62;&#62;&#62;&#62; Received error - `, err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">216</td>
	<td class="source"><code>          should.exist(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">217</td>
	<td class="source"><code>          err.message.should.match(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">218</td>
	<td class="source"><code>            /.*The specified partition is invalid for an EventHub partition sender or receiver.*/gi</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">219</td>
	<td class="source"><code>          );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">220</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">221</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">222</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">223</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">224</td>
	<td class="source"><code>    // tslint:disable-next-line: no-null-keyword</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">225</td>
	<td class="source"><code>    const invalidIds2 = ["", null];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">226</td>
	<td class="source"><code>    invalidIds2.forEach(function(id: string | null): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">227</td>
	<td class="source"><code>      it(`"${id}" should throw an error`, async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">228</td>
	<td class="source"><code>        try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">229</td>
	<td class="source"><code>          client = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">230</td>
	<td class="source"><code>          await client.getPartitionInformation(id as any);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">231</td>
	<td class="source"><code>        } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">232</td>
	<td class="source"><code>          debug(`&#62;&#62;&#62;&#62; Received error - `, err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">233</td>
	<td class="source"><code>          should.exist(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">234</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">235</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">236</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">237</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">238</td>
	<td class="source"><code>}).timeout(60000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">239</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsTestEventdataSpecTs" class="lint-result bg-success" data-group="f-15" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \test\eventdata.spec.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsTestEventPositionSpecTs" class="lint-result bg-success" data-group="f-16" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \test\eventPosition.spec.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsTestHubruntimeSpecTs" class="lint-result bg-error" data-group="f-17" data-problem-count="1" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \test\hubruntime.spec.ts
    </th>
    <th class="result-summary">
      1 problem (1 error, 0 warnings)
    </th>
</tr>
<tr class="f-17 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-17"
								data-content="detailSummary-17"
								aria-controls="detailSummary-17"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-17"
								data-content="sourceCode-17"
								aria-controls="sourceCode-17"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-17">
				<div class="row"></div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 33, Column 59: "Array type using 'Array<string>' is forbidden. Use 'string[]' instead."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/array-type" target="_blank">@typescript-eslint/array-type</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-17">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import chai from "chai";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>const should = chai.should();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>import chaiAsPromised from "chai-as-promised";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>chai.use(chaiAsPromised);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code>import debugModule from "debug";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>const debug = debugModule("azure:event-hubs:hubruntime-spec");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code>import dotenv from "dotenv";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code>dotenv.config();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code>import { EventHubClient } from "../src";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>describe("RuntimeInformation", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code>  let client: EventHubClient;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code>  const service = { connectionString: process.env.EVENTHUB_CONNECTION_STRING, path: process.env.EVENTHUB_NAME };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code>  before("validate environment", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code>    should.exist(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>      process.env.EVENTHUB_CONNECTION_STRING,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>      "define EVENTHUB_CONNECTION_STRING in your environment before running integration tests."</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code>    should.exist(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code>      process.env.EVENTHUB_NAME,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code>      "define EVENTHUB_NAME in your environment before running integration tests."</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>  afterEach("close the connection", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code>    await client.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code></code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 33, Column 59: "Array type using 'Array<string>' is forbidden. Use 'string[]' instead."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/array-type" target="_blank">@typescript-eslint/array-type</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">33</td>
	<td class="source"><code>  function arrayOfIncreasingNumbersFromZero(length: any): Array&#60;string&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>    return Array.apply(undefined, new Array(length)).map((x: any, i: any) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>      return `${i}`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code>  }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code>  it("gets the hub runtime information", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code>    client = EventHubClient.createFromConnectionString(service.connectionString!, service.path, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code>      userAgent: "/js-event-processor-host=0.2.0"</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>    const hubRuntimeInfo = await client.getHubRuntimeInformation();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code>    debug(hubRuntimeInfo);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code>    hubRuntimeInfo.path.should.equal(service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code>    hubRuntimeInfo.type.should.equal("com.microsoft:eventhub");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>    hubRuntimeInfo.partitionIds.should.have.members(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>      arrayOfIncreasingNumbersFromZero(hubRuntimeInfo.partitionIds.length)</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code>    hubRuntimeInfo.partitionCount.should.equal(hubRuntimeInfo.partitionIds.length);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>    hubRuntimeInfo.createdAt.should.be.instanceof(Date);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">52</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">54</td>
	<td class="source"><code>  it("gets the partition runtime information with partitionId as a string", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>    client = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code>    const partitionRuntimeInfo = await client.getPartitionInformation("0");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">57</td>
	<td class="source"><code>    debug(partitionRuntimeInfo);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>    partitionRuntimeInfo.partitionId.should.equal("0");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>    partitionRuntimeInfo.type.should.equal("com.microsoft:partition");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>    partitionRuntimeInfo.hubPath.should.equal(service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>    partitionRuntimeInfo.lastEnqueuedTimeUtc.should.be.instanceof(Date);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>    should.exist(partitionRuntimeInfo.lastSequenceNumber);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">63</td>
	<td class="source"><code>    should.exist(partitionRuntimeInfo.lastEnqueuedOffset);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">64</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>  it("gets the partition runtime information with partitionId as a number", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">67</td>
	<td class="source"><code>    client = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>    const partitionRuntimeInfo = await client.getPartitionInformation(0);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code>    debug(partitionRuntimeInfo);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code>    partitionRuntimeInfo.partitionId.should.equal("0");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code>    partitionRuntimeInfo.type.should.equal("com.microsoft:partition");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code>    partitionRuntimeInfo.hubPath.should.equal(service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code>    partitionRuntimeInfo.lastEnqueuedTimeUtc.should.be.instanceof(Date);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code>    should.exist(partitionRuntimeInfo.lastSequenceNumber);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>    should.exist(partitionRuntimeInfo.lastEnqueuedOffset);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code>  it("should fail the partition runtime information when partitionId is not a number or string", async function(): Promise&#60;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code>    void</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code>  &#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code>    client = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code>      await client.getPartitionInformation(true as any);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>      err.message.should.equal("'partitionId' is a required parameter and must be of type: 'string' | 'number'.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>  it("should fail the partition runtime information when partitionId is empty string", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>    client = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>      await client.getPartitionInformation("");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code>      err.message.should.match(/.*The specified partition is invalid for an EventHub partition sender or receiver.*/gi);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>  it("should fail the partition runtime information when partitionId is a negative number", async function(): Promise&#60;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code>    void</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>  &#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>    client = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code>    try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code>      await client.getPartitionInformation(-1);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>    } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>      err.message.should.match(/.*The specified partition is invalid for an EventHub partition sender or receiver.*/gi);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>}).timeout(60000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsTestIothubSpecTs" class="lint-result bg-success" data-group="f-18" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \test\iothub.spec.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsTestMiscSpecTs" class="lint-result bg-success" data-group="f-19" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \test\misc.spec.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsTestReceiverSpecTs" class="lint-result bg-error" data-group="f-20" data-problem-count="63" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \test\receiver.spec.ts
    </th>
    <th class="result-summary">
      63 problems (12 errors, 51 warnings)
    </th>
</tr>
<tr class="f-20 hidden">
	<td colspan="5">
		<ul class="nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<button data-parent=".f-20"
								data-content="detailSummary-20"
								aria-controls="detailSummary-20"
								type="button"
								role="tab">
					Summary
				</button>
			</li>
			<li role="presentation">
				<button data-parent=".f-20"
								data-content="sourceCode-20"
								aria-controls="sourceCode-20"
								type="button"
								role="tab">
					SourceCode
				</button>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane" id="detailSummary-20">
				<div class="row"><div class="column">
	<h3 class="text-error">Top errors</h3>
	<table class="summary-table"><thead>
		<tr>
			<th>rule</th>
			<th>count</th>
		</tr>
	</thead><tbody>
		<tr>
	<td><a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a></td>
	<td>6</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a></td>
	<td>6</td>
</tr>
	</tbody></table>
</div>
<div class="column">
	<h3 class="text-warning">Top warnings</h3>
	<table class="summary-table"><thead>
		<tr>
			<th>rule</th>
			<th>count</th>
		</tr>
	</thead><tbody>
		<tr>
	<td><a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a></td>
	<td>22</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a></td>
	<td>15</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a></td>
	<td>12</td>
</tr>
<tr>
	<td><a href="http://eslint.org/docs/rules/@typescript-eslint/no-unused-vars" target="_blank">@typescript-eslint/no-unused-vars</a></td>
	<td>2</td>
</tr>
	</tbody></table>
</div>
</div>
<div class="row">
	<h3 class="page-header">All Rules</h3>
	<table class="summary-table">
		<thead>
			<tr>
				<th>Severity</th>
				<th>Rule</th>
			</tr>
		</thead>
		<tbody>
			<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 52, Column 11: "'rcvHandler' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 54, Column 23: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 57, Column 21: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 63, Column 19: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 64, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 67, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 315, Column 23: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 319, Column 21: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 322, Column 7: "'epochRcvr1' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 325, Column 26: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 329, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 329, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 329, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 332, Column 19: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 334, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 338, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 341, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 354, Column 11: "'epochRcvr1' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 356, Column 23: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 360, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 360, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 360, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 363, Column 17: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 365, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 369, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 372, Column 21: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 378, Column 26: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 382, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 396, Column 11: "'nonEpochRcvr' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 397, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 401, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 404, Column 7: "'epochRcvr' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 406, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 410, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 410, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 410, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 413, Column 17: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 415, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 419, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 422, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 432, Column 11: "'nonEpochRcvr' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 433, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 437, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 437, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 437, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 440, Column 17: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 442, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 446, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 449, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 455, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 459, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 528, Column 23: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 528, Column 24: "'data' is defined but never used."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/no-unused-vars" target="_blank">@typescript-eslint/no-unused-vars</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 534, Column 25: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 547, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 547, Column 25: "'data' is defined but never used."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/no-unused-vars" target="_blank">@typescript-eslint/no-unused-vars</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 550, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 558, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 558, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 558, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 559, Column 19: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 561, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 565, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr>
		</tbody>
	</table>
</div>
			</div>
			<div role="tabpanel" class="tab-pane hidden" id="sourceCode-20">
				<table class="source-code">
	<thead>
		<tr>
			<th>Line</th>
			<th>Source</th>
		</tr>
	</thead>
	<tbody>
		<tr class="hit bg-success">
	<td class="line">1</td>
	<td class="source"><code>// Copyright (c) Microsoft Corporation. All rights reserved.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">2</td>
	<td class="source"><code>// Licensed under the MIT License.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">3</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">4</td>
	<td class="source"><code>import chai from "chai";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">5</td>
	<td class="source"><code>import uuid from "uuid/v4";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">6</td>
	<td class="source"><code>const should = chai.should();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">7</td>
	<td class="source"><code>import chaiAsPromised from "chai-as-promised";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">8</td>
	<td class="source"><code>chai.use(chaiAsPromised);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">9</td>
	<td class="source"><code>import debugModule from "debug";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">10</td>
	<td class="source"><code>const debug = debugModule("azure:event-hubs:receiver-spec");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">11</td>
	<td class="source"><code>import { EventPosition, EventHubClient, EventData, EventHubRuntimeInformation, MessagingError } from "../src";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">12</td>
	<td class="source"><code>import { BatchingReceiver } from "../src/batchingReceiver";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">13</td>
	<td class="source"><code>import { ReceiveHandler } from "../src/streamingReceiver";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">14</td>
	<td class="source"><code>import dotenv from "dotenv";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">15</td>
	<td class="source"><code>dotenv.config();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">16</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">17</td>
	<td class="source"><code>describe("EventHub Receiver", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">18</td>
	<td class="source"><code>  const service = { connectionString: process.env.EVENTHUB_CONNECTION_STRING, path: process.env.EVENTHUB_NAME };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">19</td>
	<td class="source"><code>  const client: EventHubClient = EventHubClient.createFromConnectionString(service.connectionString!, service.path);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">20</td>
	<td class="source"><code>  let breceiver: BatchingReceiver;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">21</td>
	<td class="source"><code>  let hubInfo: EventHubRuntimeInformation;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">22</td>
	<td class="source"><code>  before("validate environment", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">23</td>
	<td class="source"><code>    should.exist(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">24</td>
	<td class="source"><code>      process.env.EVENTHUB_CONNECTION_STRING,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">25</td>
	<td class="source"><code>      "define EVENTHUB_CONNECTION_STRING in your environment before running integration tests."</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">26</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">27</td>
	<td class="source"><code>    should.exist(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">28</td>
	<td class="source"><code>      process.env.EVENTHUB_NAME,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">29</td>
	<td class="source"><code>      "define EVENTHUB_NAME in your environment before running integration tests."</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">30</td>
	<td class="source"><code>    );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">31</td>
	<td class="source"><code>    hubInfo = await client.getHubRuntimeInformation();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">32</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">33</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">34</td>
	<td class="source"><code>  after("close the connection", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">35</td>
	<td class="source"><code>    await client.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">36</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">37</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">38</td>
	<td class="source"><code>  afterEach("close the sender link", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">39</td>
	<td class="source"><code>    if (breceiver) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">40</td>
	<td class="source"><code>      await breceiver.close();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">41</td>
	<td class="source"><code>      debug("After each - Batching Receiver closed.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">42</td>
	<td class="source"><code>    }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">43</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">44</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">45</td>
	<td class="source"><code>  describe("with partitionId 0 as number", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">46</td>
	<td class="source"><code>    it("should work for receiveBatch", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">47</td>
	<td class="source"><code>      const result = await client.receiveBatch(0, 10, 20, { eventPosition: EventPosition.fromSequenceNumber(0) });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">48</td>
	<td class="source"><code>      should.equal(true, Array.isArray(result));</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">49</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">50</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">51</td>
	<td class="source"><code>    it("should work for receive", function(done: Mocha.Done): void {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 52, Column 11: "'rcvHandler' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">52</td>
	<td class="source"><code>      let rcvHandler: ReceiveHandler;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">53</td>
	<td class="source"><code>      let stopCalled = false;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 54, Column 23: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">54</td>
	<td class="source"><code>      const onError = (error: MessagingError | Error) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">55</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; An error occurred: %O", error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">56</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 57, Column 21: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">57</td>
	<td class="source"><code>      const onMsg = (data: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">58</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; Received Data: %O", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">59</td>
	<td class="source"><code>        if (!stopCalled) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">60</td>
	<td class="source"><code>          stopCalled = true;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">61</td>
	<td class="source"><code>          rcvHandler</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">62</td>
	<td class="source"><code>            .stop()</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 63, Column 19: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">63</td>
	<td class="source"><code>            .then(() =&#62; {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 64, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">64</td>
	<td class="source"><code>              done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">65</td>
	<td class="source"><code>            })</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">66</td>
	<td class="source"><code>            .catch(() =&#62; {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 67, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">67</td>
	<td class="source"><code>              done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">68</td>
	<td class="source"><code>            });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">69</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">70</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">71</td>
	<td class="source"><code>      rcvHandler = client.receive(0, onMsg, onError, { epoch: 1, eventPosition: EventPosition.fromOffset("0") });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">72</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">73</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">74</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">75</td>
	<td class="source"><code>  describe("with EventPosition specified as", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">76</td>
	<td class="source"><code>    it("'from end of stream' should receive messages correctly", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">77</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">78</td>
	<td class="source"><code>      for (let i = 0; i &#60; 10; i++) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">79</td>
	<td class="source"><code>        const ed: EventData = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">80</td>
	<td class="source"><code>          body: "Hello awesome world " + i</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">81</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">82</td>
	<td class="source"><code>        await client.send(ed, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">83</td>
	<td class="source"><code>        debug("sent message - " + i);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">84</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">85</td>
	<td class="source"><code>      debug("Creating new receiver with offset EndOfStream");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">86</td>
	<td class="source"><code>      breceiver = BatchingReceiver.create((client as any)._context, partitionId, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">87</td>
	<td class="source"><code>        eventPosition: EventPosition.fromEnd()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">88</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">89</td>
	<td class="source"><code>      const data1 = await breceiver.receive(10, 10);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">90</td>
	<td class="source"><code>      data1.length.should.equal(0, "Unexpected message received when using EventPosition.fromEnd()");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">91</td>
	<td class="source"><code>      // send a new message. We should only receive this new message.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">92</td>
	<td class="source"><code>      const uid = uuid();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">93</td>
	<td class="source"><code>      const ed: EventData = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">94</td>
	<td class="source"><code>        body: "New message",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">95</td>
	<td class="source"><code>        applicationProperties: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">96</td>
	<td class="source"><code>          stamp: uid</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">97</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">98</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">99</td>
	<td class="source"><code>      await client.send(ed, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">100</td>
	<td class="source"><code>      debug("&#62;&#62;&#62;&#62;&#62;&#62;&#62; Sent the new message after creating the receiver. We should only receive this message.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">101</td>
	<td class="source"><code>      const data2 = await breceiver.receive(10, 20);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">102</td>
	<td class="source"><code>      debug("received messages: ", data2);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">103</td>
	<td class="source"><code>      data2.length.should.equal(1, "Failed to receive the expected one single message");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">104</td>
	<td class="source"><code>      data2[0].applicationProperties!.stamp.should.equal(uid, "Message received with unexpected uid");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">105</td>
	<td class="source"><code>      debug("Next receive on this partition should not receive any messages.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">106</td>
	<td class="source"><code>      const data3 = await breceiver.receive(10, 10);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">107</td>
	<td class="source"><code>      data3.length.should.equal(0, "Unexpected message received");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">108</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">109</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">110</td>
	<td class="source"><code>    it("'after a particular offset' should receive messages correctly", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">111</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">112</td>
	<td class="source"><code>      const pInfo = await client.getPartitionInformation(partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">113</td>
	<td class="source"><code>      debug(`Creating new receiver with last enqueued offset: "${pInfo.lastEnqueuedOffset}".`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">114</td>
	<td class="source"><code>      breceiver = BatchingReceiver.create((client as any)._context, parseInt(partitionId), {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">115</td>
	<td class="source"><code>        eventPosition: EventPosition.fromOffset(pInfo.lastEnqueuedOffset)</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">116</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">117</td>
	<td class="source"><code>      debug("Establishing the receiver link...");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">118</td>
	<td class="source"><code>      const d = await breceiver.receive(10, 10);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">119</td>
	<td class="source"><code>      d.length.should.equal(0);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">120</td>
	<td class="source"><code>      // send a new message. We should only receive this new message.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">121</td>
	<td class="source"><code>      const uid = uuid();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">122</td>
	<td class="source"><code>      const ed: EventData = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">123</td>
	<td class="source"><code>        body: "New message after last enqueued offset",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">124</td>
	<td class="source"><code>        applicationProperties: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">125</td>
	<td class="source"><code>          stamp: uid</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">126</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">127</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">128</td>
	<td class="source"><code>      await client.send(ed, "0");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">129</td>
	<td class="source"><code>      debug("Sent the new message after creating the receiver. We should only receive this message.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">130</td>
	<td class="source"><code>      const data = await breceiver.receive(10, 20);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">131</td>
	<td class="source"><code>      debug("received messages: ", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">132</td>
	<td class="source"><code>      data.length.should.equal(1);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">133</td>
	<td class="source"><code>      data[0].applicationProperties!.stamp.should.equal(uid);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">134</td>
	<td class="source"><code>      debug("Next receive on this partition should not receive any messages.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">135</td>
	<td class="source"><code>      const data2 = await breceiver.receive(10, 10);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">136</td>
	<td class="source"><code>      data2.length.should.equal(0);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">137</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">138</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">139</td>
	<td class="source"><code>    it("'after a particular offset with isInclusive true' should receive messages correctly", async function(): Promise&#60;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">140</td>
	<td class="source"><code>      void</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">141</td>
	<td class="source"><code>    &#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">142</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">143</td>
	<td class="source"><code>      const uid = uuid();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">144</td>
	<td class="source"><code>      const ed: EventData = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">145</td>
	<td class="source"><code>        body: "New message after last enqueued offset",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">146</td>
	<td class="source"><code>        applicationProperties: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">147</td>
	<td class="source"><code>          stamp: uid</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">148</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">149</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">150</td>
	<td class="source"><code>      await client.send(ed, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">151</td>
	<td class="source"><code>      debug(`Sent message 1 with stamp: ${uid}.`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">152</td>
	<td class="source"><code>      const pInfo = await client.getPartitionInformation(partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">153</td>
	<td class="source"><code>      const uid2 = uuid();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">154</td>
	<td class="source"><code>      const ed2: EventData = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">155</td>
	<td class="source"><code>        body: "New message after last enqueued offset",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">156</td>
	<td class="source"><code>        applicationProperties: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">157</td>
	<td class="source"><code>          stamp: uid2</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">158</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">159</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">160</td>
	<td class="source"><code>      await client.send(ed2, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">161</td>
	<td class="source"><code>      debug(`Sent message 2 with stamp: ${uid} after getting the enqueued offset.`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">162</td>
	<td class="source"><code>      debug(`Creating new receiver with last enqueued offset: "${pInfo.lastEnqueuedOffset}".`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">163</td>
	<td class="source"><code>      breceiver = BatchingReceiver.create((client as any)._context, partitionId, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">164</td>
	<td class="source"><code>        eventPosition: EventPosition.fromOffset(pInfo.lastEnqueuedOffset, true)</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">165</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">166</td>
	<td class="source"><code>      debug("We should receive the last 2 messages.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">167</td>
	<td class="source"><code>      const data = await breceiver.receive(10, 30);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">168</td>
	<td class="source"><code>      debug("received messages: ", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">169</td>
	<td class="source"><code>      data.length.should.equal(2, "Failed to receive the two expected messages");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">170</td>
	<td class="source"><code>      data[0].applicationProperties!.stamp.should.equal(uid, "First message has unexpected uid");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">171</td>
	<td class="source"><code>      data[1].applicationProperties!.stamp.should.equal(uid2, "Second message has unexpected uid");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">172</td>
	<td class="source"><code>      debug("Next receive on this partition should not receive any messages.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">173</td>
	<td class="source"><code>      const data2 = await breceiver.receive(10, 10);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">174</td>
	<td class="source"><code>      data2.length.should.equal(0, "Unexpected message received");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">175</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">176</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">177</td>
	<td class="source"><code>    it("'from a particular enqueued time' should receive messages correctly", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">178</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">179</td>
	<td class="source"><code>      const pInfo = await client.getPartitionInformation(partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">180</td>
	<td class="source"><code>      debug(`Creating new receiver with last enqueued time: "${pInfo.lastEnqueuedTimeUtc}".`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">181</td>
	<td class="source"><code>      breceiver = BatchingReceiver.create((client as any)._context, partitionId, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">182</td>
	<td class="source"><code>        eventPosition: EventPosition.fromEnqueuedTime(pInfo.lastEnqueuedTimeUtc)</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">183</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">184</td>
	<td class="source"><code>      debug("Establishing the receiver link...");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">185</td>
	<td class="source"><code>      const d = await breceiver.receive(10, 10);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">186</td>
	<td class="source"><code>      d.length.should.equal(0, "Unexpected message received before sending any message");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">187</td>
	<td class="source"><code>      // send a new message. We should only receive this new message.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">188</td>
	<td class="source"><code>      const uid = uuid();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">189</td>
	<td class="source"><code>      const ed: EventData = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">190</td>
	<td class="source"><code>        body: "New message after last enqueued time " + pInfo.lastEnqueuedTimeUtc,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">191</td>
	<td class="source"><code>        applicationProperties: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">192</td>
	<td class="source"><code>          stamp: uid</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">193</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">194</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">195</td>
	<td class="source"><code>      await client.send(ed, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">196</td>
	<td class="source"><code>      debug("Sent the new message after creating the receiver. We should only receive this message.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">197</td>
	<td class="source"><code>      const data = await breceiver.receive(10, 20);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">198</td>
	<td class="source"><code>      debug("received messages: ", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">199</td>
	<td class="source"><code>      data.length.should.equal(1, "Failed to received the expected single message");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">200</td>
	<td class="source"><code>      data[0].applicationProperties!.stamp.should.equal(uid);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">201</td>
	<td class="source"><code>      debug("Next receive on this partition should not receive any messages.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">202</td>
	<td class="source"><code>      const data2 = await breceiver.receive(10, 10);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">203</td>
	<td class="source"><code>      data2.length.should.equal(0, "Unexpected message received");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">204</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">205</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">206</td>
	<td class="source"><code>    it("'after the particular sequence number' should receive messages correctly", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">207</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">208</td>
	<td class="source"><code>      const pInfo = await client.getPartitionInformation(partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">209</td>
	<td class="source"><code>      // send a new message. We should only receive this new message.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">210</td>
	<td class="source"><code>      const uid = uuid();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">211</td>
	<td class="source"><code>      const ed: EventData = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">212</td>
	<td class="source"><code>        body: "New message after last enqueued sequence number " + pInfo.lastSequenceNumber,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">213</td>
	<td class="source"><code>        applicationProperties: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">214</td>
	<td class="source"><code>          stamp: uid</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">215</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">216</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">217</td>
	<td class="source"><code>      await client.send(ed, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">218</td>
	<td class="source"><code>      debug(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">219</td>
	<td class="source"><code>        "Sent the new message after getting the partition runtime information. We should only receive this message."</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">220</td>
	<td class="source"><code>      );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">221</td>
	<td class="source"><code>      debug(`Creating new receiver with last enqueued sequence number: "${pInfo.lastSequenceNumber}".`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">222</td>
	<td class="source"><code>      breceiver = BatchingReceiver.create((client as any)._context, partitionId, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">223</td>
	<td class="source"><code>        eventPosition: EventPosition.fromSequenceNumber(pInfo.lastSequenceNumber)</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">224</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">225</td>
	<td class="source"><code>      const data = await breceiver.receive(10, 20);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">226</td>
	<td class="source"><code>      debug("received messages: ", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">227</td>
	<td class="source"><code>      data.length.should.equal(1, "Failed to receive the expected single message");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">228</td>
	<td class="source"><code>      data[0].applicationProperties!.stamp.should.equal(uid, "Received message has unexpected uid");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">229</td>
	<td class="source"><code>      debug("Next receive on this partition should not receive any messages.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">230</td>
	<td class="source"><code>      const data2 = await breceiver.receive(10, 10);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">231</td>
	<td class="source"><code>      data2.length.should.equal(0, "Unexpected message received");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">232</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">233</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">234</td>
	<td class="source"><code>    it("'after the particular sequence number' with isInclusive true should receive messages correctly", async function(): Promise&#60;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">235</td>
	<td class="source"><code>      void</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">236</td>
	<td class="source"><code>    &#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">237</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">238</td>
	<td class="source"><code>      const uid = uuid();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">239</td>
	<td class="source"><code>      const ed: EventData = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">240</td>
	<td class="source"><code>        body: "New message before getting the last sequence number",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">241</td>
	<td class="source"><code>        applicationProperties: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">242</td>
	<td class="source"><code>          stamp: uid</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">243</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">244</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">245</td>
	<td class="source"><code>      await client.send(ed, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">246</td>
	<td class="source"><code>      debug(`Sent message 1 with stamp: ${uid}.`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">247</td>
	<td class="source"><code>      const pInfo = await client.getPartitionInformation(partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">248</td>
	<td class="source"><code>      const uid2 = uuid();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">249</td>
	<td class="source"><code>      const ed2: EventData = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">250</td>
	<td class="source"><code>        body: "New message after the last enqueued offset",</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">251</td>
	<td class="source"><code>        applicationProperties: {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">252</td>
	<td class="source"><code>          stamp: uid2</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">253</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">254</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">255</td>
	<td class="source"><code>      await client.send(ed2, partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">256</td>
	<td class="source"><code>      debug(`Sent message 2 with stamp: ${uid}.`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">257</td>
	<td class="source"><code>      debug(`Creating new receiver with last sequence number: "${pInfo.lastSequenceNumber}".`);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">258</td>
	<td class="source"><code>      breceiver = BatchingReceiver.create((client as any)._context, partitionId, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">259</td>
	<td class="source"><code>        eventPosition: EventPosition.fromSequenceNumber(pInfo.lastSequenceNumber, true)</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">260</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">261</td>
	<td class="source"><code>      debug("We should receive the last 2 messages.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">262</td>
	<td class="source"><code>      const data = await breceiver.receive(10, 30);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">263</td>
	<td class="source"><code>      debug("received messages: ", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">264</td>
	<td class="source"><code>      data.length.should.equal(2, "Failed to received two expected messages");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">265</td>
	<td class="source"><code>      data[0].applicationProperties!.stamp.should.equal(uid, "Message 1 has unexpected uid");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">266</td>
	<td class="source"><code>      data[1].applicationProperties!.stamp.should.equal(uid2, "Message 2 has unexpected uid");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">267</td>
	<td class="source"><code>      debug("Next receive on this partition should not receive any messages.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">268</td>
	<td class="source"><code>      const data2 = await breceiver.receive(10, 10);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">269</td>
	<td class="source"><code>      data2.length.should.equal(0, "Unexpected message received");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">270</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">271</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">272</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">273</td>
	<td class="source"><code>  describe("in batch mode", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">274</td>
	<td class="source"><code>    it("should receive messages correctly", async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">275</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">276</td>
	<td class="source"><code>      const data = await client.receiveBatch(partitionId, 5, 10);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">277</td>
	<td class="source"><code>      debug("received messages: ", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">278</td>
	<td class="source"><code>      data.length.should.equal(5, "Failed to receive five expected messages");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">279</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">280</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">281</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">282</td>
	<td class="source"><code>  // describe("with receiverRuntimeMetricEnabled", function (): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">283</td>
	<td class="source"><code>  //   it("should have ReceiverRuntimeInfo populated", async function (): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">284</td>
	<td class="source"><code>  //     const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">285</td>
	<td class="source"><code>  //     sender = client.createSender(partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">286</td>
	<td class="source"><code>  //     for (let i = 0; i &#60; 10; i++) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">287</td>
	<td class="source"><code>  //       const ed: EventData = {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">288</td>
	<td class="source"><code>  //         body: "Hello awesome world " + i</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">289</td>
	<td class="source"><code>  //       }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">290</td>
	<td class="source"><code>  //       await sender.send(ed);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">291</td>
	<td class="source"><code>  //       debug("sent message - " + i);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">292</td>
	<td class="source"><code>  //     }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">293</td>
	<td class="source"><code>  //     debug("Getting the partition information");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">294</td>
	<td class="source"><code>  //     const pInfo = await client.getPartitionInformation(partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">295</td>
	<td class="source"><code>  //     debug("partition info: ", pInfo);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">296</td>
	<td class="source"><code>  //     debug("Creating new receiver with offset EndOfStream");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">297</td>
	<td class="source"><code>  //     receiver = client.createReceiver(partitionId, { eventPosition: EventPosition.fromStart(), enableReceiverRuntimeMetric: true });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">298</td>
	<td class="source"><code>  //     let data = await receiver.receive(1, 10);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">299</td>
	<td class="source"><code>  //     debug("receiver.runtimeInfo ", receiver.runtimeInfo);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">300</td>
	<td class="source"><code>  //     data.length.should.equal(1);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">301</td>
	<td class="source"><code>  //     should.exist(receiver.runtimeInfo);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">302</td>
	<td class="source"><code>  //     receiver.runtimeInfo!.lastEnqueuedOffset!.should.equal(pInfo.lastEnqueuedOffset);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">303</td>
	<td class="source"><code>  //     receiver.runtimeInfo!.lastSequenceNumber!.should.equal(pInfo.lastSequenceNumber);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">304</td>
	<td class="source"><code>  //     receiver.runtimeInfo!.lastEnqueuedTimeUtc!.getTime().should.equal(pInfo.lastEnqueuedTimeUtc.getTime());</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">305</td>
	<td class="source"><code>  //     receiver.runtimeInfo!.partitionId!.should.equal(pInfo.partitionId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">306</td>
	<td class="source"><code>  //     receiver.runtimeInfo!.retrievalTime!.getTime().should.be.greaterThan(Date.now() - 60000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">307</td>
	<td class="source"><code>  //   });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">308</td>
	<td class="source"><code>  // });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">309</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">310</td>
	<td class="source"><code>  describe("with epoch", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">311</td>
	<td class="source"><code>    it("should behave correctly when a receiver with lower epoch value is connected after a receiver with higher epoch value to a partition in a consumer group", function(done: Mocha.Done): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">312</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">313</td>
	<td class="source"><code>      let epochRcvr1: ReceiveHandler;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">314</td>
	<td class="source"><code>      let epochRcvr2: ReceiveHandler;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 315, Column 23: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">315</td>
	<td class="source"><code>      const onError = (error: MessagingError | Error) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">316</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; epoch Receiver 1", error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">317</td>
	<td class="source"><code>        throw new Error("An Error should not have happened for epoch receiver with epoch value 2.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">318</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 319, Column 21: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">319</td>
	<td class="source"><code>      const onMsg = (data: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">320</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; epoch Receiver 1", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">321</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 322, Column 7: "'epochRcvr1' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">322</td>
	<td class="source"><code>      epochRcvr1 = client.receive(partitionId, onMsg, onError, { epoch: 2, eventPosition: EventPosition.fromEnd() });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">323</td>
	<td class="source"><code>      debug("Created epoch receiver 1 %s", epochRcvr1.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">324</td>
	<td class="source"><code>      setTimeout(() =&#62; {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 325, Column 26: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">325</td>
	<td class="source"><code>        const onError2 = (error: MessagingError | Error) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">326</td>
	<td class="source"><code>          debug("&#62;&#62;&#62;&#62; epoch Receiver 2", error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">327</td>
	<td class="source"><code>          should.exist(error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">328</td>
	<td class="source"><code>          should.equal(error.name, "ReceiverDisconnectedError");</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 329, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 329, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 329, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">329</td>
	<td class="source"><code>          epochRcvr2</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">330</td>
	<td class="source"><code>            .stop()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">331</td>
	<td class="source"><code>            .then(() =&#62; epochRcvr1.stop())</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 332, Column 19: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">332</td>
	<td class="source"><code>            .then(() =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">333</td>
	<td class="source"><code>              debug("Successfully closed the epoch receivers 1 and 2.");</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 334, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">334</td>
	<td class="source"><code>              done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">335</td>
	<td class="source"><code>            })</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">336</td>
	<td class="source"><code>            .catch(err =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">337</td>
	<td class="source"><code>              debug("error occurred while closing the receivers... ", err);</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 338, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">338</td>
	<td class="source"><code>              done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">339</td>
	<td class="source"><code>            });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">340</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 341, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">341</td>
	<td class="source"><code>        const onMsg2 = (data: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">342</td>
	<td class="source"><code>          debug("&#62;&#62;&#62;&#62; epoch Receiver 2", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">343</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">344</td>
	<td class="source"><code>        epochRcvr2 = client.receive(partitionId, onMsg2, onError2, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">345</td>
	<td class="source"><code>          epoch: 1,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">346</td>
	<td class="source"><code>          eventPosition: EventPosition.fromEnd()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">347</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">348</td>
	<td class="source"><code>        debug("Created epoch receiver 2 %s", epochRcvr2.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">349</td>
	<td class="source"><code>      }, 3000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">350</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">351</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">352</td>
	<td class="source"><code>    it("should behave correctly when a receiver with higher epoch value is connected after a receiver with lower epoch value to a partition in a consumer group", function(done: Mocha.Done): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">353</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 354, Column 11: "'epochRcvr1' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">354</td>
	<td class="source"><code>      let epochRcvr1: ReceiveHandler;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">355</td>
	<td class="source"><code>      let epochRcvr2: ReceiveHandler;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 356, Column 23: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">356</td>
	<td class="source"><code>      const onError = (error: MessagingError | Error) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">357</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; epoch Receiver 1", error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">358</td>
	<td class="source"><code>        should.exist(error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">359</td>
	<td class="source"><code>        should.equal(error.name, "ReceiverDisconnectedError");</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 360, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 360, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 360, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">360</td>
	<td class="source"><code>        epochRcvr1</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">361</td>
	<td class="source"><code>          .stop()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">362</td>
	<td class="source"><code>          .then(() =&#62; epochRcvr2.stop())</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 363, Column 17: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">363</td>
	<td class="source"><code>          .then(() =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">364</td>
	<td class="source"><code>            debug("Successfully closed the epoch receivers 1 and 2.");</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 365, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">365</td>
	<td class="source"><code>            done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">366</td>
	<td class="source"><code>          })</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">367</td>
	<td class="source"><code>          .catch(err =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">368</td>
	<td class="source"><code>            debug("error occurred while closing the receivers... ", err);</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 369, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">369</td>
	<td class="source"><code>            done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">370</td>
	<td class="source"><code>          });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">371</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 372, Column 21: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">372</td>
	<td class="source"><code>      const onMsg = (data: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">373</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; epoch Receiver 1", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">374</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">375</td>
	<td class="source"><code>      epochRcvr1 = client.receive(partitionId, onMsg, onError, { epoch: 1, eventPosition: EventPosition.fromEnd() });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">376</td>
	<td class="source"><code>      debug("Created epoch receiver 1 %s", epochRcvr1.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">377</td>
	<td class="source"><code>      setTimeout(() =&#62; {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 378, Column 26: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">378</td>
	<td class="source"><code>        const onError2 = (error: MessagingError | Error) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">379</td>
	<td class="source"><code>          debug("&#62;&#62;&#62;&#62; epoch Receiver 2", error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">380</td>
	<td class="source"><code>          throw new Error("An Error should not have happened for epoch receiver with epoch value 2.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">381</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 382, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">382</td>
	<td class="source"><code>        const onMsg2 = (data: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">383</td>
	<td class="source"><code>          debug("&#62;&#62;&#62;&#62; epoch Receiver 2", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">384</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">385</td>
	<td class="source"><code>        epochRcvr2 = client.receive(partitionId, onMsg2, onError2, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">386</td>
	<td class="source"><code>          epoch: 2,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">387</td>
	<td class="source"><code>          eventPosition: EventPosition.fromEnd()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">388</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">389</td>
	<td class="source"><code>        debug("Created epoch receiver 2 %s", epochRcvr2.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">390</td>
	<td class="source"><code>      }, 3000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">391</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">392</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">393</td>
	<td class="source"><code>    it("should behave correctly when a non epoch receiver is created after an epoch receiver", function(done: Mocha.Done): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">394</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">395</td>
	<td class="source"><code>      let epochRcvr: ReceiveHandler;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 396, Column 11: "'nonEpochRcvr' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">396</td>
	<td class="source"><code>      let nonEpochRcvr: ReceiveHandler;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 397, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">397</td>
	<td class="source"><code>      const onerr1 = (error: MessagingError | Error) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">398</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; epoch Receiver ", error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">399</td>
	<td class="source"><code>        throw new Error("An Error should not have happened for epoch receiver with epoch value 1.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">400</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 401, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">401</td>
	<td class="source"><code>      const onmsg1 = (data: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">402</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; epoch Receiver ", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">403</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 404, Column 7: "'epochRcvr' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">404</td>
	<td class="source"><code>      epochRcvr = client.receive(partitionId, onmsg1, onerr1, { epoch: 1, eventPosition: EventPosition.fromEnd() });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">405</td>
	<td class="source"><code>      debug("Created epoch receiver %s", epochRcvr.name);</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 406, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">406</td>
	<td class="source"><code>      const onerr2 = (error: MessagingError | Error) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">407</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; non epoch Receiver", error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">408</td>
	<td class="source"><code>        should.exist(error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">409</td>
	<td class="source"><code>        should.equal(error.name, "ReceiverDisconnectedError");</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 410, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 410, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 410, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">410</td>
	<td class="source"><code>        nonEpochRcvr</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">411</td>
	<td class="source"><code>          .stop()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">412</td>
	<td class="source"><code>          .then(() =&#62; epochRcvr.stop())</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 413, Column 17: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">413</td>
	<td class="source"><code>          .then(() =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">414</td>
	<td class="source"><code>            debug("Successfully closed the nonEpoch and epoch receivers");</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 415, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">415</td>
	<td class="source"><code>            done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">416</td>
	<td class="source"><code>          })</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">417</td>
	<td class="source"><code>          .catch(err =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">418</td>
	<td class="source"><code>            debug("error occurred while closing the receivers... ", err);</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 419, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">419</td>
	<td class="source"><code>            done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">420</td>
	<td class="source"><code>          });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">421</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 422, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">422</td>
	<td class="source"><code>      const onmsg2 = (data: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">423</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; non epoch Receiver", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">424</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">425</td>
	<td class="source"><code>      nonEpochRcvr = client.receive(partitionId, onmsg2, onerr2, { eventPosition: EventPosition.fromEnd() });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">426</td>
	<td class="source"><code>      debug("Created non epoch receiver %s", nonEpochRcvr.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">427</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">428</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">429</td>
	<td class="source"><code>    it("should behave correctly when an epoch receiver is created after a non epoch receiver", function(done: Mocha.Done): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">430</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">431</td>
	<td class="source"><code>      let epochRcvr: ReceiveHandler;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 432, Column 11: "'nonEpochRcvr' is never reassigned. Use 'const' instead."
		<a href="http://eslint.org/docs/rules/prefer-const" target="_blank">prefer-const</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">432</td>
	<td class="source"><code>      let nonEpochRcvr: ReceiveHandler;</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 433, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">433</td>
	<td class="source"><code>      const onerr3 = (error: MessagingError | Error) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">434</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; non epoch Receiver", error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">435</td>
	<td class="source"><code>        should.exist(error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">436</td>
	<td class="source"><code>        should.equal(error.name, "ReceiverDisconnectedError");</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 437, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 437, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 437, Column 9: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">437</td>
	<td class="source"><code>        nonEpochRcvr</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">438</td>
	<td class="source"><code>          .stop()</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">439</td>
	<td class="source"><code>          .then(() =&#62; epochRcvr.stop())</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 440, Column 17: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">440</td>
	<td class="source"><code>          .then(() =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">441</td>
	<td class="source"><code>            debug("Successfully closed the nonEpoch and epoch receivers");</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 442, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">442</td>
	<td class="source"><code>            done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">443</td>
	<td class="source"><code>          })</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">444</td>
	<td class="source"><code>          .catch(err =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">445</td>
	<td class="source"><code>            debug("error occurred while closing the receivers... ", err);</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 446, Column 13: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">446</td>
	<td class="source"><code>            done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">447</td>
	<td class="source"><code>          });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">448</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 449, Column 22: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">449</td>
	<td class="source"><code>      const onmsg3 = (data: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">450</td>
	<td class="source"><code>        debug("&#62;&#62;&#62;&#62; non epoch Receiver", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">451</td>
	<td class="source"><code>      };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">452</td>
	<td class="source"><code>      nonEpochRcvr = client.receive(partitionId, onmsg3, onerr3, { eventPosition: EventPosition.fromEnd() });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">453</td>
	<td class="source"><code>      debug("Created non epoch receiver %s", nonEpochRcvr.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">454</td>
	<td class="source"><code>      setTimeout(() =&#62; {</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 455, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">455</td>
	<td class="source"><code>        const onerr4 = (error: MessagingError | Error) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">456</td>
	<td class="source"><code>          debug("&#62;&#62;&#62;&#62; epoch Receiver ", error);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">457</td>
	<td class="source"><code>          throw new Error("OnErr4 &#62;&#62; An Error should not have happened for epoch receiver with epoch value 1.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">458</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 459, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">459</td>
	<td class="source"><code>        const onmsg4 = (data: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">460</td>
	<td class="source"><code>          debug("&#62;&#62;&#62;&#62; epoch Receiver ", data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">461</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">462</td>
	<td class="source"><code>        epochRcvr = client.receive(partitionId, onmsg4, onerr4, { epoch: 1, eventPosition: EventPosition.fromEnd() });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">463</td>
	<td class="source"><code>        debug("Created epoch receiver %s", epochRcvr.name);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">464</td>
	<td class="source"><code>      }, 3000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">465</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">466</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">467</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">468</td>
	<td class="source"><code>  describe("Negative scenarios", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">469</td>
	<td class="source"><code>    describe("on invalid partition ids like", function(): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">470</td>
	<td class="source"><code>      const invalidIds = ["XYZ", "-1", "1000", "-"];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">471</td>
	<td class="source"><code>      invalidIds.forEach(function(id: string): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">472</td>
	<td class="source"><code>        it(`"${id}" should throw an error`, async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">473</td>
	<td class="source"><code>          try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">474</td>
	<td class="source"><code>            debug("Created receiver and will be receiving messages from partition id ...", id);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">475</td>
	<td class="source"><code>            const d = await client.receiveBatch(id, 10, 3);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">476</td>
	<td class="source"><code>            debug("received messages ", d.length);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">477</td>
	<td class="source"><code>          } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">478</td>
	<td class="source"><code>            debug("Receiver received an error", err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">479</td>
	<td class="source"><code>            should.exist(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">480</td>
	<td class="source"><code>            err.message.should.match(</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">481</td>
	<td class="source"><code>              /.*The specified partition is invalid for an EventHub partition sender or receiver.*/gi</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">482</td>
	<td class="source"><code>            );</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">483</td>
	<td class="source"><code>          }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">484</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">485</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">486</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">487</td>
	<td class="source"><code>      it(`" " should throw an invalid EventHub address error`, async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">488</td>
	<td class="source"><code>        try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">489</td>
	<td class="source"><code>          const id = " ";</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">490</td>
	<td class="source"><code>          debug("Created receiver and will be receiving messages from partition id ...", id);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">491</td>
	<td class="source"><code>          const d = await client.receiveBatch(id, 10, 3);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">492</td>
	<td class="source"><code>          debug("received messages ", d.length);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">493</td>
	<td class="source"><code>        } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">494</td>
	<td class="source"><code>          debug("Receiver received an error", err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">495</td>
	<td class="source"><code>          should.exist(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">496</td>
	<td class="source"><code>          err.message.should.match(/.*Invalid EventHub address. It must be either of the following.*/gi);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">497</td>
	<td class="source"><code>        }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">498</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">499</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">500</td>
	<td class="source"><code>      const invalidIds2 = [""];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">501</td>
	<td class="source"><code>      invalidIds2.forEach(function(id: string): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">502</td>
	<td class="source"><code>        it(`"${id}" should throw an error`, async function(): Promise&#60;void&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">503</td>
	<td class="source"><code>          try {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">504</td>
	<td class="source"><code>            await client.receiveBatch(id, 10, 3);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">505</td>
	<td class="source"><code>          } catch (err) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">506</td>
	<td class="source"><code>            debug(`&#62;&#62;&#62;&#62; Received error - `, err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">507</td>
	<td class="source"><code>            should.exist(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">508</td>
	<td class="source"><code>          }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">509</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">510</td>
	<td class="source"><code>      });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">511</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">512</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">513</td>
	<td class="source"><code>    it("should receive 'QuotaExceededError' when attempting to connect more than 5 receivers to a partition in a consumer group", function(done: Mocha.Done): void {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">514</td>
	<td class="source"><code>      const partitionId = hubInfo.partitionIds[0];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">515</td>
	<td class="source"><code>      const rcvHndlrs: ReceiveHandler[] = [];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">516</td>
	<td class="source"><code>      const rcvrs: any[] = [];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">517</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">518</td>
	<td class="source"><code>      // This test does not require recieving any messages.  Just attempting to connect the 6th receiver causes</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">519</td>
	<td class="source"><code>      // onerr2() to be called with QuotaExceededError.  So it's fastest to use EventPosition.fromEnd().</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">520</td>
	<td class="source"><code>      // Using EventPosition.fromStart() can cause timeouts or ServiceUnavailableException if the EventHub has</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">521</td>
	<td class="source"><code>      // a large number of messages.</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">522</td>
	<td class="source"><code>      const eventPosition = EventPosition.fromEnd();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">523</td>
	<td class="source"><code></code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">524</td>
	<td class="source"><code>      debug("&#62;&#62;&#62; Receivers length: ", rcvHndlrs.length);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">525</td>
	<td class="source"><code>      for (let i = 1; i &#60;= 5; i++) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">526</td>
	<td class="source"><code>        const rcvrId = `rcvr-${i}`;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">527</td>
	<td class="source"><code>        debug(rcvrId);</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 528, Column 23: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 528, Column 24: "'data' is defined but never used."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/no-unused-vars" target="_blank">@typescript-eslint/no-unused-vars</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">528</td>
	<td class="source"><code>        const onMsg = (data: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">529</td>
	<td class="source"><code>          if (!rcvrs[i]) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">530</td>
	<td class="source"><code>            rcvrs[i] = rcvrId;</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">531</td>
	<td class="source"><code>            debug("receiver id %s", rcvrId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">532</td>
	<td class="source"><code>          }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">533</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 534, Column 25: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">534</td>
	<td class="source"><code>        const onError = (err: MessagingError | Error) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">535</td>
	<td class="source"><code>          debug("@@@@ Error received by receiver %s", rcvrId);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">536</td>
	<td class="source"><code>          debug(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">537</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">538</td>
	<td class="source"><code>        const rcvHndlr = client.receive(partitionId, onMsg, onError, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">539</td>
	<td class="source"><code>          eventPosition: eventPosition,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">540</td>
	<td class="source"><code>          identifier: rcvrId</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">541</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">542</td>
	<td class="source"><code>        rcvHndlrs.push(rcvHndlr);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">543</td>
	<td class="source"><code>      }</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">544</td>
	<td class="source"><code>      debug("&#62;&#62;&#62; Attached message handlers to each receiver.");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">545</td>
	<td class="source"><code>      setTimeout(() =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">546</td>
	<td class="source"><code>        debug(`Created 6th receiver - "rcvr-6"`);</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 547, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 547, Column 25: "'data' is defined but never used."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/no-unused-vars" target="_blank">@typescript-eslint/no-unused-vars</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">547</td>
	<td class="source"><code>        const onmsg2 = (data: EventData) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">548</td>
	<td class="source"><code>          // debug(data);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">549</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 550, Column 24: "Missing return type on function."
		<a href="http://eslint.org/docs/rules/@typescript-eslint/explicit-function-return-type" target="_blank">@typescript-eslint/explicit-function-return-type</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">550</td>
	<td class="source"><code>        const onerr2 = (err: MessagingError | Error) =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">551</td>
	<td class="source"><code>          debug("@@@@ Error received by receiver rcvr-6");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">552</td>
	<td class="source"><code>          debug(err);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">553</td>
	<td class="source"><code>          should.equal(err.name, "QuotaExceededError");</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">554</td>
	<td class="source"><code>          const promises = [];</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">555</td>
	<td class="source"><code>          for (const rcvr of rcvHndlrs) {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">556</td>
	<td class="source"><code>            promises.push(rcvr.stop());</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">557</td>
	<td class="source"><code>          }</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 558, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 558, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 558, Column 11: "Avoid using promises inside of callbacks."
		<a href="http://eslint.org/docs/rules/promise/no-promise-in-callback" target="_blank">promise/no-promise-in-callback</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">558</td>
	<td class="source"><code>          Promise.all(promises)</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-error">Error<strong></td>
	<td>
		Row 559, Column 19: "Each then() should return a value or throw"
		<a href="http://eslint.org/docs/rules/promise/always-return" target="_blank">promise/always-return</a>
	</td>
</tr><tr class="hit bg-error">
	<td class="line">559</td>
	<td class="source"><code>            .then(() =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">560</td>
	<td class="source"><code>              debug("Successfully closed all the receivers..");</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 561, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">561</td>
	<td class="source"><code>              done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">562</td>
	<td class="source"><code>            })</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">563</td>
	<td class="source"><code>            .catch(err =&#62; {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">564</td>
	<td class="source"><code>              debug("An error occurred while closing the receiver in the 'QuotaExceededError' test.", err);</code></td>
</tr>

<tr class="issue">
	<td><strong class="text-warning">Warning<strong></td>
	<td>
		Row 565, Column 15: "Avoid calling back inside of a promise."
		<a href="http://eslint.org/docs/rules/promise/no-callback-in-promise" target="_blank">promise/no-callback-in-promise</a>
	</td>
</tr><tr class="hit bg-warning">
	<td class="line">565</td>
	<td class="source"><code>              done();</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">566</td>
	<td class="source"><code>            });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">567</td>
	<td class="source"><code>        };</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">568</td>
	<td class="source"><code>        const failedRcvHandler = client.receive(partitionId, onmsg2, onerr2, {</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">569</td>
	<td class="source"><code>          eventPosition: eventPosition,</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">570</td>
	<td class="source"><code>          identifier: "rcvr-6"</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">571</td>
	<td class="source"><code>        });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">572</td>
	<td class="source"><code>        rcvHndlrs.push(failedRcvHandler);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">573</td>
	<td class="source"><code>      }, 5000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">574</td>
	<td class="source"><code>    });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">575</td>
	<td class="source"><code>  });</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">576</td>
	<td class="source"><code>}).timeout(90000);</code></td>
</tr>

<tr class="hit bg-success">
	<td class="line">577</td>
	<td class="source"><code></code></td>
</tr>

	</tbody>
</table>

			</div>
		</div>
	</td>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsTestSenderSpecTs" class="lint-result bg-success" data-group="f-21" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \test\sender.spec.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSamplesGetHubRuntimeInfoTs" class="lint-result bg-success" data-group="f-22" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \samples\getHubRuntimeInfo.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSamplesInteractiveLoginTs" class="lint-result bg-success" data-group="f-23" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \samples\interactiveLogin.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSamplesIotGetHubRuntimeInfoTs" class="lint-result bg-success" data-group="f-24" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \samples\iotGetHubRuntimeInfo.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSamplesLoginWithAzureAccountTs" class="lint-result bg-success" data-group="f-25" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \samples\loginWithAzureAccount.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSamplesReceiveMessagesLoopTs" class="lint-result bg-success" data-group="f-26" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \samples\receiveMessagesLoop.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSamplesReceiveMessagesStreamingTs" class="lint-result bg-success" data-group="f-27" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \samples\receiveMessagesStreaming.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSamplesSendMessagesTs" class="lint-result bg-success" data-group="f-28" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \samples\sendMessages.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSamplesServicePrincipalLoginTs" class="lint-result bg-success" data-group="f-29" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \samples\servicePrincipalLogin.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

<tr id="cCodeAzureSdkForJsSdkEventhubEventHubsSamplesUseProxyTs" class="lint-result bg-success" data-group="f-30" data-problem-count="0" tabindex="0">
    <th class="icon-box" colspan="1">
        <span class="caret"></span>
    </th>
    <th>
        \samples\useProxy.ts
    </th>
    <th class="result-summary">
      0 problems
    </th>
</tr>

				</tbody>
			</table>
		</div>
	</div>
	<script type="text/javascript">
	var lintResults = document.querySelectorAll('tr.lint-result'),
		filters = document.querySelectorAll('input[name="filters"]'),
		tabs = document.querySelectorAll('.nav-tabs > li > button');

	// helper functions
	function hideElement(element) {
		if (!element.className.includes('hidden')) {
			element.className = element.className + ' hidden';
		}
	}

	function toggleDisplay(element) {
		element.className = element.className.includes('hidden') ? element.className.replace(' hidden', '') : element.className + ' hidden';
	}

	// accordion
	for(var i = 0; i < lintResults.length; i++) {
		var result = lintResults[i];

		result.addEventListener('click', handleResultClick);
		result.addEventListener('keydown', function onKeydown(event) {
			if (event.which === 13) {
				handleResultClick.apply(this);
			}
		});
	}

	function handleResultClick() {
		if (!this.className.includes('bg-success')) {
			toggleAccordion.apply(this);
		}
		// TODO: Comment this back in when I can support it in example page
//		window.location.href = '#' + this.getAttribute('id');
	}

	function toggleAccordion() {
		var resultDetails = document.getElementsByClassName(this.getAttribute('data-group'));

		this.className = this.className.includes('open') ? this.className.replace(' open', '') : this.className + ' open';
		toggleDisplay(resultDetails[0]);
	}

	// filter
	for(var j = 0; j < filters.length; j++) {
		filters[j].addEventListener('change', filterResults);
	}

	function filterResults() {
		var filterValue = document.querySelector('input[name="filters"]:checked').value;


		for(var i = 0; i < lintResults.length; i++) {
			var result = lintResults[i];

			if (result.className.includes(filterValue)) {
				result.className = result.className.includes('hidden') ? result.className.replace(' hidden', '') : result.className;
			} else {
				hideElement(result);
			}

			if (result.className.includes('hidden') && result.className.includes('open')) {
				toggleAccordion.apply(result);
			}
		}
	}

	// tabs
	for(var k = 0; k < tabs.length; k++) {
		tabs[k].addEventListener('click', activateTab);
	}

	function activateTab() {
		var currentTabs = document.querySelectorAll(this.getAttribute('data-parent') + ' .nav-tabs > li'),
			tabPanes = document.querySelectorAll(this.getAttribute('data-parent') + ' .tab-pane'),
			tabContent = document.getElementById(this.getAttribute('data-content'));

		for(var i = 0; i < currentTabs.length; i++) {
			disableTabs(currentTabs[i]);
		}
		for(var j = 0; j < tabPanes.length; j++) {
			hideElement(tabPanes[j]);
		}
		this.parentNode.className = 'active';
		toggleDisplay(tabContent);
	}

	function disableTabs(tab) {
		tab.className = '';
	}
</script>
</body>
</html>
