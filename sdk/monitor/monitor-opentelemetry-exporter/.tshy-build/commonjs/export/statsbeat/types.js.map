{"version":3,"file":"types.js","sourceRoot":"","sources":["../../../../src/export/statsbeat/types.ts"],"names":[],"mappings":";AAAA,uCAAuC;AACvC,kCAAkC;;;AAuJlC,8DAMC;AA3JD,MAAa,gBAAgB;IAiC3B,YAAY,QAAgB,EAAE,IAAY;QACxC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;QAC3B,IAAI,CAAC,2BAA2B,GAAG,CAAC,CAAC;QACrC,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC;QAC/B,IAAI,CAAC,sBAAsB,GAAG,CAAC,CAAC;QAChC,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;QAClC,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,4BAA4B,GAAG,CAAC,CAAC;QACtC,IAAI,CAAC,gCAAgC,GAAG,CAAC,CAAC;QAC1C,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC;QAC5B,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;QAC1B,IAAI,CAAC,2BAA2B,GAAG,CAAC,CAAC;IACvC,CAAC;CACF;AAlDD,4CAkDC;AAEY,QAAA,kBAAkB,GAAG,MAAM,CAAC;AAE5B,QAAA,yBAAyB,GAAG,2BAA2B,CAAC;AAExD,QAAA,sBAAsB,GAAG,CAAC,CAAC;AAE3B,QAAA,yBAAyB,GAAG;IACvC,MAAM,EAAE,QAAQ;IAChB,GAAG,EAAE,KAAK;IACV,SAAS,EAAE,WAAW;IACtB,EAAE,EAAE,IAAI;IACR,OAAO,EAAE,SAAS;CACnB,CAAC;AAEF,IAAY,cAGX;AAHD,WAAY,cAAc;IACxB,oDAAkC,CAAA;IAClC,mCAAiB,CAAA;AACnB,CAAC,EAHW,cAAc,8BAAd,cAAc,QAGzB;AAED,IAAY,gBAWX;AAXD,WAAY,gBAAgB;IAC1B,2DAAuC,CAAA;IACvC,2DAAuC,CAAA;IACvC,+CAA2B,CAAA;IAC3B,qDAAiC,CAAA;IACjC,uDAAmC,CAAA;IACnC,yDAAqC,CAAA;IACrC,6DAAyC,CAAA;IACzC,+DAA2C,CAAA;IAC3C,qCAAiB,CAAA;IACjB,uCAAmB,CAAA;AACrB,CAAC,EAXW,gBAAgB,gCAAhB,gBAAgB,QAW3B;AAEY,QAAA,QAAQ,GAAG,kDAAkD,CAAC;AAC9D,QAAA,gBAAgB,GAAG,wBAAwB,CAAC;AAC5C,QAAA,WAAW,GAAG,aAAa,CAAC;AAC5B,QAAA,wBAAwB,GACnC,6HAA6H,CAAC;AACnH,QAAA,oBAAoB,GAC/B,iIAAiI,CAAC;AACvH,QAAA,YAAY,GAAG;IAC1B,YAAY;IACZ,aAAa;IACb,eAAe;IACf,aAAa;IACb,oBAAoB;IACpB,YAAY;IACZ,YAAY;IACZ,eAAe;IACf,kBAAkB;IAClB,iBAAiB;IACjB,SAAS;IACT,QAAQ;CACT,CAAC;AAoCF,IAAY,oBAGX;AAHD,WAAY,oBAAoB;IAC9B,qEAAW,CAAA;IACX,qFAAmB,CAAA;AACrB,CAAC,EAHW,oBAAoB,oCAApB,oBAAoB,QAG/B;AAED;;;GAGG;AACH,SAAgB,yBAAyB,CAAC,UAAkB;IAC1D,OAAO,CACL,UAAU,KAAK,GAAG,IAAI,eAAe;QACrC,UAAU,KAAK,GAAG,IAAI,YAAY;QAClC,UAAU,KAAK,GAAG,CAAC,qBAAqB;KACzC,CAAC;AACJ,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nexport class NetworkStatsbeat {\n  public time: number | undefined;\n\n  public lastTime: number;\n\n  public endpoint: string;\n\n  public host: string;\n\n  public totalRequestCount: number;\n\n  public lastRequestCount: number;\n\n  public totalSuccessfulRequestCount: number;\n\n  public totalReadFailureCount: number;\n\n  public totalWriteFailureCount: number;\n\n  public totalFailedRequestCount: { statusCode: number; count: number }[];\n\n  public retryCount: { statusCode: number; count: number }[];\n\n  public exceptionCount: { exceptionType: string; count: number }[];\n\n  public throttleCount: { statusCode: number; count: number }[];\n\n  public intervalRequestExecutionTime: number;\n\n  public lastIntervalRequestExecutionTime: number;\n\n  public averageRequestExecutionTime: number;\n\n  constructor(endpoint: string, host: string) {\n    this.endpoint = endpoint;\n    this.host = host;\n    this.totalRequestCount = 0;\n    this.totalSuccessfulRequestCount = 0;\n    this.totalReadFailureCount = 0;\n    this.totalWriteFailureCount = 0;\n    this.totalFailedRequestCount = [];\n    this.retryCount = [];\n    this.exceptionCount = [];\n    this.throttleCount = [];\n    this.intervalRequestExecutionTime = 0;\n    this.lastIntervalRequestExecutionTime = 0;\n    this.lastTime = +new Date();\n    this.lastRequestCount = 0;\n    this.averageRequestExecutionTime = 0;\n  }\n}\n\nexport const STATSBEAT_LANGUAGE = \"node\";\n\nexport const AZURE_MONITOR_AUTO_ATTACH = \"AZURE_MONITOR_AUTO_ATTACH\";\n\nexport const MAX_STATSBEAT_FAILURES = 3;\n\nexport const StatsbeatResourceProvider = {\n  appsvc: \"appsvc\",\n  aks: \"aks\",\n  functions: \"functions\",\n  vm: \"vm\",\n  unknown: \"unknown\",\n};\n\nexport enum AttachTypeName {\n  INTEGRATED_AUTO = \"IntegratedAuto\",\n  MANUAL = \"Manual\",\n}\n\nexport enum StatsbeatCounter {\n  SUCCESS_COUNT = \"Request_Success_Count\",\n  FAILURE_COUNT = \"Request_Failure_Count\",\n  RETRY_COUNT = \"Retry_Count\",\n  THROTTLE_COUNT = \"Throttle_Count\",\n  EXCEPTION_COUNT = \"Exception_Count\",\n  AVERAGE_DURATION = \"Request_Duration\",\n  READ_FAILURE_COUNT = \"Read_Failure_Count\",\n  WRITE_FAILURE_COUNT = \"Write_Failure_Count\",\n  ATTACH = \"Attach\",\n  FEATURE = \"Feature\",\n}\n\nexport const AIMS_URI = \"http://169.254.169.254/metadata/instance/compute\";\nexport const AIMS_API_VERSION = \"api-version=2017-12-01\";\nexport const AIMS_FORMAT = \"format=json\";\nexport const NON_EU_CONNECTION_STRING =\n  \"InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com\";\nexport const EU_CONNECTION_STRING =\n  \"InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com\";\nexport const EU_ENDPOINTS = [\n  \"westeurope\",\n  \"northeurope\",\n  \"francecentral\",\n  \"francesouth\",\n  \"germanywestcentral\",\n  \"norwayeast\",\n  \"norwaywest\",\n  \"swedencentral\",\n  \"switzerlandnorth\",\n  \"switzerlandwest\",\n  \"uksouth\",\n  \"ukwest\",\n];\n\nexport interface CommonStatsbeatProperties {\n  os: string;\n  rp: string;\n  cikey: string;\n  runtimeVersion: string;\n  language: string;\n  version: string;\n  attach: string;\n}\n\nexport interface AttachStatsbeatProperties {\n  rpId: string;\n}\n\nexport interface NetworkStatsbeatProperties {\n  endpoint: string;\n  host: string;\n}\n\nexport interface StatsbeatOptions {\n  instrumentationKey: string;\n  endpointUrl: string;\n  networkCollectionInterval?: number;\n  longCollectionInterval?: number;\n  disableOfflineStorage?: boolean;\n}\n\nexport interface VirtualMachineInfo {\n  isVM?: boolean;\n  id?: string;\n  subscriptionId?: string;\n  osType?: string;\n}\n\nexport enum StatsbeatFeatureType {\n  FEATURE = 0,\n  INSTRUMENTATION = 1,\n}\n\n/**\n * Status codes indicating that we should shutdown statsbeat\n * @internal\n */\nexport function isStatsbeatShutdownStatus(statusCode: number): boolean {\n  return (\n    statusCode === 401 || // Unauthorized\n    statusCode === 403 || // Forbidden\n    statusCode === 503 // Server Unavailable\n  );\n}\n"]}