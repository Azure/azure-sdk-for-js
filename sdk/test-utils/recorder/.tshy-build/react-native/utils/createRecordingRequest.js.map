{"version":3,"file":"createRecordingRequest.js","sourceRoot":"","sources":["../../../src/utils/createRecordingRequest.ts"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,kCAAkC;AAElC,OAAO,EAAE,qBAAqB,EAAgC,MAAM,2BAA2B,CAAC;AAEhG;;;GAGG;AACH,MAAM,UAAU,sBAAsB,CACpC,GAAW,EACX,WAAoB,EACpB,WAAoB,EACpB,SAAsB,MAAM,EAC5B,UAAmB;IAEnB,MAAM,GAAG,GAAG,qBAAqB,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC,CAAC;IAExD,IAAI,WAAW,KAAK,SAAS,EAAE,CAAC;QAC9B,MAAM,IAAI,GAA2B,EAAE,kBAAkB,EAAE,WAAW,EAAE,CAAC;QAEzE,yGAAyG;QACzG,iHAAiH;QACjH,IAAI,UAAU,IAAI,UAAU,KAAK,WAAW,EAAE,CAAC;YAC7C,IAAI,CAAC,yBAAyB,CAAC,GAAG,UAAU,CAAC;QAC/C,CAAC;QAED,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IAClC,CAAC;IAED,IAAI,WAAW,KAAK,SAAS,EAAE,CAAC;QAC9B,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,WAAW,CAAC,CAAC;IACjD,CAAC;IAED,OAAO,GAAG,CAAC;AACb,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createPipelineRequest, HttpMethods, PipelineRequest } from \"@azure/core-rest-pipeline\";\n\n/**\n * Adds the recording id headers to the requests that are sent to the proxy tool.\n * These are required to appropriately save the recordings in the record mode and picking them up in playback.\n */\nexport function createRecordingRequest(\n  url: string,\n  sessionFile?: string,\n  recordingId?: string,\n  method: HttpMethods = \"POST\",\n  assetsJson?: string,\n): PipelineRequest {\n  const req = createPipelineRequest({ url: url, method });\n\n  if (sessionFile !== undefined) {\n    const body: Record<string, string> = { \"x-recording-file\": sessionFile };\n\n    // during browser tests the non-presence of an assets.json will result in the value \"undefined\" being set\n    // its easier to just explicitly handle this case rather than ensure that folks update their karma conf properly.\n    if (assetsJson && assetsJson !== \"undefined\") {\n      body[\"x-recording-assets-file\"] = assetsJson;\n    }\n\n    req.body = JSON.stringify(body);\n  }\n\n  if (recordingId !== undefined) {\n    req.headers.set(\"x-recording-id\", recordingId);\n  }\n\n  return req;\n}\n"]}