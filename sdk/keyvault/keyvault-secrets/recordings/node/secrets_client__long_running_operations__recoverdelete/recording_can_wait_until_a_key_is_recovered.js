let nock = require('nock');

module.exports.testInfo = { "uniqueName": {}, "newDate": {} }

nock('https://keyvault_name.vault.azure.net:443', { "encodedQueryParams": true })
  .put('/secrets/recoverSecretName-canwaituntilakeyisrecovered-undefined')
  .query(true)
  .reply(401, { "error": { "code": "Unauthorized", "message": "Request is missing a Bearer or PoP token." } }, ['Cache-Control',
    'no-cache',
    'Pragma',
    'no-cache',
    'Content-Length',
    '87',
    'Content-Type',
    'application/json; charset=utf-8',
    'Expires',
    '-1',
    'Server',
    'Microsoft-IIS/10.0',
    'WWW-Authenticate',
    'Bearer authorization="https://login.windows.net/12345678-1234-1234-1234-123456789012", resource="https://vault.azure.net"',
    'x-ms-keyvault-region',
    'westus',
    'x-ms-request-id',
    'b0ff1443-a7b0-45f4-85a9-7c781e2edbec',
    'x-ms-keyvault-service-version',
    '1.1.0.879',
    'x-ms-keyvault-network-info',
    'addr=IP_ADDRESS;act_addr_fam=InterNetwork;',
    'X-AspNet-Version',
    '4.0.30319',
    'X-Powered-By',
    'ASP.NET',
    'Strict-Transport-Security',
    'max-age=31536000;includeSubDomains',
    'X-Content-Type-Options',
    'nosniff',
    'Date',
    'Wed, 16 Oct 2019 21:17:47 GMT',
    'Connection',
    'close']);


nock('https://login.microsoftonline.com:443', { "encodedQueryParams": true })
  .post('/12345678-1234-1234-1234-123456789012/oauth2/v2.0/token', "response_type=token&grant_type=client_credentials&client_id=azure_client_id&client_secret=azure_client_secret&scope=https%3A%2F%2Fvault.azure.net%2F.default")
  .reply(200, { "token_type": "Bearer", "expires_in": 3600, "ext_expires_in": 3600, "access_token": "access_token" }, ['Cache-Control',
    'no-cache, no-store',
    'Pragma',
    'no-cache',
    'Content-Type',
    'application/json; charset=utf-8',
    'Expires',
    '-1',
    'Strict-Transport-Security',
    'max-age=31536000; includeSubDomains',
    'X-Content-Type-Options',
    'nosniff',
    'x-ms-request-id',
    '076402ad-1133-4c53-b4bc-f5dfc9542500',
    'x-ms-ests-server',
    '2.1.9557.13 - WUS ProdSlices',
    'P3P',
    'CP="DSP CUR OTPi IND OTRi ONL FIN"',
    'Set-Cookie',
    'fpc=AnwoJCFTYoROnmZY3cTYEV0_aSJHAQAAAPt_OdUOAAAA; expires=Fri, 15-Nov-2019 21:17:48 GMT; path=/; secure; HttpOnly; SameSite=None',
    'Set-Cookie',
    'x-ms-gateway-slice=estsfd; path=/; secure; HttpOnly',
    'Set-Cookie',
    'stsservicecookie=estsfd; path=/; secure; HttpOnly',
    'Date',
    'Wed, 16 Oct 2019 21:17:47 GMT',
    'Connection',
    'close',
    'Content-Length',
    '1231']);


nock('https://keyvault_name.vault.azure.net:443', { "encodedQueryParams": true })
  .put('/secrets/recoverSecretName-canwaituntilakeyisrecovered-undefined', { "value": "value" })
  .query(true)
  .reply(409, { "error": { "code": "Conflict", "message": "Secret recoverSecretName-canwaituntilakeyisrecovered-undefined is currently in a deleted but recoverable state, and its name cannot be reused; in this state, the secret can only be recovered or purged.", "innererror": { "code": "ObjectIsDeletedButRecoverable" } } }, ['Cache-Control',
    'no-cache',
    'Pragma',
    'no-cache',
    'Content-Length',
    '297',
    'Content-Type',
    'application/json; charset=utf-8',
    'Expires',
    '-1',
    'Server',
    'Microsoft-IIS/10.0',
    'x-ms-keyvault-region',
    'westus',
    'x-ms-request-id',
    '52c3e577-2ddc-4578-8866-ab646d7fe288',
    'x-ms-keyvault-service-version',
    '1.1.0.879',
    'x-ms-keyvault-network-info',
    'addr=IP_ADDRESS;act_addr_fam=InterNetwork;',
    'X-AspNet-Version',
    '4.0.30319',
    'X-Powered-By',
    'ASP.NET',
    'Strict-Transport-Security',
    'max-age=31536000;includeSubDomains',
    'X-Content-Type-Options',
    'nosniff',
    'Date',
    'Wed, 16 Oct 2019 21:17:48 GMT',
    'Connection',
    'close']);
