# client library samples for JavaScript

These sample programs show how to use the JavaScript client libraries for in some common scenarios.

| **File Name**                                                                                                                     | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| --------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [appliedReservationList.js][appliedreservationlist]                                                                               | Get applicable `Reservation`s that are applied to this subscription or a resource group under this subscription. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/GetAppliedReservations.json                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [availableScopes.js][availablescopes]                                                                                             | Get Available Scopes for `Reservation`. //@@TS-MAGIC-NEWLINE@@ x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/GetAvailableScope.json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [calculateExchange.js][calculateexchange]                                                                                         | Calculates price for exchanging `Reservations` if there are no policy errors. //@@TS-MAGIC-NEWLINE@@ x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/CalculateExchange.json                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [catalog.js][catalog]                                                                                                             | Get the regions and skus that are available for RI purchase for the specified Azure subscription. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/GetCatalog.json                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [changeDirectory.js][changedirectory]                                                                                             | Change directory (tenant) of `ReservationOrder` and all `Reservation` under it to specified tenant id x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/ChangeDirectoryReservationOrder.json                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [exchange.js][exchange]                                                                                                           | Returns one or more `Reservations` in exchange for one or more `Reservation` purchases. //@@TS-MAGIC-NEWLINE@@ x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/Exchange.json                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [getOperations.js][getoperations]                                                                                                 | List all the operations. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/GetOperations.json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [getReservation.js][getreservation]                                                                                               | Get the details of the `ReservationOrder`. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/GetReservationOrderDetails.json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [getReservationWithExpandPayments.js][getreservationwithexpandpayments]                                                           | Get the details of the `ReservationOrder`. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/GetReservationOrderDetailsWithExpandPlanInformation.json                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [merge.js][merge]                                                                                                                 | Merge the specified `Reservation`s into a new `Reservation`. The two `Reservation`s being merged must have same properties. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/MergeReservations.json                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [patchReservation.js][patchreservation]                                                                                           | Updates the applied scopes of the `Reservation`. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/UpdateReservation.json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [purchase.js][purchase]                                                                                                           | Purchase `ReservationOrder` and create resource under the specified URI. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/PurchaseReservationOrder.json                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [quotaRequestFailed.js][quotarequestfailed]                                                                                       | For the specified Azure region (location), get the details and status of the quota request by the quota request ID for the resources of the resource provider. The PUT request for the quota (service limit) returns a response with the requestId parameter. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/getQuotaRequestStatusFailed.json                                                                                                                                                                                                                                                                               |
| [quotaRequestHistory.js][quotarequesthistory]                                                                                     | For the specified Azure region (location), subscription, and resource provider, get the history of the quota requests for the past year. To select specific quota requests, use the oData filter. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/getQuotaRequestsHistory.json                                                                                                                                                                                                                                                                                                                                               |
| [quotaRequestInProgress.js][quotarequestinprogress]                                                                               | For the specified Azure region (location), get the details and status of the quota request by the quota request ID for the resources of the resource provider. The PUT request for the quota (service limit) returns a response with the requestId parameter. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/getQuotaRequestStatusInProgress.json                                                                                                                                                                                                                                                                           |
| [quotaRequestStatus.js][quotarequeststatus]                                                                                       | For the specified Azure region (location), get the details and status of the quota request by the quota request ID for the resources of the resource provider. The PUT request for the quota (service limit) returns a response with the requestId parameter. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/getQuotaRequestStatusById.json                                                                                                                                                                                                                                                                                 |
| [quotasListUsagesForCompute.js][quotaslistusagesforcompute]                                                                       | Gets a list of current quotas (service limits) and usage for all resources. The response from the list quota operation can be leveraged to request quota updates. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/getComputeUsages.json                                                                                                                                                                                                                                                                                                                                                                                      |
| [quotasListUsagesMachineLearningServices.js][quotaslistusagesmachinelearningservices]                                             | Gets a list of current quotas (service limits) and usage for all resources. The response from the list quota operation can be leveraged to request quota updates. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/getMachineLearningServicesUsages.json                                                                                                                                                                                                                                                                                                                                                                      |
| [quotasRequestForCompute.js][quotasrequestforcompute]                                                                             | Get the current quota (service limit) and usage of a resource. You can use the response from the GET operation to submit quota update request. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/getComputeOneSkuUsages.json                                                                                                                                                                                                                                                                                                                                                                                                   |
| [quotasRequestPatchForCompute.js][quotasrequestpatchforcompute]                                                                   | Update the quota (service limits) of this resource to the requested value. //@@TS-MAGIC-NEWLINE@@ • To get the quota information for specific resource, send a GET request. //@@TS-MAGIC-NEWLINE@@ • To increase the quota, update the limit field from the GET response to a new value. //@@TS-MAGIC-NEWLINE@@ • To update the quota value, submit the JSON response to the quota request API to update the quota. • To update the quota. use the PATCH operation. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/patchComputeQuotaRequest.json                                                                            |
| [quotasRequestPutForCompute.js][quotasrequestputforcompute]                                                                       | Create or update the quota (service limits) of a resource to the requested value. Steps: //@@TS-MAGIC-NEWLINE@@ 1. Make the Get request to get the quota information for specific resource. //@@TS-MAGIC-NEWLINE@@ 2. To increase the quota, update the limit field in the response from Get request to new value. //@@TS-MAGIC-NEWLINE@@ 3. Submit the JSON to the quota request API to update the quota. The Create quota request may be constructed as follows. The PUT operation can be used to update the quota. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/putComputeOneSkuQuotaRequest.json                      |
| [quotasRequestPutForMachineLearningServicesDedicatedResource.js][quotasrequestputformachinelearningservicesdedicatedresource]     | Create or update the quota (service limits) of a resource to the requested value. Steps: //@@TS-MAGIC-NEWLINE@@ 1. Make the Get request to get the quota information for specific resource. //@@TS-MAGIC-NEWLINE@@ 2. To increase the quota, update the limit field in the response from Get request to new value. //@@TS-MAGIC-NEWLINE@@ 3. Submit the JSON to the quota request API to update the quota. The Create quota request may be constructed as follows. The PUT operation can be used to update the quota. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/putMachineLearningServicesQuotaRequestDedicated.json   |
| [quotasRequestPutForMachineLearningServicesLowPriorityResource.js][quotasrequestputformachinelearningserviceslowpriorityresource] | Create or update the quota (service limits) of a resource to the requested value. Steps: //@@TS-MAGIC-NEWLINE@@ 1. Make the Get request to get the quota information for specific resource. //@@TS-MAGIC-NEWLINE@@ 2. To increase the quota, update the limit field in the response from Get request to new value. //@@TS-MAGIC-NEWLINE@@ 3. Submit the JSON to the quota request API to update the quota. The Create quota request may be constructed as follows. The PUT operation can be used to update the quota. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/putMachineLearningServicesQuotaRequestLowPriority.json |
| [reservationList.js][reservationlist]                                                                                             | List `Reservation`s within a single `ReservationOrder`. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/GetReservationsFromOrder.json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [reservationOrderList.js][reservationorderlist]                                                                                   | List of all the `ReservationOrder`s that the user has access to in the current tenant. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/GetReservationOrders.json                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [reservationRevisions.js][reservationrevisions]                                                                                   | List of all the revisions for the `Reservation`. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/GetReservationRevisions.json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| [split.js][split]                                                                                                                 | Split a `Reservation` into two `Reservation`s with specified quantity distribution. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2021-07-01/examples/SplitReservation.json                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |

## Prerequisites

The sample programs are compatible with [LTS versions of Node.js](https://nodejs.org/about/releases/).

You need [an Azure subscription][freesub] to run these sample programs.

Samples retrieve credentials to access the service endpoint from environment variables. Alternatively, edit the source code to include the appropriate credentials. See each individual sample for details on which environment variables/credentials it requires to function.

Adapting the samples to run in the browser may require some additional consideration. For details, please see the [package README][package].

## Setup

To run the samples using the published version of the package:

1. Install the dependencies using `npm`:

```bash
npm install
```

2. Edit the file `sample.env`, adding the correct credentials to access the Azure service and run the samples. Then rename the file from `sample.env` to just `.env`. The sample programs will read this file automatically.

3. Run whichever samples you like (note that some samples may require additional setup, see the table above):

```bash
node appliedReservationList.js
```

Alternatively, run a single sample with the correct environment variables set (setting up the `.env` file is not required if you do this), for example (cross-platform):

```bash
npx cross-env  node appliedReservationList.js
```

## Next Steps

Take a look at our [API Documentation][apiref] for more information about the APIs that are available in the clients.

[appliedreservationlist]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/appliedReservationList.js
[availablescopes]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/availableScopes.js
[calculateexchange]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/calculateExchange.js
[catalog]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/catalog.js
[changedirectory]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/changeDirectory.js
[exchange]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/exchange.js
[getoperations]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/getOperations.js
[getreservation]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/getReservation.js
[getreservationwithexpandpayments]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/getReservationWithExpandPayments.js
[merge]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/merge.js
[patchreservation]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/patchReservation.js
[purchase]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/purchase.js
[quotarequestfailed]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/quotaRequestFailed.js
[quotarequesthistory]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/quotaRequestHistory.js
[quotarequestinprogress]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/quotaRequestInProgress.js
[quotarequeststatus]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/quotaRequestStatus.js
[quotaslistusagesforcompute]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/quotasListUsagesForCompute.js
[quotaslistusagesmachinelearningservices]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/quotasListUsagesMachineLearningServices.js
[quotasrequestforcompute]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/quotasRequestForCompute.js
[quotasrequestpatchforcompute]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/quotasRequestPatchForCompute.js
[quotasrequestputforcompute]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/quotasRequestPutForCompute.js
[quotasrequestputformachinelearningservicesdedicatedresource]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/quotasRequestPutForMachineLearningServicesDedicatedResource.js
[quotasrequestputformachinelearningserviceslowpriorityresource]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/quotasRequestPutForMachineLearningServicesLowPriorityResource.js
[reservationlist]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/reservationList.js
[reservationorderlist]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/reservationOrderList.js
[reservationrevisions]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/reservationRevisions.js
[split]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v7/javascript/split.js
[apiref]: https://docs.microsoft.com/javascript/api/@azure/arm-reservations?view=azure-node-preview
[freesub]: https://azure.microsoft.com/free/
[package]: https://github.com/Azure/azure-sdk-for-js/tree/main/sdk/reservations/arm-reservations/README.md
