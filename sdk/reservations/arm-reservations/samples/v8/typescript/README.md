# client library samples for TypeScript

These sample programs show how to use the TypeScript client libraries for in some common scenarios.

| **File Name**                                                                     | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [calculateExchangePostSample.ts][calculateexchangepostsample]                     | Calculates price for exchanging `Reservations` if there are no policy errors. //@@TS-MAGIC-NEWLINE@@ x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/CalculateExchange.json                                                                                                                                                                                                                                                                                                                                                        |
| [calculateRefundPostSample.ts][calculaterefundpostsample]                         | Calculate price for returning `Reservations` if there are no policy errors. //@@TS-MAGIC-NEWLINE@@ x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/CalculateRefund.json                                                                                                                                                                                                                                                                                                                                                            |
| [exchangePostSample.ts][exchangepostsample]                                       | Returns one or more `Reservations` in exchange for one or more `Reservation` purchases. //@@TS-MAGIC-NEWLINE@@ x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/Exchange.json                                                                                                                                                                                                                                                                                                                                                       |
| [getAppliedReservationListSample.ts][getappliedreservationlistsample]             | Get applicable `Reservation`s that are applied to this subscription or a resource group under this subscription. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/GetAppliedReservations.json                                                                                                                                                                                                                                                                                                                                       |
| [getCatalogSample.ts][getcatalogsample]                                           | Get the regions and skus that are available for RI purchase for the specified Azure subscription. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/GetCatalog.json                                                                                                                                                                                                                                                                                                                                                                  |
| [operationListSample.ts][operationlistsample]                                     | List all the operations. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/GetOperations.json                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [quotaCreateOrUpdateSample.ts][quotacreateorupdatesample]                         | Create or update the quota (service limits) of a resource to the requested value. Steps: 1. Make the Get request to get the quota information for specific resource. 2. To increase the quota, update the limit field in the response from Get request to new value. 3. Submit the JSON to the quota request API to update the quota. The Create quota request may be constructed as follows. The PUT operation can be used to update the quota. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/putComputeOneSkuQuotaRequest.json |
| [quotaGetSample.ts][quotagetsample]                                               | Get the current quota (service limit) and usage of a resource. You can use the response from the GET operation to submit quota update request. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/getComputeOneSkuUsages.json                                                                                                                                                                                                                                                                                                         |
| [quotaListSample.ts][quotalistsample]                                             | Gets a list of current quotas (service limits) and usage for all resources. The response from the list quota operation can be leveraged to request quota updates. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/getComputeUsages.json                                                                                                                                                                                                                                                                                            |
| [quotaRequestStatusGetSample.ts][quotarequeststatusgetsample]                     | For the specified Azure region (location), get the details and status of the quota request by the quota request ID for the resources of the resource provider. The PUT request for the quota (service limit) returns a response with the requestId parameter. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/getQuotaRequestStatusFailed.json                                                                                                                                                                                     |
| [quotaRequestStatusListSample.ts][quotarequeststatuslistsample]                   | For the specified Azure region (location), subscription, and resource provider, get the history of the quota requests for the past year. To select specific quota requests, use the oData filter. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/getQuotaRequestsHistory.json                                                                                                                                                                                                                                                     |
| [quotaUpdateSample.ts][quotaupdatesample]                                         | Update the quota (service limits) of this resource to the requested value. • To get the quota information for specific resource, send a GET request. • To increase the quota, update the limit field from the GET response to a new value. • To update the quota value, submit the JSON response to the quota request API to update the quota. • To update the quota. use the PATCH operation. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2020-10-25/examples/patchComputeQuotaRequest.json                                                       |
| [reservationArchiveSample.ts][reservationarchivesample]                           | Archiving a `Reservation` moves it to `Archived` state. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/Archive.json                                                                                                                                                                                                                                                                                                                                                                                                               |
| [reservationAvailableScopesSample.ts][reservationavailablescopessample]           | Check whether the scopes from request is valid for `Reservation`. //@@TS-MAGIC-NEWLINE@@ x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/GetAvailableScope.json                                                                                                                                                                                                                                                                                                                                                                    |
| [reservationGetSample.ts][reservationgetsample]                                   | Get specific `Reservation` details. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/GetReservationDetails.json                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [reservationListAllSample.ts][reservationlistallsample]                           | List the reservations and the roll up counts of reservations group by provisioning states that the user has access to in the current tenant. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/GetReservations.json                                                                                                                                                                                                                                                                                                                  |
| [reservationListRevisionsSample.ts][reservationlistrevisionssample]               | List of all the revisions for the `Reservation`. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/GetReservationRevisions.json                                                                                                                                                                                                                                                                                                                                                                                                      |
| [reservationListSample.ts][reservationlistsample]                                 | List `Reservation`s within a single `ReservationOrder`. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/GetReservationsFromOrder.json                                                                                                                                                                                                                                                                                                                                                                                              |
| [reservationMergeSample.ts][reservationmergesample]                               | Merge the specified `Reservation`s into a new `Reservation`. The two `Reservation`s being merged must have same properties. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/MergeReservations.json                                                                                                                                                                                                                                                                                                                                 |
| [reservationOrderCalculateSample.ts][reservationordercalculatesample]             | Calculate price for placing a `ReservationOrder`. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/CalculateReservationOrder.json                                                                                                                                                                                                                                                                                                                                                                                                   |
| [reservationOrderChangeDirectorySample.ts][reservationorderchangedirectorysample] | Change directory (tenant) of `ReservationOrder` and all `Reservation` under it to specified tenant id x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/ChangeDirectoryReservationOrder.json                                                                                                                                                                                                                                                                                                                                         |
| [reservationOrderGetSample.ts][reservationordergetsample]                         | Get the details of the `ReservationOrder`. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/GetReservationOrderDetails.json                                                                                                                                                                                                                                                                                                                                                                                                         |
| [reservationOrderListSample.ts][reservationorderlistsample]                       | List of all the `ReservationOrder`s that the user has access to in the current tenant. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/GetReservationOrders.json                                                                                                                                                                                                                                                                                                                                                                   |
| [reservationOrderPurchaseSample.ts][reservationorderpurchasesample]               | Purchase `ReservationOrder` and create resource under the specified URI. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/PurchaseReservationOrder.json                                                                                                                                                                                                                                                                                                                                                                             |
| [reservationSplitSample.ts][reservationsplitsample]                               | Split a `Reservation` into two `Reservation`s with specified quantity distribution. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/SplitReservation.json                                                                                                                                                                                                                                                                                                                                                                          |
| [reservationUnarchiveSample.ts][reservationunarchivesample]                       | Restores a `Reservation` to the state it was before archiving. //@@TS-MAGIC-NEWLINE@@ x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/Unarchive.json                                                                                                                                                                                                                                                                                                                                                                               |
| [reservationUpdateSample.ts][reservationupdatesample]                             | Updates the applied scopes of the `Reservation`. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/UpdateReservation.json                                                                                                                                                                                                                                                                                                                                                                                                            |
| [returnPostSample.ts][returnpostsample]                                           | Return a reservation and get refund information. x-ms-original-file: specification/reservations/resource-manager/Microsoft.Capacity/stable/2022-11-01/examples/Return.json                                                                                                                                                                                                                                                                                                                                                                                                                       |

## Prerequisites

The sample programs are compatible with [LTS versions of Node.js](https://github.com/nodejs/release#release-schedule).

Before running the samples in Node, they must be compiled to JavaScript using the TypeScript compiler. For more information on TypeScript, see the [TypeScript documentation][typescript]. Install the TypeScript compiler using:

```bash
npm install -g typescript
```

You need [an Azure subscription][freesub] to run these sample programs.

Samples retrieve credentials to access the service endpoint from environment variables. Alternatively, edit the source code to include the appropriate credentials. See each individual sample for details on which environment variables/credentials it requires to function.

Adapting the samples to run in the browser may require some additional consideration. For details, please see the [package README][package].

## Setup

To run the samples using the published version of the package:

1. Install the dependencies using `npm`:

```bash
npm install
```

2. Compile the samples:

```bash
npm run build
```

3. Edit the file `sample.env`, adding the correct credentials to access the Azure service and run the samples. Then rename the file from `sample.env` to just `.env`. The sample programs will read this file automatically.

4. Run whichever samples you like (note that some samples may require additional setup, see the table above):

```bash
node dist/calculateExchangePostSample.js
```

Alternatively, run a single sample with the correct environment variables set (setting up the `.env` file is not required if you do this), for example (cross-platform):

```bash
npx cross-env  node dist/calculateExchangePostSample.js
```

## Next Steps

Take a look at our [API Documentation][apiref] for more information about the APIs that are available in the clients.

[calculateexchangepostsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/calculateExchangePostSample.ts
[calculaterefundpostsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/calculateRefundPostSample.ts
[exchangepostsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/exchangePostSample.ts
[getappliedreservationlistsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/getAppliedReservationListSample.ts
[getcatalogsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/getCatalogSample.ts
[operationlistsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/operationListSample.ts
[quotacreateorupdatesample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/quotaCreateOrUpdateSample.ts
[quotagetsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/quotaGetSample.ts
[quotalistsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/quotaListSample.ts
[quotarequeststatusgetsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/quotaRequestStatusGetSample.ts
[quotarequeststatuslistsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/quotaRequestStatusListSample.ts
[quotaupdatesample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/quotaUpdateSample.ts
[reservationarchivesample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationArchiveSample.ts
[reservationavailablescopessample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationAvailableScopesSample.ts
[reservationgetsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationGetSample.ts
[reservationlistallsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationListAllSample.ts
[reservationlistrevisionssample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationListRevisionsSample.ts
[reservationlistsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationListSample.ts
[reservationmergesample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationMergeSample.ts
[reservationordercalculatesample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationOrderCalculateSample.ts
[reservationorderchangedirectorysample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationOrderChangeDirectorySample.ts
[reservationordergetsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationOrderGetSample.ts
[reservationorderlistsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationOrderListSample.ts
[reservationorderpurchasesample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationOrderPurchaseSample.ts
[reservationsplitsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationSplitSample.ts
[reservationunarchivesample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationUnarchiveSample.ts
[reservationupdatesample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/reservationUpdateSample.ts
[returnpostsample]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/reservations/arm-reservations/samples/v8/typescript/src/returnPostSample.ts
[apiref]: https://docs.microsoft.com/javascript/api/@azure/arm-reservations?view=azure-node-preview
[freesub]: https://azure.microsoft.com/free/
[package]: https://github.com/Azure/azure-sdk-for-js/tree/main/sdk/reservations/arm-reservations/README.md
[typescript]: https://www.typescriptlang.org/docs/home.html
