{
  "Entries": [
    {
      "RequestUri": "https://management.azure.com/subscriptions/azure_subscription_id/resourceGroups/myjstest/providers/Microsoft.Automation/automationAccounts/myAutomationxxx/runbooks/myRunbookxx/draft/content?api-version=2018-06-30",
      "RequestMethod": "PUT",
      "RequestHeaders": {
        "Accept": "application/json",
        "Accept-Encoding": "gzip,deflate",
        "Authorization": "Sanitized",
        "Connection": "keep-alive",
        "Content-Length": "1728",
        "Content-Type": "text/powershell",
        "User-Agent": "azsdk-js-arm-automation/11.0.0-beta.1 core-rest-pipeline/1.9.1 Node/v16.15.1 OS/(x64-Windows_NT-10.0.22000)",
        "x-ms-client-request-id": "75b952a6-9dd6-4c5b-81dc-3e8cbc0f83f9"
      },
      "RequestBody": [
        "\u003C#\r\n",
        "    .DESCRIPTION\r\n",
        "        An example runbook which prints out the first10 Azure VMs in your subscription (ordered alphabetically).\r\n",
        "        For more information about how this runbook authenticates to your Azure subscription, see our documentation here: http: //aka.ms/fxu3mn\r\n",
        "\r\n",
        "    .NOTES\r\n",
        "        AUTHOR: Azure Automation Team\r\n",
        "        LASTEDIT: Mar27,\r\n",
        "            2015\r\n",
        "#\u003E\r\n",
        "workflow Get-AzureVMTutorial{\r\n",
        "    #The name of the Automation Credential Asset this runbook will use to authenticate to Azure.\r\n",
        "    $CredentialAssetName = \u0027DefaultAzureCredential\u0027\r\n",
        "\r\n",
        "    #Get the credential with the above name from the Automation Asset store\r\n",
        "    $Cred = Get-AutomationPSCredential -Name $CredentialAssetName\r\n",
        "    if(!$Cred){\r\n",
        "        Throw\u0022Could not find an Automation Credential Asset named \u0027${CredentialAssetName}\u0027. Make sure you have created one in this Automation Account.\u0022\r\n",
        "                }\r\n",
        "\r\n",
        "    #Connect to your Azure Account\r\n",
        "    $Account = Add-AzureAccount -Credential $Cred\r\n",
        "    if(!$Account){\r\n",
        "        Throw\u0022Could not authenticate to Azure using the credential asset \u0027${CredentialAssetName}\u0027. Make sure the user name and password are correct.\u0022\r\n",
        "                }\r\n",
        "\r\n",
        "    #TODO (optional): pick the right subscription to use. Without this line, the default subscription for your Azure Account will be used.\r\n",
        "    #Select-AzureSubscription -SubscriptionName\u0022TODO: your Azure subscription name here\u0022\r\n",
        "    \r\n",
        "    #Get all the VMs you have in your Azure subscription\r\n",
        "    $VMs = Get-AzureVM\r\n",
        "\r\n",
        "    #Print out up to10 of those VMs\r\n",
        "    if(!$VMs){\r\n",
        "        Write-Output\u0022No VMs were found in your subscription.\u0022\r\n",
        "                } else{\r\n",
        "        Write-Output $VMs[0..9\r\n",
        "                    ]\r\n",
        "                }\r\n",
        "            }"
      ],
      "StatusCode": 202,
      "ResponseHeaders": {
        "Cache-Control": "no-cache",
        "Content-Length": "0",
        "Date": "Tue, 26 Jul 2022 07:26:51 GMT",
        "Expires": "-1",
        "Location": "https://management.azure.com/subscriptions/azure_subscription_id/resourceGroups/myjstest/providers/Microsoft.Automation/automationAccounts/myAutomationxxx/runbooks/myRunbookxx/operationResults/c7b8cb4b-1fac-48e3-97f0-509aea73e938?api-version=2018-06-30",
        "ocp-automation-operationresultid": [
          "c7b8cb4b-1fac-48e3-97f0-509aea73e938",
          "c7b8cb4b-1fac-48e3-97f0-509aea73e938"
        ],
        "Pragma": "no-cache",
        "Retry-After": "5",
        "Server": "Microsoft-HTTPAPI/2.0",
        "Strict-Transport-Security": "max-age=31536000; includeSubDomains",
        "X-Content-Type-Options": "nosniff",
        "x-ms-correlation-request-id": "9635be74-8588-4979-8026-f73f761b2fbe",
        "x-ms-ratelimit-remaining-subscription-writes": "1198",
        "x-ms-request-id": "75b952a6-9dd6-4c5b-81dc-3e8cbc0f83f9",
        "x-ms-routing-request-id": "SOUTHEASTASIA:20220726T072651Z:9635be74-8588-4979-8026-f73f761b2fbe"
      },
      "ResponseBody": null
    },
    {
      "RequestUri": "https://management.azure.com/subscriptions/azure_subscription_id/resourceGroups/myjstest/providers/Microsoft.Automation/automationAccounts/myAutomationxxx/runbooks/myRunbookxx/operationResults/c7b8cb4b-1fac-48e3-97f0-509aea73e938?api-version=2018-06-30",
      "RequestMethod": "GET",
      "RequestHeaders": {
        "Accept": "application/json",
        "Accept-Encoding": "gzip,deflate",
        "Authorization": "Sanitized",
        "Connection": "keep-alive",
        "Content-Type": "text/powershell",
        "User-Agent": "azsdk-js-arm-automation/11.0.0-beta.1 core-rest-pipeline/1.9.1 Node/v16.15.1 OS/(x64-Windows_NT-10.0.22000)",
        "x-ms-client-request-id": "bb926592-f190-4fc2-b53d-531bc9493075"
      },
      "RequestBody": null,
      "StatusCode": 200,
      "ResponseHeaders": {
        "Cache-Control": "no-cache",
        "Content-Length": "0",
        "Content-Type": "text/plain; charset=utf-8",
        "Date": "Tue, 26 Jul 2022 07:26:51 GMT",
        "Expires": "-1",
        "Pragma": "no-cache",
        "Server": "Microsoft-HTTPAPI/2.0",
        "Strict-Transport-Security": "max-age=31536000; includeSubDomains",
        "X-Content-Type-Options": "nosniff",
        "x-ms-correlation-request-id": "9bbed99e-0bc6-47e8-88c7-b53d07729fbc",
        "x-ms-ratelimit-remaining-subscription-reads": "11999",
        "x-ms-request-id": "bb926592-f190-4fc2-b53d-531bc9493075",
        "x-ms-routing-request-id": "SOUTHEASTASIA:20220726T072652Z:9bbed99e-0bc6-47e8-88c7-b53d07729fbc"
      },
      "ResponseBody": null
    }
  ],
  "Variables": {}
}
