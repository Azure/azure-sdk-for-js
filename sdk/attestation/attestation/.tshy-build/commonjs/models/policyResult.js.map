{"version":3,"file":"policyResult.js","sourceRoot":"","sources":["../../../src/models/policyResult.ts"],"names":[],"mappings":";;AAuCA,gEAcC;;AAlDD,gFAA0D;AAI1D,sEAAgE;AAEhE,iEAAyE;AAwBzE;;;;;GAKG;AACH,SAAgB,0BAA0B,CAAC,OAAgB;IACzD,MAAM,YAAY,GAA0B,sCAAgB,CAAC,WAAW,CACtE,OAAO,EACP,EAAE,YAAY,EAAE,OAAO,CAAC,YAAY,EAAE,UAAU,EAAE,OAAO,CAAC,UAAU,EAAE,EACtE,cAAc,CACU,CAAC;IAC3B,OAAO;QACL,gBAAgB,EAAE,YAAY,CAAC,gBAAgB;QAC/C,eAAe,EAAE,YAAY,CAAC,eAAe;QAC7C,MAAM,EAAE,YAAY,CAAC,MAAM;QAC3B,YAAY,EAAE,YAAY,CAAC,YAAY;YACrC,CAAC,CAAC,IAAA,sDAA+B,EAAC,YAAY,CAAC,YAAY,CAAC;YAC5D,CAAC,CAAC,SAAS;KACd,CAAC;AACJ,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport type { PolicyModification } from \"./index.js\";\nimport * as Mappers from \"../generated/models/mappers.js\";\n\nimport type { PolicyResult as GeneratedPolicyResult } from \"../generated/models/index.js\";\n\nimport { TypeDeserializer } from \"../utils/typeDeserializer.js\";\nimport type { AttestationSigner } from \"./attestationSigner.js\";\nimport { _attestationSignerFromGenerated } from \"./attestationSigner.js\";\n\n/**\n * The result of a policy certificate modification\n */\nexport interface PolicyResult {\n  /**\n   * The result of the operation\n   */\n  policyResolution: PolicyModification;\n  /**\n   * The SHA256 hash of the policy object modified\n   */\n  policyTokenHash: Uint8Array;\n  /**\n   * The certificate used to sign the policy object, if specified\n   */\n  policySigner?: AttestationSigner;\n  /**\n   * A JSON Web Token containing a StoredAttestationPolicy object with the attestation policy\n   */\n  policy?: string;\n}\n\n/**\n * Create a new instance of a {@link PolicyResult} from a raw JSON object.\n * @param rawJson - JSON Policy Result object returned from the Attestation service.\n * @returns a newly created {@link PolicyResult} object whose contents reflect the JSON received from\n *  the attestation service.\n */\nexport function _policyResultFromGenerated(rawJson: unknown): PolicyResult {\n  const policyResult: GeneratedPolicyResult = TypeDeserializer.deserialize(\n    rawJson,\n    { PolicyResult: Mappers.PolicyResult, JsonWebKey: Mappers.JsonWebKey },\n    \"PolicyResult\",\n  ) as GeneratedPolicyResult;\n  return {\n    policyResolution: policyResult.policyResolution,\n    policyTokenHash: policyResult.policyTokenHash,\n    policy: policyResult.policy,\n    policySigner: policyResult.policySigner\n      ? _attestationSignerFromGenerated(policyResult.policySigner)\n      : undefined,\n  };\n}\n"]}