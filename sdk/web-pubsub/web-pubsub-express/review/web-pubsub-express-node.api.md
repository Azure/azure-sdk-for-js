## API Report File for "@azure/web-pubsub-express"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import type express from 'express-serve-static-core';

// @public
export interface Certificate {
    thumbprint: string;
}

// @public
export interface ConnectedRequest {
    context: ConnectionContext;
}

// @public
export interface ConnectErrorResponse {
    code: 400 | 401 | 500;
    detail?: string;
}

// @public
export interface ConnectionContext {
    clientProtocol: WebPubSubClientProtocol;
    connectionId: string;
    eventName: string;
    hub: string;
    mqtt?: MqttConnectionContextProperties;
    origin: string;
    signature: string;
    states: Record<string, any>;
    subprotocol?: string;
    userId?: string;
}

// @public
export interface ConnectRequest {
    claims?: Record<string, string[]>;
    clientCertificates?: Certificate[];
    context: ConnectionContext;
    headers?: Record<string, string[]>;
    queries?: Record<string, string[]>;
    // @deprecated
    query?: Record<string, string[]>;
    subprotocols?: string[];
}

// @public
export interface ConnectResponse {
    groups?: string[];
    roles?: string[];
    subprotocol?: string;
    userId?: string;
}

// @public
export interface ConnectResponseHandler {
    fail(code: 400 | 401 | 500, detail?: string): void;
    failWith(response: ConnectErrorResponse | MqttConnectErrorResponse): void;
    setState(name: string, value: unknown): void;
    success(response?: ConnectResponse | MqttConnectResponse): void;
}

// @public
export interface DisconnectedRequest {
    context: ConnectionContext;
    reason?: string;
}

// @public
export interface MqttConnectErrorResponse {
    mqtt: MqttConnectErrorResponseProperties;
}

// @public
export interface MqttConnectErrorResponseProperties {
    code: MqttV311ConnectReturnCode | MqttV500ConnectReasonCode;
    reason?: string;
    userProperties?: MqttUserProperty[];
}

// @public
export interface MqttConnectionContextProperties {
    physicalConnectionId: string;
    sessionId?: string;
}

// @public
export interface MqttConnectProperties {
    password?: string;
    protocolVersion: number;
    username?: string;
    userProperties?: MqttUserProperty[];
}

// @public
export interface MqttConnectRequest extends ConnectRequest {
    mqtt: MqttConnectProperties;
}

// @public
export interface MqttConnectResponse extends ConnectResponse {
    mqtt?: MqttConnectResponseProperties;
}

// @public
export interface MqttConnectResponseProperties {
    userProperties?: MqttUserProperty[];
}

// @public
export interface MqttDisconnectedProperties {
    disconnectPacket: MqttDisconnectPacket;
    initiatedByClient: boolean;
}

// @public
export interface MqttDisconnectedRequest extends DisconnectedRequest {
    mqtt: MqttDisconnectedProperties;
}

// @public
export interface MqttDisconnectPacket {
    code: MqttDisconnectReasonCode;
    userProperties?: MqttUserProperty[];
}

// @public
export enum MqttDisconnectReasonCode {
    AdministrativeAction = 152,
    ConnectionRateExceeded = 159,
    DisconnectWithWillMessage = 4,
    ImplementationSpecificError = 131,
    KeepAliveTimeout = 141,
    MalformedPacket = 129,
    MaximumConnectTime = 160,
    MessageRateTooHigh = 150,
    NormalDisconnection = 0,
    NotAuthorized = 135,
    PacketTooLarge = 149,
    PayloadFormatInvalid = 153,
    ProtocolError = 130,
    QosNotSupported = 155,
    QuotaExceeded = 151,
    ReceiveMaximumExceeded = 147,
    RetainNotSupported = 154,
    ServerBusy = 137,
    ServerMoved = 157,
    ServerShuttingDown = 139,
    SessionTakenOver = 142,
    SharedSubscriptionsNotSupported = 158,
    SubscriptionIdentifiersNotSupported = 161,
    TopicAliasInvalid = 148,
    TopicFilterInvalid = 143,
    TopicNameInvalid = 144,
    UnspecifiedError = 128,
    UseAnotherServer = 156,
    WildcardSubscriptionsNotSupported = 162
}

// @public
export interface MqttUserProperty {
    name: string;
    value: string;
}

// @public
export enum MqttV311ConnectReturnCode {
    BadUsernameOrPassword = 4,
    IdentifierRejected = 2,
    NotAuthorized = 5,
    ServerUnavailable = 3,
    UnacceptableProtocolVersion = 1
}

// @public
export enum MqttV500ConnectReasonCode {
    BadAuthenticationMethod = 140,
    BadUserNameOrPassword = 134,
    Banned = 138,
    ClientIdentifierNotValid = 133,
    ConnectionRateExceeded = 159,
    ImplementationSpecificError = 131,
    MalformedPacket = 129,
    NotAuthorized = 135,
    PacketTooLarge = 149,
    PayloadFormatInvalid = 153,
    ProtocolError = 130,
    QosNotSupported = 155,
    QuotaExceeded = 151,
    RetainNotSupported = 154,
    ServerBusy = 137,
    ServerMoved = 157,
    ServerUnavailable = 136,
    TopicNameInvalid = 144,
    UnspecifiedError = 128,
    UnsupportedProtocolVersion = 132,
    UseAnotherServer = 156
}

// @public
export type UserEventRequest = {
    context: ConnectionContext;
    data: string;
    dataType: "text";
} | {
    context: ConnectionContext;
    data: unknown;
    dataType: "json";
} | {
    context: ConnectionContext;
    data: ArrayBuffer;
    dataType: "binary";
};

// @public
export interface UserEventResponseHandler {
    fail(code: 400 | 401 | 500, detail?: string): void;
    setState(name: string, value: unknown): void;
    success(data?: string | ArrayBuffer, dataType?: "binary" | "text" | "json"): void;
}

// @public
export type WebPubSubClientProtocol = "default" | "mqtt";

// @public
export class WebPubSubEventHandler {
    constructor(hub: string, options?: WebPubSubEventHandlerOptions);
    getMiddleware(): express.RequestHandler;
    readonly path: string;
}

// @public
export interface WebPubSubEventHandlerOptions {
    allowedEndpoints?: string[];
    handleConnect?: (connectRequest: ConnectRequest, connectResponse: ConnectResponseHandler) => void;
    handleUserEvent?: (userEventRequest: UserEventRequest, userEventResponse: UserEventResponseHandler) => void;
    onConnected?: (connectedRequest: ConnectedRequest) => void;
    onDisconnected?: (disconnectedRequest: DisconnectedRequest) => void;
    path?: string;
}

// (No @packageDocumentation comment for this package)

```
