apiVersion: v1
kind: ServiceAccount
metadata:
  annotations:
    azure.workload.identity/client-id: 5fe4e0c5-2fb2-45c2-8cfb-93c9f9cdb747
  name: workload-identity-sa
  namespace: default
---
apiVersion: v1
kind: Pod
metadata:
  name: javascript-test-app
  namespace: default
  labels:
    azure.workload.identity/use: "true"
spec:
  serviceAccountName: workload-identity-sa
  containers:
  - name: javascript-test-app
    image: acrnek5yuh34si3y.azurecr.io/identity-aks-test-image
    command: ["tail"]
    args: ["-f", "/dev/null"]
    env:
    - name: IDENTITY_STORAGE_NAME_1
      value: "nek5yuh34si3y"
    - name: IDENTITY_STORAGE_NAME_2
      value: "nek5yuh34si3y2"
    - name: IDENTITY_USER_DEFINED_CLIENT_ID
      value: "5fe4e0c5-2fb2-45c2-8cfb-93c9f9cdb747"
    ports:
    - containerPort: 80
  nodeSelector:
    kubernetes.io/os: linux
