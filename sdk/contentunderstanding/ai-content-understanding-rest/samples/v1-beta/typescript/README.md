# Azure Content Understanding client library samples for TypeScript (Beta)

These sample programs show how to use the TypeScript client libraries for Azure Content Understanding in some common scenarios.

| **File Name**                                   | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ----------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [updateDefaults.ts][updatedefaults]             | Configure and retrieve default model deployment settings. This sample demonstrates how to configure and retrieve default model deployment settings for your Microsoft Foundry resource. This is a required one-time setup per Microsoft Foundry resource before using prebuilt or custom analyzers. Content Understanding prebuilt analyzers and custom analyzers require specific large language model deployments to function. Currently, Content Understanding uses OpenAI GPT models: - gpt-4.1: Used by most prebuilt analyzers (e.g., prebuilt-invoice, prebuilt-receipt) - gpt-4.1-mini: Used by RAG analyzers (e.g., prebuilt-documentSearch, prebuilt-audioSearch) - text-embedding-3-large: Used for semantic search and embeddings                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [analyzeBinary.ts][analyzebinary]               | Analyze a PDF file from disk using the prebuilt-documentSearch analyzer. This sample demonstrates how to analyze a PDF file from disk using the prebuilt-documentSearch analyzer. The prebuilt-documentSearch analyzer transforms unstructured documents into structured, machine-readable data optimized for RAG scenarios. Content Understanding provides prebuilt RAG analyzers (the prebuilt-\*Search analyzers) that return markdown and a one-paragraph Summary for each content item: - prebuilt-documentSearch: Extracts content from documents with layout preservation - prebuilt-audioSearch: Transcribes audio content with speaker diarization - prebuilt-videoSearch: Analyzes video content with visual frame extraction - prebuilt-imageSearch: Analyzes standalone images and returns a summary                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| [analyzeUrl.ts][analyzeurl]                     | Analyze content from URLs across modalities (Document, Video, Audio, Image). This sample demonstrates how to analyze content from publicly accessible URLs using prebuilt RAG analyzers: - prebuilt-documentSearch: For documents - prebuilt-videoSearch: For videos - prebuilt-audioSearch: For audio - prebuilt-imageSearch: For images                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [analyzeInvoice.ts][analyzeinvoice]             | Analyze an invoice from a URL using the prebuilt-invoice analyzer. This sample demonstrates how to analyze an invoice from a URL using the prebuilt-invoice analyzer and extract structured fields from the result. Content Understanding provides 70+ production-ready prebuilt analyzers that are ready to use without any training or configuration. The prebuilt-invoice analyzer automatically extracts: - Customer/Vendor information: Name, address, contact details - Invoice metadata: Invoice number, date, due date, purchase order number - Line items: Description, quantity, unit price, total for each item - Financial totals: Subtotal, tax amount, shipping charges, total amount - Payment information: Payment terms, payment method, remittance address                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [createAnalyzer.ts][createanalyzer]             | Create a custom analyzer with a field schema to extract structured data. This sample demonstrates how to create a custom analyzer with a field schema to extract structured data from documents. Custom analyzers allow you to: - Define custom fields (string, number, date, object, array) - Specify extraction methods: - extract: Values are extracted as they appear in the content (literal text extraction) - generate: Values are generated freely based on the content using AI models - classify: Values are classified against a predefined set of categories - Use prebuilt analyzers as a base (prebuilt-document, prebuilt-audio, prebuilt-video, prebuilt-image) - Configure analysis options (OCR, layout, formulas) - Enable source and confidence tracking for extracted field values                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [createClassifier.ts][createclassifier]         | Create a classifier analyzer to categorize documents. This sample demonstrates how to create a classifier analyzer to categorize documents and use it to analyze documents with and without automatic segmentation. Classifiers are a type of custom analyzer that create classification workflows to categorize documents into predefined custom categories. They are useful for: - Content organization: Organize large document collections by type - Data routing: Route data to specific custom analyzers based on category - Multi-document processing: Process files containing multiple document types by segmenting them                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [getAnalyzer.ts][getanalyzer]                   | Retrieve information about analyzers, including prebuilt and custom analyzers. This sample demonstrates how to retrieve information about analyzers, including prebuilt analyzers and custom analyzers. The getAnalyzer method allows you to retrieve detailed information about any analyzer: - Prebuilt analyzers: System-provided analyzers like prebuilt-documentSearch, prebuilt-invoice - Custom analyzers: Analyzers you've created with custom field schemas or classifiers This is useful for: - Verifying analyzer configuration - Inspecting prebuilt analyzers to learn about their capabilities - Debugging analyzer behavior                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [listAnalyzers.ts][listanalyzers]               | List all available analyzers in your Microsoft Foundry resource. This sample demonstrates how to list all available analyzers in your Microsoft Foundry resource, including both prebuilt and custom analyzers. The listAnalyzers method returns all analyzers in your resource, including: - Prebuilt analyzers: System-provided analyzers like prebuilt-documentSearch, prebuilt-invoice - Custom analyzers: Analyzers you've created This is useful for: - Discovery: See what analyzers are available in your resource - Management: Get an overview of all your custom analyzers - Debugging: Verify that analyzers were created successfully                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [updateAnalyzer.ts][updateanalyzer]             | Update an existing custom analyzer, including its description and tags. This sample demonstrates how to update an existing custom analyzer, including updating its description and tags. The updateAnalyzer method allows you to modify certain properties of an existing analyzer: - Description: Update the analyzer's description - Tags: Add or update tags Note: Not all analyzer properties can be updated. Field schemas, models, and configuration typically cannot be changed after creation. To change these, you may need to delete and recreate the analyzer.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [deleteAnalyzer.ts][deleteanalyzer]             | Delete a custom analyzer. This sample demonstrates how to delete a custom analyzer. The deleteAnalyzer method permanently removes a custom analyzer from your resource. This operation cannot be undone. Important notes: - Only custom analyzers can be deleted. Prebuilt analyzers cannot be deleted. - Deleting an analyzer does not delete analysis results that were created using that analyzer. - Once deleted, the analyzer ID cannot be reused immediately.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [analyzeConfigs.ts][analyzeconfigs]             | Extract additional features like charts, hyperlinks, formulas, and annotations. This sample demonstrates how to extract additional features from documents such as charts, hyperlinks, formulas, and annotations using the prebuilt-documentSearch analyzer. The prebuilt-documentSearch analyzer has the following configurations enabled by default: - ReturnDetails: true - Returns detailed information about document elements - EnableOcr: true - Performs OCR on documents - EnableLayout: true - Extracts layout information (tables, figures, hyperlinks, annotations) - EnableFormula: true - Extracts mathematical formulas from documents - EnableFigureDescription: true - Generates descriptions for figures - EnableFigureAnalysis: true - Analyzes figures including charts - ChartFormat: "chartjs" - Chart figures are returned in Chart.js format - TableFormat: "html" - Tables are returned in HTML format - AnnotationFormat: "markdown" - Annotations are returned in markdown format These configs enable extraction of: - Charts: Enabled by EnableFigureAnalysis - Chart figures with Chart.js configuration - Hyperlinks: Enabled by EnableLayout - URLs and links found in the document - Formulas: Enabled by EnableFormula - Mathematical formulas in LaTeX format - Annotations: Enabled by EnableLayout - PDF annotations, comments, and markup |
| [analyzeReturnRawJson.ts][analyzereturnrawjson] | Return raw JSON from analysis. This sample demonstrates how to access the raw JSON response from analysis operations. This is useful for scenarios where you need to inspect the full response structure exactly as returned by the service. About returning raw JSON: The Content Understanding SDK provides a convenient object model approach that returns strongly-typed objects with deeper navigation through the object model. However, sometimes you may need access to the raw JSON response for: - Easy inspection: View the complete response structure in the exact format returned by the service, making it easier to understand the full data model and discover available fields - Debugging: Inspect the raw response to troubleshoot issues, verify service behavior, or understand unexpected results - Advanced scenarios: Work with response structures that may change or include additional metadata not captured in the typed model Note: For most production scenarios, the object model approach is recommended as it provides type safety, IntelliSense support, and easier navigation. Use raw JSON access when you specifically need the benefits listed above.                                                                                                                                                                                    |
| [getResultFile.ts][getresultfile]               | Retrieve result files (such as keyframe images) from a video analysis operation. This sample demonstrates how to retrieve result files (such as keyframe images) from a video analysis operation using the getResultFile API. When analyzing video content, the Content Understanding service can generate result files: - Keyframe images: Extracted frames from the video at specific timestamps - Other result files: Additional files generated during analysis The getResultFile API allows you to retrieve these files using: - Operation ID: Extracted from the analysis operation - File path: The path to the specific result file (e.g., "keyframes/{frameTimeMs}")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [deleteResult.ts][deleteresult]                 | Delete analysis results using the deleteResult API. This sample demonstrates how to delete analysis results using the deleteResult API. This is useful for removing temporary or sensitive analysis results immediately, rather than waiting for automatic deletion after 24 hours. Analysis results are stored temporarily and can be deleted using the deleteResult API: - Immediate deletion: Results are marked for deletion and permanently removed - Automatic deletion: Results are automatically deleted after 24 hours if not manually deleted - Operation ID required: You need the operation ID from the analysis operation to delete Important: Once deleted, results cannot be recovered. Make sure you have saved any data you need before deleting.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [copyAnalyzer.ts][copyanalyzer]                 | Copy an analyzer from source to target within the same resource. This sample demonstrates how to copy an analyzer from source to target within the same resource using the copyAnalyzer API. This is useful for creating copies of analyzers for testing, staging, or production deployment. The copyAnalyzer API allows you to copy an analyzer within the same Azure resource: - Same-resource copy: Copies an analyzer from one ID to another within the same resource - Exact copy: The target analyzer is an exact copy of the source analyzer - Use cases: Testing, staging, production deployment, versioning Note: For cross-resource copying (copying between different Azure resources or subscriptions), use the grantCopyAuth sample instead.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [grantCopyAuth.ts][grantcopyauth]               | Grant copy authorization and copy an analyzer between resources. This sample demonstrates how to grant copy authorization and copy an analyzer from a source Microsoft Foundry resource to a target Microsoft Foundry resource (cross-resource copying). This is useful for copying analyzers between different Azure resources or subscriptions. The grantCopyAuthorization and copyAnalyzer APIs allow you to copy an analyzer between different Azure resources: - Cross-resource copy: Copies an analyzer from one Azure resource to another - Authorization required: You must grant copy authorization before copying When to use cross-resource copying: - Copy between subscriptions: Move analyzers between different Azure subscriptions - Multi-region deployment: Deploy the same analyzer to multiple regions - Resource migration: Migrate analyzers from one resource to another - Environment promotion: Promote analyzers from development to production across resources Note: For same-resource copying (copying within the same Microsoft Foundry resource), use the copyAnalyzer sample instead.                                                                                                                                                                                                                                                           |

## Prerequisites

The sample programs are compatible with [LTS versions of Node.js](https://github.com/nodejs/release#release-schedule).

Before running the samples in Node, they must be compiled to JavaScript using the TypeScript compiler. For more information on TypeScript, see the [TypeScript documentation][typescript]. Install the TypeScript compiler using:

```bash
npm install -g typescript
```

You need [an Azure subscription][freesub] to run these sample programs.

Samples retrieve credentials to access the service endpoint from environment variables. Alternatively, edit the source code to include the appropriate credentials. See each individual sample for details on which environment variables/credentials it requires to function.

Adapting the samples to run in the browser may require some additional consideration. For details, please see the [package README][package].

## Setup

To run the samples using the published version of the package:

1. Install the dependencies using `npm`:

```bash
npm install
```

2. Compile the samples:

```bash
npm run build
```

3. Edit the file `sample.env`, adding the correct credentials to access the Azure service and run the samples. Then rename the file from `sample.env` to just `.env`. The sample programs will read this file automatically.

4. Run whichever samples you like (note that some samples may require additional setup, see the table above):

```bash
node dist/updateDefaults.js
```

Alternatively, run a single sample with the required environment variables set (setting up the `.env` file is not required if you do this), for example (cross-platform):

```bash
npx cross-env AZURE_CONTENT_UNDERSTANDING_KEY="<azure content understanding key>" AZURE_CONTENT_UNDERSTANDING_ENDPOINT="<azure content understanding endpoint>" GPT_4_1_DEPLOYMENT="<gpt 4 1 deployment>" GPT_4_1_MINI_DEPLOYMENT="<gpt 4 1 mini deployment>" TEXT_EMBEDDING_3_LARGE_DEPLOYMENT="<text embedding 3 large deployment>" node dist/updateDefaults.js
```

## Next Steps

Take a look at our [API Documentation][apiref] for more information about the APIs that are available in the clients.

[updatedefaults]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/updateDefaults.ts
[analyzebinary]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/analyzeBinary.ts
[analyzeurl]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/analyzeUrl.ts
[analyzeinvoice]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/analyzeInvoice.ts
[createanalyzer]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/createAnalyzer.ts
[createclassifier]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/createClassifier.ts
[getanalyzer]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/getAnalyzer.ts
[listanalyzers]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/listAnalyzers.ts
[updateanalyzer]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/updateAnalyzer.ts
[deleteanalyzer]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/deleteAnalyzer.ts
[analyzeconfigs]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/analyzeConfigs.ts
[analyzereturnrawjson]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/analyzeReturnRawJson.ts
[getresultfile]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/getResultFile.ts
[deleteresult]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/deleteResult.ts
[copyanalyzer]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/copyAnalyzer.ts
[grantcopyauth]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/typescript/src/grantCopyAuth.ts
[apiref]: https://learn.microsoft.com/javascript/api/
[freesub]: https://azure.microsoft.com/free/
[package]: https://github.com/Azure/azure-sdk-for-js/tree/main/sdk/contentunderstanding/ai-content-understanding-rest/README.md
[typescript]: https://www.typescriptlang.org/docs/home.html
