# Azure Content Understanding client library samples for JavaScript (Beta)

These sample programs show how to use the JavaScript client libraries for Azure Content Understanding in some common scenarios.

| **File Name**                                   | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ----------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [configureDefaults.js][configuredefaults]       | Configure and retrieve default model deployment settings. This sample demonstrates how to configure and retrieve default model deployment settings for your Microsoft Foundry resource. This is a required one-time setup before using prebuilt analyzers. Content Understanding prebuilt analyzers require specific GPT model deployments to function: - GPT-4.1: Used by most prebuilt analyzers (e.g., prebuilt-invoice, prebuilt-receipt) - GPT-4.1-mini: Used by RAG analyzers (e.g., prebuilt-documentSearch, prebuilt-audioSearch) - text-embedding-3-large: Used for semantic search and embeddings                                                                                                                                                                                             |
| [analyzeBinary.js][analyzebinary]               | Analyze a PDF file from disk using the prebuilt-documentSearch analyzer. This sample demonstrates how to analyze a PDF file from disk using the prebuilt-documentSearch analyzer. The prebuilt-documentSearch analyzer transforms unstructured documents into structured, machine-readable data optimized for RAG scenarios. Content Understanding supports multiple content types: - Documents: Extract text, tables, figures, layout information, and structured markdown - Images: Analyze standalone images to generate descriptions and extract visual features - Audio: Transcribe audio content with speaker diarization and timing information - Video: Analyze video content with visual frame extraction and audio transcription                                                              |
| [analyzeUrl.js][analyzeurl]                     | Analyze a document from a URL using the prebuilt-documentSearch analyzer. This sample demonstrates how to analyze a document from a publicly accessible URL instead of a local file using the prebuilt-documentSearch analyzer. For understanding basic analysis concepts, authentication, and result processing, see analyzeBinary.ts first.                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [analyzeInvoice.js][analyzeinvoice]             | Analyze an invoice from a URL using the prebuilt-invoice analyzer. This sample demonstrates how to analyze an invoice from a URL using the prebuilt-invoice analyzer and extract structured fields from the result. Content Understanding provides 70+ production-ready prebuilt analyzers that are ready to use without any training or configuration. The prebuilt-invoice analyzer automatically extracts: - Customer/Vendor information: Name, address, contact details - Invoice metadata: Invoice number, date, due date, purchase order number - Line items: Description, quantity, unit price, total for each item - Financial totals: Subtotal, tax amount, shipping charges, total amount - Payment information: Payment terms, payment method, remittance address                            |
| [createAnalyzer.js][createanalyzer]             | Create a custom analyzer with a field schema to extract structured data. This sample demonstrates how to create a custom analyzer with a field schema to extract structured data from documents. Custom analyzers allow you to: - Define custom fields (string, number, date, object, array) - Specify extraction methods: - extract: Values are extracted as they appear in the content (literal text extraction) - generate: Values are generated freely based on the content using AI models - classify: Values are classified against a predefined set of categories - Use prebuilt analyzers as a base (prebuilt-document, prebuilt-audio, prebuilt-video, prebuilt-image) - Configure analysis options (OCR, layout, formulas) - Enable source and confidence tracking for extracted field values |
| [createClassifier.js][createclassifier]         | Create a classifier analyzer to categorize documents. This sample demonstrates how to create a classifier analyzer to categorize documents and use it to analyze documents with and without automatic segmentation. Classifiers are a type of custom analyzer that categorize documents into predefined categories. They're useful for: - Document routing: Automatically route documents to the right processing pipeline - Content organization: Organize large document collections by type - Multi-document processing: Process files containing multiple document types by segmenting them                                                                                                                                                                                                         |
| [getAnalyzer.js][getanalyzer]                   | Retrieve information about analyzers, including prebuilt and custom analyzers. This sample demonstrates how to retrieve information about analyzers, including prebuilt analyzers and custom analyzers. The getAnalyzer method allows you to retrieve detailed information about any analyzer: - Prebuilt analyzers: System-provided analyzers like prebuilt-documentSearch, prebuilt-invoice - Custom analyzers: Analyzers you've created with custom field schemas or classifiers This is useful for: - Verifying analyzer configuration - Inspecting prebuilt analyzers to learn about their capabilities - Debugging analyzer behavior                                                                                                                                                              |
| [listAnalyzers.js][listanalyzers]               | List all available analyzers in your Microsoft Foundry resource. This sample demonstrates how to list all available analyzers in your Microsoft Foundry resource, including both prebuilt and custom analyzers. The listAnalyzers method returns all analyzers in your resource, including: - Prebuilt analyzers: System-provided analyzers like prebuilt-documentSearch, prebuilt-invoice - Custom analyzers: Analyzers you've created This is useful for: - Discovery: See what analyzers are available in your resource - Management: Get an overview of all your custom analyzers - Debugging: Verify that analyzers were created successfully                                                                                                                                                      |
| [updateAnalyzer.js][updateanalyzer]             | Update an existing custom analyzer, including its description and tags. This sample demonstrates how to update an existing custom analyzer, including updating its description and tags. The updateAnalyzer method allows you to modify certain properties of an existing analyzer: - Description: Update the analyzer's description - Tags: Add, update, or remove tags (set tag value to empty string to remove) Note: Not all analyzer properties can be updated. Field schemas, models, and configuration typically cannot be changed after creation. To change these, you may need to delete and recreate the analyzer.                                                                                                                                                                            |
| [deleteAnalyzer.js][deleteanalyzer]             | Delete a custom analyzer. This sample demonstrates how to delete a custom analyzer. The deleteAnalyzer method permanently removes a custom analyzer from your resource. This operation cannot be undone. Important notes: - Only custom analyzers can be deleted. Prebuilt analyzers cannot be deleted. - Deleting an analyzer does not delete analysis results that were created using that analyzer. - Once deleted, the analyzer ID cannot be reused immediately.                                                                                                                                                                                                                                                                                                                                    |
| [analyzeConfigs.js][analyzeconfigs]             | Extract additional features like charts, hyperlinks, formulas, and annotations. This sample demonstrates how to extract additional features from documents such as charts, hyperlinks, formulas, and annotations using the prebuilt-documentSearch analyzer. The prebuilt-documentSearch analyzer has the following configurations enabled by default: - EnableFormula: Extracts mathematical formulas from documents - EnableLayout: Extracts layout information (tables, figures, etc.) - EnableOcr: Performs OCR on documents These configs enable extraction of: - Charts: Chart figures with Chart.js configuration - Hyperlinks: URLs and links found in the document - Formulas: Mathematical formulas in LaTeX format - Annotations: PDF annotations, comments, and markup                      |
| [analyzeReturnRawJson.js][analyzereturnrawjson] | Access the raw JSON response from analysis operations. This sample demonstrates how to access the raw JSON response from analysis operations using the protocol method and onResponse callback to capture the raw response. IMPORTANT NOTES: - The SDK returns analysis results with an object model, which is easier to navigate and retrieve the desired results compared to parsing raw JSON - This sample is ONLY for demonstration purposes to show how to access raw JSON responses - For production use, prefer the object model approach shown in the analyzeBinary sample                                                                                                                                                                                                                      |
| [getResultFile.js][getresultfile]               | Retrieve result files (such as keyframe images) from a video analysis operation. This sample demonstrates how to retrieve result files (such as keyframe images) from a video analysis operation using the getResultFile API. When analyzing video content, the Content Understanding service can generate result files: - Keyframe images: Extracted frames from the video at specific timestamps - Other result files: Additional files generated during analysis The getResultFile API allows you to retrieve these files using: - Operation ID: Extracted from the analysis operation - File path: The path to the specific result file (e.g., "keyframes/{frameTimeMs}")                                                                                                                           |
| [deleteResult.js][deleteresult]                 | Delete analysis results using the deleteResult API. This sample demonstrates how to delete analysis results using the deleteResult API. This is useful for removing temporary or sensitive analysis results immediately, rather than waiting for automatic deletion after 24 hours. Analysis results are stored temporarily and can be deleted using the deleteResult API: - Immediate deletion: Results are marked for deletion and permanently removed - Automatic deletion: Results are automatically deleted after 24 hours if not manually deleted - Operation ID required: You need the operation ID from the analysis operation to delete Important: Once deleted, results cannot be recovered. Make sure you have saved any data you need before deleting.                                      |
| [copyAnalyzer.js][copyanalyzer]                 | Copy an analyzer from source to target within the same resource. This sample demonstrates how to copy an analyzer from source to target within the same resource using the copyAnalyzer API. This is useful for creating copies of analyzers for testing, staging, or production deployment. The copyAnalyzer API allows you to copy an analyzer within the same Azure resource: - Same-resource copy: Copies an analyzer from one ID to another within the same resource - Exact copy: The target analyzer is an exact copy of the source analyzer - Use cases: Testing, staging, production deployment, versioning Note: For cross-resource copying (copying between different Azure resources or subscriptions), use the grantCopyAuth sample instead.                                               |
| [grantCopyAuth.js][grantcopyauth]               | Grant copy authorization and copy an analyzer between resources. This sample demonstrates how to grant copy authorization and copy an analyzer from a source resource to a target resource (cross-resource copying). This is useful for copying analyzers between different Azure resources or subscriptions. The grantCopyAuthorization and copyAnalyzer APIs allow you to copy an analyzer between different Azure resources: - Cross-resource copy: Copies an analyzer from one Azure resource to another - Authorization required: You must grant copy authorization before copying - Use cases: Cross-subscription copying, resource migration, multi-region deployment Note: For same-resource copying (copying within the same Azure resource), use the copyAnalyzer sample instead.             |

## Prerequisites

The sample programs are compatible with [LTS versions of Node.js](https://github.com/nodejs/release#release-schedule).

You need [an Azure subscription][freesub] to run these sample programs.

Samples retrieve credentials to access the service endpoint from environment variables. Alternatively, edit the source code to include the appropriate credentials. See each individual sample for details on which environment variables/credentials it requires to function.

Adapting the samples to run in the browser may require some additional consideration. For details, please see the [package README][package].

## Setup

To run the samples using the published version of the package:

1. Install the dependencies using `npm`:

```bash
npm install
```

2. Edit the file `sample.env`, adding the correct credentials to access the Azure service and run the samples. Then rename the file from `sample.env` to just `.env`. The sample programs will read this file automatically.

3. Run whichever samples you like (note that some samples may require additional setup, see the table above):

```bash
node configureDefaults.js
```

Alternatively, run a single sample with the correct environment variables set (setting up the `.env` file is not required if you do this), for example (cross-platform):

```bash
cross-env AZURE_CONTENT_UNDERSTANDING_KEY="<azure content understanding key>" AZURE_CONTENT_UNDERSTANDING_ENDPOINT="<azure content understanding endpoint>" GPT_4_1_DEPLOYMENT="<gpt 4 1 deployment>" GPT_4_1_MINI_DEPLOYMENT="<gpt 4 1 mini deployment>" TEXT_EMBEDDING_3_LARGE_DEPLOYMENT="<text embedding 3 large deployment>" node configureDefaults.js
```

## Next Steps

Take a look at our [API Documentation][apiref] for more information about the APIs that are available in the clients.

[configuredefaults]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/configureDefaults.js
[analyzebinary]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/analyzeBinary.js
[analyzeurl]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/analyzeUrl.js
[analyzeinvoice]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/analyzeInvoice.js
[createanalyzer]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/createAnalyzer.js
[createclassifier]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/createClassifier.js
[getanalyzer]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/getAnalyzer.js
[listanalyzers]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/listAnalyzers.js
[updateanalyzer]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/updateAnalyzer.js
[deleteanalyzer]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/deleteAnalyzer.js
[analyzeconfigs]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/analyzeConfigs.js
[analyzereturnrawjson]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/analyzeReturnRawJson.js
[getresultfile]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/getResultFile.js
[deleteresult]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/deleteResult.js
[copyanalyzer]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/copyAnalyzer.js
[grantcopyauth]: https://github.com/Azure/azure-sdk-for-js/blob/main/sdk/contentunderstanding/ai-content-understanding-rest/samples/v1-beta/javascript/grantCopyAuth.js
[apiref]: https://learn.microsoft.com/javascript/api/
[freesub]: https://azure.microsoft.com/free/
[package]: https://github.com/Azure/azure-sdk-for-js/tree/main/sdk/contentunderstanding/ai-content-understanding-rest/README.md
