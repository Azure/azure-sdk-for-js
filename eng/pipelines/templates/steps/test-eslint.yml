parameters:
  ServiceDirectory: ''

steps:
  - script: |
      npm install -g pnpm
    displayName: "Install Pnpm"

  - script: |
      pnpm install
    displayName: "Install library dependencies"

  - pwsh: |
      pnpm run --filter @azure/eslint-plugin-azure-sdk... --filter @azure/monitor-opentelemetry-exporter... build
      $env:FORCE_COLOR = "1"
      node eng/tools/ci-runner/index.js lint "${{parameters.ServiceDirectory}}"
    displayName: "Build ESLint Plugin and Lint Libraries"

  - pwsh: |
      pnpm run --filter @azure/eslint-plugin-azure-sdk... test
    displayName: "Run ESLint Plugin Unit Tests"
