parameters:
  ServiceDirectory: not-specified

steps:
  - script: |
      npm install
    workingDirectory: $(System.DefaultWorkingDirectory)/eng/tools/generate-doc
    displayName: "Install tool dependencies"

  - pwsh: |
      node $(Build.SourcesDirectory)/eng/tools/generate-doc/index.js --inc "${{parameters.ServiceDirectory}}"
    displayName: "Run Typedoc Docs"

  - pwsh: |
      $(Build.SourcesDirectory)/eng/tools/compress-subfolders.ps1 "$(Build.SourcesDirectory)/docGen" "$(Build.SourcesDirectory)/docGen"
    displayName: "Generate Typedoc Docs"
