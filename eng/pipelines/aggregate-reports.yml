trigger: none

pr:
  branches:
    include:
      - main
  paths:
    include:
      - eng/pipelines/aggregate-reports.yml

stages:
  - stage: ComplianceTools
    displayName: Compliance Tools
    dependsOn: []

    pool:
      # Policheck requires Windows
      name: azsdk-pool-mms-win-2019-general
      vmImage: MMS2019

    jobs:
      - job: ComplianceTools
        timeoutInMinutes: 120
        steps:
          - template: /eng/common/pipelines/templates/steps/credscan.yml

          - task: securedevelopmentteam.vss-secure-development-tools.build-task-publishsecurityanalysislogs.PublishSecurityAnalysisLogs@3
            displayName: 'Publish Security Analysis Logs'
            condition: succeededOrFailed()
